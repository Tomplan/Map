import{r,j as e}from"./vendor-react-868f88e1.js";import{B,s as E}from"./index-f332ba2f.js";import{L as R}from"./LanguageToggle-e7a669a9.js";import{u as D}from"./vendor-i18n-7a95c078.js";import"./vendor-eeb19b8c.js";import"./vendor-supabase-9b9847fe.js";import"./vendor-map-41af7335.js";function H({onLogin:k,branding:o}){const{t:s}=D(),[d,u]=r.useState(""),[h,P]=r.useState(""),[m,I]=r.useState(!1),[b,f]=r.useState(!1),[i,t]=r.useState(null),[p,j]=r.useState(!1),[C,c]=r.useState(!1),[w,x]=r.useState(""),[v,N]=r.useState(!1),[F,y]=r.useState(!1),n=r.useRef(null);r.useEffect(()=>{const a=localStorage.getItem("adminRememberEmail");a&&(u(a),f(!0))},[]),r.useEffect(()=>{i&&n.current&&n.current.focus()},[i]);const M=async a=>{a.preventDefault(),j(!0),t(null),b?localStorage.setItem("adminRememberEmail",d):localStorage.removeItem("adminRememberEmail");const{data:g,error:l}=await E.auth.signInWithPassword({email:d,password:h});j(!1),l?l.message.includes("Invalid login credentials")?t(s("adminLogin.errors.invalidCredentials")):l.message.includes("Email not confirmed")?t(l.message):l.message.includes("Network")?t(s("adminLogin.errors.networkError")):t(s("adminLogin.errors.unknownError")):k(g.user)},q=async a=>{a.preventDefault(),N(!0),t(null);const g="/Map",l=`${window.location.origin}${g}#/reset-password`,{error:T}=await E.auth.resetPasswordForEmail(w,{redirectTo:l});N(!1),T?t(s("adminLogin.errors.resetFailed")):(y(!0),setTimeout(()=>{c(!1),y(!1),x("")},5e3))},L=(o==null?void 0:o.eventName)||"4x4 Vakantiebeurs",S=(o==null?void 0:o.logo)||B.getDefaultLogoPath();return C?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-orange-50 flex items-center justify-center px-4 py-8",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[e.jsx("div",{className:"flex justify-end mb-6",children:e.jsx(R,{})}),e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[e.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 p-3 rounded-xl shadow-lg mb-4",children:e.jsx("img",{src:S,alt:"Event Logo",className:"h-12 w-12 object-contain"})}),e.jsx("h1",{className:"font-bold text-2xl text-gray-800 mb-1",children:L}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Manager Portal"})]}),e.jsx("h2",{className:"text-xl font-bold mb-2 text-gray-800",children:s("adminLogin.resetPassword")}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:s("adminLogin.resetInstructions")}),F?e.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 text-green-700 px-4 py-3 rounded-lg mb-4 shadow-sm",role:"alert","aria-live":"polite",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xl mr-3",children:"âœ“"}),e.jsx("span",{children:s("adminLogin.resetEmailSent")})]})}):e.jsxs("form",{onSubmit:q,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reset-email",className:"label-base",children:s("adminLogin.email")}),e.jsx("input",{id:"reset-email",type:"email",value:w,onChange:a=>x(a.target.value),className:"input-base",placeholder:s("adminLogin.emailPlaceholder"),"aria-label":s("adminLogin.email"),required:!0})]}),i&&e.jsx("div",{ref:n,className:"bg-red-50 border-l-4 border-red-500 text-red-700 px-4 py-3 rounded-lg shadow-sm",role:"alert","aria-live":"assertive",tabIndex:-1,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xl mr-3",children:"âš "}),e.jsx("span",{className:"text-sm",children:i})]})}),e.jsx("button",{type:"submit",className:"w-full py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg font-semibold hover:from-orange-700 hover:to-orange-800 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",disabled:v,children:s(v?"adminLogin.loggingIn":"adminLogin.sendResetLink")}),e.jsxs("button",{type:"button",onClick:()=>{c(!1),t(null),x("")},className:"w-full py-2 text-orange-600 hover:text-orange-700 font-medium text-sm transition-colors",children:["â† ",s("adminLogin.backToLogin")]})]})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-orange-50 flex items-center justify-center px-4 py-8",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[e.jsx("div",{className:"flex justify-end mb-6",children:e.jsx(R,{})}),e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[e.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 p-3 rounded-xl shadow-lg mb-4",children:e.jsx("img",{src:S,alt:"Event Logo",className:"h-12 w-12 object-contain"})}),e.jsx("h1",{className:"font-bold text-2xl text-gray-800 mb-1",children:L}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Manager Portal"})]}),e.jsx("h2",{className:"text-lg font-semibold mb-6 text-gray-700 text-center",children:s("adminLogin.subtitle")}),e.jsxs("form",{onSubmit:M,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"label-base",children:s("adminLogin.email")}),e.jsx("input",{id:"email",type:"email",value:d,onChange:a=>u(a.target.value),className:"input-base",placeholder:s("adminLogin.emailPlaceholder"),"aria-label":s("adminLogin.email"),"aria-required":"true",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"label-base",children:s("adminLogin.password")}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",type:m?"text":"password",value:h,onChange:a=>P(a.target.value),className:"input-base pr-20",placeholder:s("adminLogin.passwordPlaceholder"),"aria-label":s("adminLogin.password"),"aria-required":"true",required:!0}),e.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1.5 text-xs font-medium text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",onClick:()=>I(a=>!a),"aria-label":s(m?"adminLogin.hide":"adminLogin.show"),tabIndex:-1,children:m?"ðŸ”’":"ðŸ‘ï¸"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{htmlFor:"remember-me",className:"flex items-center cursor-pointer group",children:[e.jsx("input",{id:"remember-me",type:"checkbox",checked:b,onChange:a=>f(a.target.checked),className:"mr-2 h-4 w-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500 cursor-pointer","aria-label":s("adminLogin.rememberMe")}),e.jsx("span",{className:"text-sm text-gray-600 group-hover:text-gray-800 transition-colors",children:s("adminLogin.rememberMe")})]}),e.jsx("button",{type:"button",onClick:()=>c(!0),className:"text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:s("adminLogin.forgotPassword")})]}),i&&e.jsx("div",{ref:n,className:"bg-red-50 border-l-4 border-red-500 text-red-700 px-4 py-3 rounded-lg shadow-sm",role:"alert","aria-live":"assertive",tabIndex:-1,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xl mr-3",children:"âš "}),e.jsx("span",{className:"text-sm font-medium",children:i})]})}),e.jsx("button",{type:"submit",className:"w-full py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg font-semibold hover:from-orange-700 hover:to-orange-800 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-[1.02] active:scale-[0.98]",disabled:p,children:p?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s("adminLogin.loggingIn")]}):s("adminLogin.loginButton")})]})]}),e.jsx("div",{className:"text-center mt-6 text-xs text-gray-500",children:e.jsx("p",{children:"Secure manager access only"})})]})})}export{H as default};
