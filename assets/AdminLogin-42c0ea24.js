import{u as B,r,B as D,R as e,s as R}from"./index-1e4c7e6c.js";import{L as k}from"./LanguageToggle-08a9130b.js";function G({onLogin:P,branding:n}){const{t}=B(),[i,b]=r.useState(""),[x,I]=r.useState(""),[c,C]=r.useState(!1),[f,p]=r.useState(!1),[o,s]=r.useState(null),[E,h]=r.useState(!1),[F,d]=r.useState(!1),[w,g]=r.useState(""),[v,N]=r.useState(!1),[j,y]=r.useState(!1),m=r.useRef(null);r.useEffect(()=>{const a=localStorage.getItem("adminRememberEmail");a&&(b(a),p(!0))},[]),r.useEffect(()=>{o&&m.current&&m.current.focus()},[o]);const M=async a=>{a.preventDefault(),h(!0),s(null),f?localStorage.setItem("adminRememberEmail",i):localStorage.removeItem("adminRememberEmail");const{data:u,error:l}=await R.auth.signInWithPassword({email:i,password:x});h(!1),l?l.message.includes("Invalid login credentials")?s(t("adminLogin.errors.invalidCredentials")):l.message.includes("Email not confirmed")?s(l.message):l.message.includes("Network")?s(t("adminLogin.errors.networkError")):s(t("adminLogin.errors.unknownError")):P(u.user)},q=async a=>{a.preventDefault(),N(!0),s(null);const u="/Map",l=`${window.location.origin}${u}#/reset-password`,{error:T}=await R.auth.resetPasswordForEmail(w,{redirectTo:l});N(!1),T?s(t("adminLogin.errors.resetFailed")):(y(!0),setTimeout(()=>{d(!1),y(!1),g("")},5e3))},L=(n==null?void 0:n.eventName)||"4x4 Vakantiebeurs",S=(n==null?void 0:n.logo)||D.getDefaultLogoPath();return F?e.createElement("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-orange-50 flex items-center justify-center px-4 py-8"},e.createElement("div",{className:"w-full max-w-md"},e.createElement("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100"},e.createElement("div",{className:"flex justify-end mb-6"},e.createElement(k,null)),e.createElement("div",{className:"flex flex-col items-center mb-8"},e.createElement("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 p-3 rounded-xl shadow-lg mb-4"},e.createElement("img",{src:S,alt:"Event Logo",className:"h-12 w-12 object-contain"})),e.createElement("h1",{className:"font-bold text-2xl text-gray-800 mb-1"},L),e.createElement("p",{className:"text-gray-500 text-sm"},"Manager Portal")),e.createElement("h2",{className:"text-xl font-bold mb-2 text-gray-800"},t("adminLogin.resetPassword")),e.createElement("p",{className:"text-sm text-gray-600 mb-6"},t("adminLogin.resetInstructions")),j?e.createElement("div",{className:"bg-green-50 border-l-4 border-green-500 text-green-700 px-4 py-3 rounded-lg mb-4 shadow-sm",role:"alert","aria-live":"polite"},e.createElement("div",{className:"flex items-center"},e.createElement("span",{className:"text-xl mr-3"},"âœ“"),e.createElement("span",null,t("adminLogin.resetEmailSent")))):e.createElement("form",{onSubmit:q,className:"space-y-5"},e.createElement("div",null,e.createElement("label",{htmlFor:"reset-email",className:"label-base"},t("adminLogin.email")),e.createElement("input",{id:"reset-email",type:"email",value:w,onChange:a=>g(a.target.value),className:"input-base",placeholder:t("adminLogin.emailPlaceholder"),"aria-label":t("adminLogin.email"),required:!0})),o&&e.createElement("div",{ref:m,className:"bg-red-50 border-l-4 border-red-500 text-red-700 px-4 py-3 rounded-lg shadow-sm",role:"alert","aria-live":"assertive",tabIndex:-1},e.createElement("div",{className:"flex items-center"},e.createElement("span",{className:"text-xl mr-3"},"âš "),e.createElement("span",{className:"text-sm"},o))),e.createElement("button",{type:"submit",className:"w-full py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg font-semibold hover:from-orange-700 hover:to-orange-800 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",disabled:v},t(v?"adminLogin.loggingIn":"adminLogin.sendResetLink")),e.createElement("button",{type:"button",onClick:()=>{d(!1),s(null),g("")},className:"w-full py-2 text-orange-600 hover:text-orange-700 font-medium text-sm transition-colors"},"â† ",t("adminLogin.backToLogin")))))):e.createElement("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-orange-50 flex items-center justify-center px-4 py-8"},e.createElement("div",{className:"w-full max-w-md"},e.createElement("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100"},e.createElement("div",{className:"flex justify-end mb-6"},e.createElement(k,null)),e.createElement("div",{className:"flex flex-col items-center mb-8"},e.createElement("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 p-3 rounded-xl shadow-lg mb-4"},e.createElement("img",{src:S,alt:"Event Logo",className:"h-12 w-12 object-contain"})),e.createElement("h1",{className:"font-bold text-2xl text-gray-800 mb-1"},L),e.createElement("p",{className:"text-gray-500 text-sm"},"Manager Portal")),e.createElement("h2",{className:"text-lg font-semibold mb-6 text-gray-700 text-center"},t("adminLogin.subtitle")),e.createElement("form",{onSubmit:M,className:"space-y-5"},e.createElement("div",null,e.createElement("label",{htmlFor:"email",className:"label-base"},t("adminLogin.email")),e.createElement("input",{id:"email",type:"email",value:i,onChange:a=>b(a.target.value),className:"input-base",placeholder:t("adminLogin.emailPlaceholder"),"aria-label":t("adminLogin.email"),"aria-required":"true",required:!0})),e.createElement("div",null,e.createElement("label",{htmlFor:"password",className:"label-base"},t("adminLogin.password")),e.createElement("div",{className:"relative"},e.createElement("input",{id:"password",type:c?"text":"password",value:x,onChange:a=>I(a.target.value),className:"input-base pr-20",placeholder:t("adminLogin.passwordPlaceholder"),"aria-label":t("adminLogin.password"),"aria-required":"true",required:!0}),e.createElement("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1.5 text-xs font-medium text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",onClick:()=>C(a=>!a),"aria-label":t(c?"adminLogin.hide":"adminLogin.show"),tabIndex:-1},c?"ðŸ”’":"ðŸ‘ï¸"))),e.createElement("div",{className:"flex items-center justify-between"},e.createElement("label",{htmlFor:"remember-me",className:"flex items-center cursor-pointer group"},e.createElement("input",{id:"remember-me",type:"checkbox",checked:f,onChange:a=>p(a.target.checked),className:"mr-2 h-4 w-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500 cursor-pointer","aria-label":t("adminLogin.rememberMe")}),e.createElement("span",{className:"text-sm text-gray-600 group-hover:text-gray-800 transition-colors"},t("adminLogin.rememberMe"))),e.createElement("button",{type:"button",onClick:()=>d(!0),className:"text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors"},t("adminLogin.forgotPassword"))),o&&e.createElement("div",{ref:m,className:"bg-red-50 border-l-4 border-red-500 text-red-700 px-4 py-3 rounded-lg shadow-sm",role:"alert","aria-live":"assertive",tabIndex:-1},e.createElement("div",{className:"flex items-center"},e.createElement("span",{className:"text-xl mr-3"},"âš "),e.createElement("span",{className:"text-sm font-medium"},o))),e.createElement("button",{type:"submit",className:"w-full py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg font-semibold hover:from-orange-700 hover:to-orange-800 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-[1.02] active:scale-[0.98]",disabled:E},E?e.createElement("span",{className:"flex items-center justify-center"},e.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},e.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),t("adminLogin.loggingIn")):t("adminLogin.loginButton")))),e.createElement("div",{className:"text-center mt-6 text-xs text-gray-500"},e.createElement("p",null,"Secure manager access only"))))}export{G as default};
