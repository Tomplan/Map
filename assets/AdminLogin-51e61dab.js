import{u as B,r as t,B as D,j as e,s as S}from"./index-9f8e3d41.js";import{L as R}from"./LanguageToggle-61a6a211.js";function G({onLogin:k,branding:r}){const{t:s}=B(),[d,u]=t.useState(""),[h,I]=t.useState(""),[m,C]=t.useState(!1),[b,f]=t.useState(!1),[i,l]=t.useState(null),[p,j]=t.useState(!1),[P,c]=t.useState(!1),[v,x]=t.useState(""),[w,N]=t.useState(!1),[F,y]=t.useState(!1),n=t.useRef(null);t.useEffect(()=>{const a=localStorage.getItem("adminRememberEmail");a&&(u(a),f(!0))},[]),t.useEffect(()=>{i&&n.current&&n.current.focus()},[i]);const M=async a=>{a.preventDefault(),j(!0),l(null),b?localStorage.setItem("adminRememberEmail",d):localStorage.removeItem("adminRememberEmail");const{data:g,error:o}=await S.auth.signInWithPassword({email:d,password:h});j(!1),o?o.message.includes("Invalid login credentials")?l(s("adminLogin.errors.invalidCredentials")):o.message.includes("Email not confirmed")?l(o.message):o.message.includes("Network")?l(s("adminLogin.errors.networkError")):l(s("adminLogin.errors.unknownError")):k(g.user)},q=async a=>{a.preventDefault(),N(!0),l(null);const g="/Map",o=`${window.location.origin}${g}#/reset-password`,{error:T}=await S.auth.resetPasswordForEmail(v,{redirectTo:o});N(!1),T?l(s("adminLogin.errors.resetFailed")):(y(!0),setTimeout(()=>{c(!1),y(!1),x("")},5e3))},L=r!=null&&r.eventName&&r.eventName!=="4x4 Vakantiebeurs"?r.eventName:s("branding.defaultEventName"),E=(r==null?void 0:r.logo)||D.getDefaultLogoPath();return P?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-orange-50 flex items-center justify-center px-4 py-8",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[e.jsx("div",{className:"flex justify-end mb-6",children:e.jsx(R,{})}),e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[e.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 p-3 rounded-xl shadow-lg mb-4",children:e.jsx("img",{src:E,alt:"Event Logo",className:"h-12 w-12 object-contain"})}),e.jsx("h1",{className:"font-bold text-2xl text-gray-800 mb-1",children:L}),e.jsx("p",{className:"text-gray-500 text-sm",children:s("adminLogin.portal")})]}),e.jsx("h2",{className:"text-xl font-bold mb-2 text-gray-800",children:s("adminLogin.resetPassword")}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:s("adminLogin.resetInstructions")}),F?e.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 text-green-700 px-4 py-3 rounded-lg mb-4 shadow-sm",role:"alert","aria-live":"polite",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xl mr-3",children:"âœ“"}),e.jsx("span",{children:s("adminLogin.resetEmailSent")})]})}):e.jsxs("form",{onSubmit:q,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reset-email",className:"label-base",children:s("adminLogin.email")}),e.jsx("input",{id:"reset-email",type:"email",value:v,onChange:a=>x(a.target.value),className:"input-base",placeholder:s("adminLogin.emailPlaceholder"),"aria-label":s("adminLogin.email"),required:!0})]}),i&&e.jsx("div",{ref:n,className:"bg-red-50 border-l-4 border-red-500 text-red-700 px-4 py-3 rounded-lg shadow-sm",role:"alert","aria-live":"assertive",tabIndex:-1,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xl mr-3",children:"âš "}),e.jsx("span",{className:"text-sm",children:i})]})}),e.jsx("button",{type:"submit",className:"w-full py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg font-semibold hover:from-orange-700 hover:to-orange-800 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",disabled:w,children:s(w?"adminLogin.loggingIn":"adminLogin.sendResetLink")}),e.jsxs("button",{type:"button",onClick:()=>{c(!1),l(null),x("")},className:"w-full py-2 text-orange-600 hover:text-orange-700 font-medium text-sm transition-colors",children:["â† ",s("adminLogin.backToLogin")]})]})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-orange-50 flex items-center justify-center px-4 py-8",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[e.jsx("div",{className:"flex justify-end mb-6",children:e.jsx(R,{})}),e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[e.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 p-3 rounded-xl shadow-lg mb-4",children:e.jsx("img",{src:E,alt:"Event Logo",className:"h-12 w-12 object-contain"})}),e.jsx("h1",{className:"font-bold text-2xl text-gray-800 mb-1",children:L}),e.jsx("p",{className:"text-gray-500 text-sm",children:s("adminLogin.portal")})]}),e.jsx("h2",{className:"text-lg font-semibold mb-6 text-gray-700 text-center",children:s("adminLogin.subtitle")}),e.jsxs("form",{onSubmit:M,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"label-base",children:s("adminLogin.email")}),e.jsx("input",{id:"email",type:"email",value:d,onChange:a=>u(a.target.value),className:"input-base",placeholder:s("adminLogin.emailPlaceholder"),"aria-label":s("adminLogin.email"),"aria-required":"true",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"label-base",children:s("adminLogin.password")}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",type:m?"text":"password",value:h,onChange:a=>I(a.target.value),className:"input-base pr-20",placeholder:s("adminLogin.passwordPlaceholder"),"aria-label":s("adminLogin.password"),"aria-required":"true",required:!0}),e.jsx("button",{type:"button",className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1.5 text-xs font-medium text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",onClick:()=>C(a=>!a),"aria-label":s(m?"adminLogin.hide":"adminLogin.show"),tabIndex:-1,children:m?"ðŸ”’":"ðŸ‘ï¸"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{htmlFor:"remember-me",className:"flex items-center cursor-pointer group",children:[e.jsx("input",{id:"remember-me",type:"checkbox",checked:b,onChange:a=>f(a.target.checked),className:"mr-2 h-4 w-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500 cursor-pointer","aria-label":s("adminLogin.rememberMe")}),e.jsx("span",{className:"text-sm text-gray-600 group-hover:text-gray-800 transition-colors",children:s("adminLogin.rememberMe")})]}),e.jsx("button",{type:"button",onClick:()=>c(!0),className:"text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:s("adminLogin.forgotPassword")})]}),i&&e.jsx("div",{ref:n,className:"bg-red-50 border-l-4 border-red-500 text-red-700 px-4 py-3 rounded-lg shadow-sm",role:"alert","aria-live":"assertive",tabIndex:-1,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xl mr-3",children:"âš "}),e.jsx("span",{className:"text-sm font-medium",children:i})]})}),e.jsx("button",{type:"submit",className:"w-full py-3 bg-gradient-to-r from-orange-600 to-orange-700 text-white rounded-lg font-semibold hover:from-orange-700 hover:to-orange-800 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-[1.02] active:scale-[0.98]",disabled:p,children:p?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s("adminLogin.loggingIn")]}):s("adminLogin.loginButton")})]})]}),e.jsx("div",{className:"text-center mt-6 text-xs text-gray-500",children:e.jsx("p",{children:s("adminLogin.footerSecure")})})]})})}export{G as default};
