import{u as A,K as T,r as d,j as e,I as i,ax as O,aX as I,aY as H,az as M,aA as B,M as L,aw as R}from"./index-07c61819.js";import{u as q}from"./useCategories-c6258c26.js";const F=[{name:"mdiCarOutline",label:"Car"},{name:"mdiTent",label:"Tent"},{name:"mdiTrailer",label:"Trailer"},{name:"mdiCarCog",label:"Car Parts"},{name:"mdiAirplane",label:"Airplane"},{name:"mdiHomeCity",label:"Building"},{name:"mdiAccountGroup",label:"People"},{name:"mdiTerrainIcon",label:"Terrain"},{name:"mdiCellphone",label:"Phone"},{name:"mdiDotsHorizontal",label:"Other"}],V=["#1976d2","#2e7d32","#f57c00","#d32f2f","#00796b","#5d4037","#303f9f","#689f38","#7b1fa2","#616161","#c62828","#00897b","#5e35b1","#455a64","#6d4c41","#d84315"];function X(){const{t:a,i18n:N}=A(),{categories:m,loading:p,error:h,createCategory:v,updateCategory:w,deleteCategory:C,getCategoryStats:g}=q(N.language),{confirm:P,toastSuccess:b,toastError:f}=T(),[k,o]=d.useState(!1),[c,j]=d.useState(null),[u,S]=d.useState({}),[t,n]=d.useState({slug:"",icon:"mdiDotsHorizontal",color:"#616161",sort_order:0,translations:{nl:{name:"",description:""},en:{name:"",description:""},de:{name:"",description:""}}});d.useEffect(()=>{p||(async()=>{const r=await g();S(r)})()},[p,g,m]);const x=()=>{n({slug:"",icon:"mdiDotsHorizontal",color:"#616161",sort_order:m.length+1,translations:{nl:{name:"",description:""},en:{name:"",description:""},de:{name:"",description:""}}}),j(null)},D=()=>{x(),o(!0)},E=s=>{j(s);const r={nl:{},en:{},de:{}};Array.isArray(s.translations)&&s.translations.forEach(l=>{r[l.language]&&(r[l.language]={name:l.name||"",description:l.description||""})}),["nl","en","de"].forEach(l=>{r[l].name||(r[l]={name:s.name||"",description:s.description||""})}),n({slug:s.slug,icon:s.iconName,color:s.color,sort_order:s.sort_order,translations:r}),o(!0)},z=async(s,r)=>{if(!await P({title:a("helpPanel.categories.deleteCategory"),message:a("helpPanel.categories.confirmDelete",{name:r}),confirmText:a("common.delete"),variant:"danger"}))return;const y=await C(s);y.success?b(a("helpPanel.categories.deleteSuccess")):f(a("helpPanel.categories.deleteError",{error:y.error}))},_=async s=>{s.preventDefault();const r={slug:t.slug,icon:t.icon,color:t.color,sort_order:t.sort_order,translations:t.translations};let l;c?l=await w(c.id,r,t.translations):l=await v(r),l.success?(o(!1),x(),b(a(c?"helpPanel.categories.updateSuccess":"helpPanel.categories.createSuccess"))):f(a("helpPanel.categories.saveError",{error:l.error}))};return p?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:a("common.loading")})}):h?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-red-800",children:[a("common.error"),": ",h]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:a("helpPanel.categories.title")}),e.jsx("p",{className:"text-gray-600 mt-1",children:a("helpPanel.categories.description")})]}),e.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(i,{path:O,size:.8}),a("helpPanel.categories.createNew")]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("helpPanel.categories.order")}),e.jsx("th",{className:"px-3 py-3 w-12"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("helpPanel.categories.category")}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("helpPanel.categories.slug")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("helpPanel.categories.exhibitors")}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("common.actions")})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[e.jsx(i,{path:I,size:.8,className:"cursor-move"}),e.jsx("span",{className:"font-medium",children:s.sort_order})]})}),e.jsx("td",{className:"px-3 py-4 whitespace-nowrap w-12",children:e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:s.color},children:e.jsx(i,{path:s.icon,size:.7,className:"text-white"})})}),e.jsxs("td",{className:"px-3 py-4 whitespace-nowrap text-left",children:[e.jsx("div",{className:"font-medium text-gray-900 truncate",children:s.name}),s.description&&e.jsx("div",{className:"text-xs text-gray-500 truncate",children:s.description})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsx("code",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded font-mono",children:s.slug})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{path:H,size:.7,className:"text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600",children:u[s.id]||0})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>E(s),className:"text-blue-600 hover:text-blue-900 mr-3",children:e.jsx(i,{path:M,size:.8})}),e.jsx("button",{onClick:()=>z(s.id,s.name),className:"text-red-600 hover:text-red-900",disabled:u[s.id]>0,title:u[s.id]>0?a("helpPanel.categories.cannotDelete"):"",children:e.jsx(i,{path:B,size:.8})})]})]},s.id))})]}),m.length===0&&e.jsx("div",{className:"text-center py-12 text-gray-500",children:a("helpPanel.categories.noCategories")})]}),e.jsx(L,{isOpen:k,onClose:()=>{o(!1),x()},title:a(c?"helpPanel.categories.editCategory":"helpPanel.categories.createCategory"),size:"lg",children:e.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a("helpPanel.categories.slug")," *"]}),e.jsx("input",{type:"text",required:!0,value:t.slug,onChange:s=>n({...t,slug:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"vehicles-dealers"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a("helpPanel.categories.slugHelp")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("helpPanel.categories.icon")}),e.jsx("select",{value:t.icon,onChange:s=>n({...t,icon:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:F.map(s=>e.jsx("option",{value:s.name,children:s.label},s.name))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("helpPanel.categories.color")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:t.color,onChange:s=>n({...t,color:s.target.value}),className:"w-16 h-10 border border-gray-300 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:t.color,onChange:s=>n({...t,color:s.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"#1976d2"})]}),e.jsx("div",{className:"flex gap-1 mt-2",children:V.map(s=>e.jsx("button",{type:"button",onClick:()=>n({...t,color:s}),className:"w-6 h-6 rounded border-2 border-gray-200 hover:border-gray-400",style:{backgroundColor:s},title:s},s))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:a("helpPanel.categories.sortOrder")}),e.jsx("input",{type:"number",value:t.sort_order,onChange:s=>n({...t,sort_order:parseInt(s.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:a("helpPanel.categories.translations")}),["nl","en","de"].map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 space-y-3",children:[e.jsx("h5",{className:"font-medium text-gray-700 uppercase",children:s}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a("helpPanel.categories.name")," (",s,") *"]}),e.jsx("input",{type:"text",required:!0,value:t.translations[s].name,onChange:r=>n({...t,translations:{...t.translations,[s]:{...t.translations[s],name:r.target.value}}}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a("helpPanel.categories.description")," (",s,")"]}),e.jsx("textarea",{value:t.translations[s].description,onChange:r=>n({...t,translations:{...t.translations,[s]:{...t.translations[s],description:r.target.value}}}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]})]},s))]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>{o(!1),x()},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:a("common.cancel")}),e.jsxs("button",{type:"submit",className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(i,{path:R,size:.8}),a(c?"common.save":"common.create")]})]})]})})]})}export{X as default};
