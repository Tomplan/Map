import{u as S,r as o,j as C,N as q,X as z,Y as D,R as e,I as r,Z as x,_ as v,$ as N,a0 as $,L as i,s as b}from"./index-1e4c7e6c.js";import{u as M}from"./useEventSubscriptions-6efe7c48.js";import"./phone-376c158e.js";function F({selectedYear:l,setSelectedYear:R}){var E,p,h;const{t}=S(),{subscriptions:m,loading:u}=M(l),[c,f]=o.useState({markers:null,companies:null,assignments:null});o.useState(!1),o.useState(null);const[d,g]=o.useState(!0);o.useEffect(()=>{async function a(){g(!0);try{const[s,_,w]=await Promise.all([b.from("markers_core").select("id",{count:"exact",head:!0}).gt("id",0),b.from("companies").select("id",{count:"exact",head:!0}),b.from("assignments").select("id",{count:"exact",head:!0}).eq("event_year",l)]);f({markers:s.count??0,companies:_.count??0,assignments:w.count??0})}catch(s){console.error("Error fetching dashboard counts:",s)}finally{g(!1)}}a()},[l]);const n=o.useMemo(()=>m.reduce((a,s)=>({breakfast_sat:a.breakfast_sat+(s.breakfast_sat||0),lunch_sat:a.lunch_sat+(s.lunch_sat||0),bbq_sat:a.bbq_sat+(s.bbq_sat||0),breakfast_sun:a.breakfast_sun+(s.breakfast_sun||0),lunch_sun:a.lunch_sun+(s.lunch_sun||0),coins:a.coins+(s.coins||0)}),{breakfast_sat:0,lunch_sat:0,bbq_sat:0,breakfast_sun:0,lunch_sun:0,coins:0}),[m]),y=[{label:t("dashboard.totalMarkers"),value:d?"...":((E=c.markers)==null?void 0:E.toString())??"-",icon:C,color:"blue"},{label:t("dashboard.companies"),value:d?"...":((p=c.companies)==null?void 0:p.toString())??"-",icon:q,color:"green"},{label:`${l} ${t("dashboard.subscriptions")}`,value:u?"...":m.length.toString(),icon:z,color:"orange"},{label:`${l} ${t("dashboard.assignments")}`,value:d?"...":((h=c.assignments)==null?void 0:h.toString())??"-",icon:D,color:"purple"}],k={blue:"bg-blue-50 text-blue-700 border-blue-200",green:"bg-green-50 text-green-700 border-green-200",orange:"bg-orange-50 text-orange-700 border-orange-200",purple:"bg-purple-50 text-purple-700 border-purple-200",yellow:"bg-yellow-50 text-yellow-700 border-yellow-200"};return e.createElement("div",null,e.createElement("div",{className:"bg-white rounded-lg shadow p-6 mb-6"},e.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-6"},l," ",t("dashboard.eventTotals"),(u||d)&&e.createElement("span",{className:"text-sm font-normal text-gray-500 ml-2"},t("common.loading"))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},y.map(a=>e.createElement("div",{key:a.label,className:`p-4 rounded-lg border-2 ${k[a.color]}`},e.createElement("div",{className:"flex items-center gap-3"},e.createElement(r,{path:a.icon,size:1.5}),e.createElement("div",null,e.createElement("div",{className:"text-2xl font-bold"},a.value),e.createElement("div",{className:"text-sm font-medium mt-1"},a.label)))))),e.createElement("div",{className:"mb-4"},e.createElement("h3",{className:"text-sm font-semibold text-gray-600 mb-2 uppercase tracking-wide"},t("dashboard.saturday")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},e.createElement("div",{className:"p-4 rounded-lg border-2 bg-blue-50 text-blue-700 border-blue-200"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement(r,{path:x,size:1.5}),e.createElement("div",null,e.createElement("div",{className:"text-2xl font-bold"},n.breakfast_sat),e.createElement("div",{className:"text-sm font-medium"},t("dashboard.breakfast"))))),e.createElement("div",{className:"p-4 rounded-lg border-2 bg-blue-50 text-blue-700 border-blue-200"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement(r,{path:v,size:1.5}),e.createElement("div",null,e.createElement("div",{className:"text-2xl font-bold"},n.lunch_sat),e.createElement("div",{className:"text-sm font-medium"},t("dashboard.lunch"))))),e.createElement("div",{className:"p-4 rounded-lg border-2 bg-blue-50 text-blue-700 border-blue-200"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement(r,{path:N,size:1.5}),e.createElement("div",null,e.createElement("div",{className:"text-2xl font-bold"},n.bbq_sat),e.createElement("div",{className:"text-sm font-medium"},t("dashboard.bbq"))))))),e.createElement("div",{className:"mb-4"},e.createElement("h3",{className:"text-sm font-semibold text-gray-600 mb-2 uppercase tracking-wide"},t("dashboard.sunday")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},e.createElement("div",{className:"p-4 rounded-lg border-2 bg-green-50 text-green-700 border-green-200"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement(r,{path:x,size:1.5}),e.createElement("div",null,e.createElement("div",{className:"text-2xl font-bold"},n.breakfast_sun),e.createElement("div",{className:"text-sm font-medium"},t("dashboard.breakfast"))))),e.createElement("div",{className:"p-4 rounded-lg border-2 bg-green-50 text-green-700 border-green-200"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement(r,{path:v,size:1.5}),e.createElement("div",null,e.createElement("div",{className:"text-2xl font-bold"},n.lunch_sun),e.createElement("div",{className:"text-sm font-medium"},t("dashboard.lunch"))))),e.createElement("div",{className:"p-4 rounded-lg border-2 border-dashed border-gray-200 bg-gray-50 text-gray-400"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement(r,{path:N,size:1.5}),e.createElement("div",null,e.createElement("div",{className:"text-2xl font-bold"},"-"),e.createElement("div",{className:"text-sm font-medium"},t("dashboard.noBBQ"))))))),e.createElement("div",null,e.createElement("h3",{className:"text-sm font-semibold text-gray-600 mb-2 uppercase tracking-wide"},t("dashboard.coins")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},e.createElement("div",{className:"p-4 rounded-lg border-2 bg-yellow-50 text-yellow-700 border-yellow-200"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement(r,{path:$,size:1.5}),e.createElement("div",null,e.createElement("div",{className:"text-2xl font-bold"},n.coins),e.createElement("div",{className:"text-sm font-medium"},t("dashboard.totalCoins")))))))),e.createElement("div",{className:"bg-white rounded-lg shadow p-6"},e.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-4"},t("dashboard.quickActions")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},e.createElement(i,{to:"/admin/companies",className:"p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors"},e.createElement("div",{className:"font-semibold text-gray-900"},t("dashboard.addNewCompany")),e.createElement("div",{className:"text-sm text-gray-600 mt-1"},t("dashboard.addNewCompanyDesc"))),e.createElement(i,{to:"/admin/subscriptions",className:"p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors"},e.createElement("div",{className:"font-semibold text-gray-900"},t("dashboard.manageSubscriptions")),e.createElement("div",{className:"text-sm text-gray-600 mt-1"},t("dashboard.manageSubscriptionsDesc"))),e.createElement(i,{to:"/admin/assignments",className:"p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors"},e.createElement("div",{className:"font-semibold text-gray-900"},t("dashboard.assignBooths")),e.createElement("div",{className:"text-sm text-gray-600 mt-1"},t("dashboard.assignBoothsDesc"))))),e.createElement("div",{className:"bg-white rounded-lg shadow p-6 mt-6"},e.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-4"},t("dashboard.recentActivity")),e.createElement("p",{className:"text-gray-600"},t("dashboard.recentActivityPlaceholder"))))}export{F as default};
