const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-fOhCFQgH.js","assets/index-CIXldulm.css"])))=>i.map(i=>d[i]);
import{r as g,a as Re,g as $e,b as De,L as C,c as V,R as E,l as Z,d as He,e as Ue,f as We,h as Q,i as Ge,j as Ie,k as Be,w as Ze,m as l,I as he,n as Fe,o as qe,M as Xe,p as ge,_ as Ye}from"./index-fOhCFQgH.js";const Ve=(e,t,n,a)=>{const r=[n,{code:t,...a||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(r,"warn","react-i18next::",!0);T(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...r):console?.warn&&console.warn(...r)},pe={},ze=(e,t,n,a)=>{T(n)&&pe[n]||(T(n)&&(pe[n]=new Date),Ve(e,t,n,a))},Ne=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},de=(e,t,n)=>{e.loadNamespaces(t,Ne(e,n))},ye=(e,t,n,a)=>{if(T(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return de(e,n,a);n.forEach(r=>{e.options.ns.indexOf(r)<0&&e.options.ns.push(r)}),e.loadLanguages(t,Ne(e,a))},Je=(e,t,n={})=>!t.languages||!t.languages.length?(ze(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(a,r)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&a.services.backendConnector.backend&&a.isLanguageChangingTo&&!r(a.isLanguageChangingTo,e))return!1}}),T=e=>typeof e=="string",Ke=e=>typeof e=="object"&&e!==null,Qe=g.createContext();class et{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var se={exports:{}},le={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var me;function tt(){if(me)return le;me=1;var e=Re();function t(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var n=typeof Object.is=="function"?Object.is:t,a=e.useState,r=e.useEffect,s=e.useLayoutEffect,f=e.useDebugValue;function u(d,p){var y=p(),N=a({inst:{value:y,getSnapshot:p}}),b=N[0].inst,j=N[1];return s(function(){b.value=y,b.getSnapshot=p,c(b)&&j({inst:b})},[d,y,p]),r(function(){return c(b)&&j({inst:b}),d(function(){c(b)&&j({inst:b})})},[d]),f(y),y}function c(d){var p=d.getSnapshot;d=d.value;try{var y=p();return!n(d,y)}catch{return!0}}function i(d,p){return p()}var x=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?i:u;return le.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:x,le}var xe;function nt(){return xe||(xe=1,se.exports=tt()),se.exports}var ot=nt();const at=(e,t)=>T(t)?t:Ke(t)&&T(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,it={t:at,ready:!1},rt=()=>()=>{},st=(e,t={})=>{const{i18n:n}=t,{i18n:a,defaultNS:r}=g.useContext(Qe)||{},s=n||a||$e();s&&!s.reportNamespaces&&(s.reportNamespaces=new et),s||ze(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const f=g.useMemo(()=>({...De(),...s?.options?.react,...t}),[s,t]),{useSuspense:u,keyPrefix:c}=f,i=g.useMemo(()=>{const h=r||s?.options?.defaultNS;return T(h)?[h]:h||["translation"]},[e,r,s]);s?.reportNamespaces?.addUsedNamespaces?.(i);const x=g.useCallback(h=>{if(!s)return rt;const{bindI18n:L,bindI18nStore:S}=f;return L&&s.on(L,h),S&&s.store.on(S,h),()=>{L&&L.split(" ").forEach(v=>s.off(v,h)),S&&S.split(" ").forEach(v=>s.store.off(v,h))}},[s,f]),d=g.useRef(),p=g.useCallback(()=>{if(!s)return it;const h=!!(s.isInitialized||s.initializedStoreOnce)&&i.every(A=>Je(A,s,f)),L=s.getFixedT(t.lng||s.language,f.nsMode==="fallback"?i:i[0],c),S=d.current;if(S&&S.ready===h&&S.lng===(t.lng||s.language)&&S.keyPrefix===c)return S;const v={t:L,ready:h,lng:t.lng||s.language,keyPrefix:c};return d.current=v,v},[s,i,c,f,t.lng]),[y,N]=g.useState(0),{t:b,ready:j}=ot.useSyncExternalStore(x,p,p);g.useEffect(()=>{if(s&&!j&&!u){const h=()=>N(L=>L+1);t.lng?ye(s,t.lng,i,h):de(s,i,h)}},[s,t.lng,i,j,u,y]);const M=s||{},I=g.useMemo(()=>{const h=[b,M,j];return h.t=b,h.i18n=M,h.ready=j,h},[b,M,j]);if(s&&u&&!j)throw new Promise(h=>{const L=()=>h();t.lng?ye(s,t.lng,i,L):de(s,i,L)});return I};function be(e){const{logo:t,name:n,website:a,info:r}=e,s=t?V(t):"";return`
    <div class="marker-popup">
      ${s?`<img src="${s}" alt="${n||"Logo"}" class="marker-popup-logo" style="max-width:64px;max-height:64px;margin-bottom:8px;" />`:""}
      ${n?`<div class="marker-popup-name" style="font-weight:bold;font-size:1.1em;margin-bottom:4px;">${n}</div>`:""}
      ${a?`<div class="marker-popup-website" style="margin-bottom:4px;"><a href="${a}" target="_blank" rel="noopener" style="color:#1976d2;text-decoration:underline;">${a}</a></div>`:""}
      ${r?`<div class="marker-popup-info" style="font-size:0.95em;color:#444;">${r}</div>`:""}
    </div>
  `}function ue({glyph:e,glyphColor:t="white",bgColor:n="white",glyphSize:a="8px",iconUrl:r="/Map/assets/icons/glyph-marker-icon-blue.svg",className:s,iconSize:f,prefix:u,glyphAnchor:c}){let i=a;typeof i=="number"?i=`${i}px`:typeof i=="string"&&!i.endsWith("px")?i=`${i}px`:i||(i="8px");const x=f||[25,41],d=Math.round(x[0]*(41/25)),p=Math.round(x[1]*(41/41)),y=Math.round(d*12/41),N=p;return C.icon.glyph({iconUrl:r||"/Map/assets/icons/glyph-marker-icon-blue.svg",iconSize:x,iconAnchor:[Math.round(x[0]/2),x[1]],popupAnchor:[1,-34],tooltipAnchor:[0,0],shadowUrl:"/Map/assets/icons/marker-shadow.png",shadowSize:[d,p],shadowAnchor:[y,N],prefix:u||"",glyph:e||"",glyphColor:t||"white",bgColor:n,glyphSize:i,glyphAnchor:c||[0,0],className:s||""})}function lt(e){return e.getChildCount(),ue({iconUrl:"/Map/assets/icons/glyph-marker-icon-orange.svg",iconSize:[50,82],glyph:`<div style='display:flex;align-items:center;justify-content:center;width:100%;height:100%;'>
  <img src='/Map/assets/logos/4x4Vakantiebeurs.png' alt='logo' style='width:40px;height:40px;object-fit:contain;display:block;margin:auto;position:relative;left:1px;top:10px;' />
      </div>`,glyphColor:"white",glyphSize:"40px",className:"custom-cluster-icon"})}var Ee={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ve=E.createContext&&E.createContext(Ee),ct=["attr","size","title"];function dt(e,t){if(e==null)return{};var n=ut(e,t),a,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function ut(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},J.apply(this,arguments)}function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,a)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?we(Object(n),!0).forEach(function(a){ft(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function ft(e,t,n){return t=ht(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ht(e){var t=gt(e,"string");return typeof t=="symbol"?t:t+""}function gt(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oe(e){return e&&e.map((t,n)=>E.createElement(t.tag,K({key:n},t.attr),Oe(t.child)))}function fe(e){return t=>E.createElement(pt,J({attr:K({},e.attr)},t),Oe(e.child))}function pt(e){var t=n=>{var{attr:a,size:r,title:s}=e,f=dt(e,ct),u=r||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),E.createElement("svg",J({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,f,{className:c,style:K(K({color:e.color||n.color},n.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),s&&E.createElement("title",null,s),e.children)};return ve!==void 0?E.createElement(ve.Consumer,null,n=>t(n)):t(Ee)}function yt(e){return fe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"},child:[]}]})(e)}function mt(e){return fe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(e)}function xt(e){return fe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13H5v-2h14v2z"},child:[]}]})(e)}function bt(e,t,n){const{opacity:a,zIndex:r}=t;a!=null&&a!==n.opacity&&e.setOpacity(a),r!=null&&r!==n.zIndex&&e.setZIndex(r)}function vt({bounds:e,boundsOptions:t,center:n,children:a,className:r,id:s,placeholder:f,style:u,whenReady:c,zoom:i,...x},d){const[p]=g.useState({className:r,id:s,style:u}),[y,N]=g.useState(null),b=g.useRef(void 0);g.useImperativeHandle(d,()=>y?.map??null,[y]);const j=g.useCallback(I=>{if(I!==null&&!b.current){const h=new Z.Map(I,x);b.current=h,n!=null&&i!=null?h.setView(n,i):e!=null&&h.fitBounds(e,t),c!=null&&h.whenReady(c),N(He(h))}},[]);g.useEffect(()=>()=>{y?.map.remove()},[y]);const M=y?E.createElement(Ue,{value:y},a):f??null;return E.createElement("div",{...p,ref:j},M)}const wt=g.forwardRef(vt),Le=We(function({position:t,...n},a){const r=new Z.Marker(t,n);return Q(r,Ge(a,{overlayContainer:r}))},function(t,n,a){n.position!==a.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==a.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==a.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==a.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==a.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),Se=Ie(function(t,n){const a=new Z.Popup(t,n.overlayContainer);return Q(a,n)},function(t,n,{position:a},r){g.useEffect(function(){const{instance:f}=t;function u(i){i.popup===f&&(f.update(),r(!0))}function c(i){i.popup===f&&r(!1)}return n.map.on({popupopen:u,popupclose:c}),n.overlayContainer==null?(a!=null&&f.setLatLng(a),f.openOn(n.map)):n.overlayContainer.bindPopup(f),function(){n.map.off({popupopen:u,popupclose:c}),n.overlayContainer?.unbindPopup(),n.map.removeLayer(f)}},[t,n,r,a])}),Lt=Be(function({url:t,...n},a){const r=new Z.TileLayer(t,Ze(n,a));return Q(r,a)},function(t,n,a){bt(t,n,a);const{url:r}=n;r!=null&&r!==a.url&&t.setUrl(r)}),je=Ie(function(t,n){const a=new Z.Tooltip(t,n.overlayContainer);return Q(a,n)},function(t,n,{position:a},r){g.useEffect(function(){const f=n.overlayContainer;if(f==null)return;const{instance:u}=t,c=x=>{x.tooltip===u&&(a!=null&&u.setLatLng(a),u.update(),r(!0))},i=x=>{x.tooltip===u&&r(!1)};return f.on({tooltipopen:c,tooltipclose:i}),f.bindTooltip(u),function(){f.off({tooltipopen:c,tooltipclose:i}),f._map!=null&&f.unbindTooltip()}},[t,n,r,a])});function St(e){return e.angle||0}function k(e,t,n){const a=n*Math.PI/180,r=e*Math.cos(a)-t*Math.sin(a),s=e*Math.sin(a)+t*Math.cos(a);return[r,s]}function G(e){return e/111320}function B(e,t){return e/(40075e3*Math.cos(t*Math.PI/180)/360)}function jt(e){return e*111320}function Ct(e,t){return e*(40075e3*Math.cos(t*Math.PI/180)/360)}function Mt({mapInstance:e,markers:t,rectangleSize:n,isAdminView:a,showRectanglesAndHandles:r,updateMarker:s,rectangleLayerRef:f}){if(!e)return;f.current||(f.current=C.layerGroup(),f.current.addTo(e));const u=f.current;u._markerLayers||(u._markerLayers={}),Object.keys(u._markerLayers).forEach(c=>{t.find(i=>i.id===c)||(u.removeLayer(u._markerLayers[c].rectangle),u.removeLayer(u._markerLayers[c].handle),delete u._markerLayers[c])}),t.forEach(c=>{if(c.lat&&c.lng){const i=C.latLng(c.lat,c.lng),x=Array.isArray(c.rectangle)&&c.rectangle.length===2?c.rectangle:n,d=Number(x[0])/2,p=Number(x[1])/2,y=St(c),N="#1976d2",b=[k(-d,-p,y),k(d,-p,y),k(d,p,y),k(-d,p,y)],j=b.map(([h,L])=>C.latLng(i.lat+G(L),i.lng+B(h,i.lat)));let M,I;if(u._markerLayers[c.id]){M=u._markerLayers[c.id].rectangle,M.setLatLngs(j),I=u._markerLayers[c.id].handle;const[h,L]=b[2],S=C.latLng(i.lat+G(L),i.lng+B(h,i.lat));I.setLatLng(S)}else{M=C.polygon(j,{color:N,weight:1});const[h,L]=b[2],S=C.latLng(i.lat+G(L),i.lng+B(h,i.lat));let v;if(a&&!c.coreLocked){const A=C.divIcon({className:"rotation-handle-icon",html:'<div style="width:8px;height:8px;background:#1976d2;border-radius:50%;"></div>',iconSize:[8,8],iconAnchor:[4,4]});v=C.marker(S,{icon:A,draggable:!0,interactive:!0,keyboard:!0,title:"Drag to rotate"}),v.on("dragstart",function(){e&&e.dragging.disable()});let _=y;v.on("drag",function(D){const O=D.target.getLatLng(),R=Ct(O.lng-i.lng,i.lat),F=jt(O.lat-i.lat);let H=Math.atan2(F,R)*180/Math.PI;H<0&&(H+=360),_=H;const q=[k(-d,-p,_),k(d,-p,_),k(d,p,_),k(-d,p,_)],ee=q.map(([ne,oe])=>C.latLng(i.lat+G(oe),i.lng+B(ne,i.lat)));M.setLatLngs(ee);const[te,X]=q[2],Y=C.latLng(i.lat+G(X),i.lng+B(te,i.lat));v.setLatLng(Y)}),v.on("dragend",function(){e&&e.dragging.enable(),s(c.id,{angle:_})})}else{const A=C.divIcon({className:"rotation-handle-icon",html:'<div style="width:8px;height:8px;background:#1976d2;border-radius:50%;opacity:0.5;"></div>',iconSize:[8,8],iconAnchor:[4,4]});v=C.marker(S,{icon:A,draggable:!1,interactive:!1,keyboard:!1,title:"Locked"})}u.addLayer(M),u.addLayer(v),u._markerLayers[c.id]={rectangle:M,handle:v}}}}),Object.values(u._markerLayers).forEach(({rectangle:c,handle:i})=>{r?(u.addLayer(c),u.addLayer(i)):(u.removeLayer(c),u.removeLayer(i))})}function It(e){e&&e.zoomIn()}function zt(e){e&&e.zoomOut()}function Nt(e,t,n){e&&e.setView(t,n)}function Ce(e,t){console.log("Analytics event:",e,t)}function Et(){const e=g.useCallback(n=>{Ce("marker_view",{markerId:n,timestamp:Date.now()})},[]),t=g.useCallback(n=>{Ce("map_interaction",{type:n,timestamp:Date.now()})},[]);return{trackMarkerView:e,trackMapInteraction:t}}function Ot({lat:e,lng:t}){return{id:Pt(),lat:e,lng:t,name:"",boothNumber:null,rectangle:[6,6],angle:0,iconUrl:"glyph-marker-icon-blue.svg",iconSize:[25,41],iconColor:"blue",className:"marker-icon",prefix:"",glyph:"",glyphColor:"white",glyphSize:"13px",glyphAnchor:[0,0],coreLocked:!1,appearanceLocked:!1,contentLocked:!1,adminLocked:!1}}function Pt(){return Math.floor(Date.now()%2e9+Math.floor(Math.random()*1e5))}const At={appearance:"none",WebkitAppearance:"none",MozAppearance:"none",outline:"none",background:"#fff",border:"2px solid #1976d2",borderRadius:4,width:18,height:18,display:"inline-block",position:"relative",marginRight:8,cursor:"pointer",verticalAlign:"middle"};function Me(e){return typeof e=="string"?e:e&&e.toString?e.toString():JSON.stringify(e)}const ce=[{key:"carto",name:"Carto Voyager",attribution:'&copy; <a href="https://carto.com/attributions">Carto</a>',url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/rastertiles/voyager_nolabels/{z}/{x}/{y}.png"},{key:"esri",name:"Esri World Imagery",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"}];function kt({isAdminView:e,markersState:t,updateMarker:n}){const a=E.useRef(null),{t:r}=st(),[s,f]=g.useState(!1),[u,c]=g.useState(ce[0].key),[i,x]=g.useState(!1),[d,p]=g.useState(null),[y,N]=g.useState(null),b=[51.89833010088164,5.772789716720581],j=17,{trackMarkerView:M}=Et(),I=E.useMemo(()=>Array.isArray(t)?t:[],[t]),h=[6,6],L=E.useRef(null);E.useEffect(()=>{I.forEach(o=>{if(o.logo){const m=new window.Image;m.src=V(o.logo)}})},[I]);function S(o){return e&&o&&o.coreLocked===!1}const[v,A]=g.useState(!1),[_,D]=g.useState(!1),[O,R]=g.useState(""),[F,$]=g.useState("");g.useEffect(()=>{if(!v||!d||!O)return;const o=m=>{const w=m.latlng,z={...Ot({lat:w.lat,lng:w.lng}),id:Number(O)};typeof n=="function"&&n(z.id,z,{add:!0}),A(!1),R(""),d.off("click",o)};return d.on("click",o),()=>{d.off("click",o)}},[v,d,n,O]);async function H(o){try{const{supabase:m}=await Ye(async()=>{const{supabase:z}=await import("./index-fOhCFQgH.js").then(P=>P.s);return{supabase:z}},__vite__mapDeps([0,1])),w=["Markers_Core","Markers_Appearance","Markers_Content","Markers_Admin"];for(const z of w){const{data:P,error:U}=await m.from(z).select("id").eq("id",Number(o));if(U)return!1;if(P&&P.length>0)return!0}return!1}catch{return!1}}const q=()=>{D(!0),R(""),$("")},ee=async()=>{if(!O||isNaN(Number(O))){$("Please enter a valid numeric ID.");return}if(await H(O)){$("ID already exists. Please choose another.");return}D(!1),A(!0),$("")},te=()=>{D(!1),R(""),$("")};g.useEffect(()=>{Mt({mapInstance:d,markers:I,rectangleSize:h,isAdminView:e,showRectanglesAndHandles:i,updateMarker:n,rectangleLayerRef:L})},[d,t,h,e,i]),g.useEffect(()=>{if(!d)return;let o=y;o||(o=C.layerGroup(),N(o)),o.clearLayers(),I.forEach(m=>{if(m.lat&&m.lng){const w=[m.name,m.boothNumber,m.label].filter(Boolean).join(" | "),z=C.marker([m.lat,m.lng],{opacity:0,interactive:!1});z.feature={type:"Feature",properties:{searchText:w}},z.bindPopup(m.name||m.label||""),o.addLayer(z)}})},[d,I,y]),g.useEffect(()=>{if(d&&y){const o=new C.Control.Search({layer:y,propertyName:"searchText",initial:!1,zoom:20,marker:{icon:!1,animate:!0},textPlaceholder:"Search for name or booth...",position:"topleft"});return d.addControl(o),a.current=o,o.on("search:locationfound",function(m){if(m&&m.layer&&m.layer.getLatLng){const w=m.layer.getLatLng();d.flyTo(w,20,{animate:!0}),o._input&&o._input.blur(),o.hideAlert&&o.hideAlert(),o.collapse&&o.collapse()}}),()=>{d.removeControl(o),a.current=null}}},[d,y]);const X=b,Y=j,ne=14,oe=22,Pe=o=>{o&&o.target?p(o.target):p(o)},Ae=()=>It(d),_e=()=>zt(d),ke=()=>Nt(d,X,Y);return l.jsxs("div",{style:{height:"100svh",height:"100dvh",height:"100vh",width:"100vw",position:"fixed",inset:0,zIndex:0,touchAction:"pan-x pan-y",overflow:"hidden"},tabIndex:0,"aria-label":"Event Map",role:"region",children:[l.jsxs("div",{style:{position:"absolute",top:10,right:10,zIndex:1e3,display:"flex",flexDirection:"column",gap:"10px"},children:[l.jsxs("button",{onClick:ke,"aria-label":"Home",className:"bg-white rounded-full shadow p-2 flex items-center justify-center",style:{width:44,height:44},children:[l.jsx(yt,{size:28,color:"#1976d2","aria-hidden":"true"}),l.jsx("span",{className:"sr-only",children:"Home"})]}),l.jsxs("button",{onClick:Ae,"aria-label":"Zoom in",className:"bg-white rounded-full shadow p-2 mb-2 flex items-center justify-center",style:{width:44,height:44},children:[l.jsx(mt,{size:28,color:"#1976d2","aria-hidden":"true"}),l.jsx("span",{className:"sr-only",children:"Zoom in"})]}),l.jsxs("button",{onClick:_e,"aria-label":"Zoom out",className:"bg-white rounded-full shadow p-2 mb-2 flex items-center justify-center",style:{width:44,height:44},children:[l.jsx(xt,{size:28,color:"#1976d2","aria-hidden":"true"}),l.jsx("span",{className:"sr-only",children:"Zoom out"})]}),e&&l.jsxs("div",{style:{position:"relative"},children:[l.jsxs("button",{"aria-label":"Map layers",className:"bg-white rounded-full shadow p-2 flex items-center justify-center mt-0 hover:bg-gray-100 focus:outline-none",style:{width:44,height:44},onClick:()=>f(o=>!o),children:[l.jsx(he,{path:Fe,size:1.2,color:"#1976d2"}),l.jsx("span",{className:"sr-only",children:"Map layers"})]}),s&&l.jsxs("div",{className:"absolute right-0 mt-2 bg-white rounded shadow-lg border z-50",style:{minWidth:200,padding:8,color:"#1976d2"},role:"menu","aria-label":"Layer selection",children:[l.jsx("div",{className:"font-semibold mb-2",children:"Base Layers"}),ce.map(o=>l.jsx("button",{className:`w-full text-left px-2 py-1 rounded hover:bg-blue-50 ${u===o.key?"bg-blue-50 font-bold":""}`,onClick:()=>c(o.key),role:"menuitem",style:{color:"#1976d2"},children:o.name},o.key)),l.jsx("div",{className:"font-semibold mt-4 mb-2",children:"Map Features"}),l.jsxs("label",{className:"flex items-center px-2 py-1 cursor-pointer hover:bg-blue-50 rounded",style:{color:"#1976d2"},children:[l.jsx("input",{type:"checkbox",checked:i,onChange:o=>x(o.target.checked),style:At}),l.jsx("span",{style:{position:"relative",left:-26,width:18,height:18,pointerEvents:"none",display:i?"inline-block":"none"},children:l.jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",style:{position:"absolute",top:0,left:0},children:l.jsx("polyline",{points:"4,9 8,13 14,5",stroke:"#1976d2",strokeWidth:"2.5",fill:"none"})})}),l.jsx("span",{style:{marginLeft:i?-8:0},children:"Booth Surface"})]})]})]})]}),e&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:q,"aria-label":"Add marker",className:"bg-white rounded-full shadow p-2 flex items-center justify-center",style:{position:"absolute",left:10,top:60,zIndex:1001,width:44,height:44,border:"none",cursor:v?"crosshair":"pointer",background:v?"#e3f2fd":"white"},title:v?"Click on map to place marker":"Add marker",children:[l.jsx(he,{path:qe,size:1.5,color:"#1976d2","aria-hidden":"true",style:{width:"42px",height:"42px"}}),l.jsx("span",{className:"sr-only",children:"Add marker"})]}),_&&l.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.3)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},children:l.jsxs("div",{style:{background:"white",borderRadius:8,boxShadow:"0 2px 16px rgba(25,118,210,0.15)",padding:32,minWidth:320,display:"flex",flexDirection:"column",alignItems:"center"},children:[l.jsx("h2",{style:{color:"#1976d2",fontWeight:700,marginBottom:16},children:"Enter Marker ID"}),l.jsx("input",{type:"number",value:O,onChange:o=>R(o.target.value),style:{fontSize:18,padding:"8px 12px",border:"2px solid #1976d2",borderRadius:4,marginBottom:12,width:"100%"},placeholder:"Marker ID (integer)",min:1}),F&&l.jsx("div",{style:{color:"red",marginBottom:8},children:F}),l.jsxs("div",{style:{display:"flex",gap:12},children:[l.jsx("button",{onClick:ee,style:{background:"#1976d2",color:"white",border:"none",borderRadius:4,padding:"8px 20px",fontWeight:600,cursor:"pointer"},children:"Confirm"}),l.jsx("button",{onClick:te,style:{background:"#eee",color:"#1976d2",border:"none",borderRadius:4,padding:"8px 20px",fontWeight:600,cursor:"pointer"},children:"Cancel"})]})]})})]}),l.jsx("div",{id:"map-container",className:"fixed inset-0 w-full h-full",style:{zIndex:1,height:"100svh",height:"100dvh",height:"100vh",touchAction:"pan-x pan-y",overflow:"hidden"},"aria-label":r("map.ariaLabel"),children:l.jsxs(wt,{center:X,zoom:Y,minZoom:ne,maxZoom:oe,zoomDelta:.5,zoomSnap:.5,zoomControl:!1,style:{width:"100vw",height:"100vh"},className:"focus:outline-none focus:ring-2 focus:ring-primary",whenReady:Pe,attributionControl:!1,children:[ce.filter(o=>o.key===u).map(o=>l.jsx(Lt,{attribution:o.attribution,url:o.url,maxZoom:22},o.key)),l.jsx(Xe,{chunkedLoading:!0,showCoverageOnHover:!0,spiderfyOnMaxZoom:!1,removeOutsideVisibleBounds:!0,disableClusteringAtZoom:18,maxClusterRadius:400,iconCreateFunction:lt,children:I.filter(o=>o.id<1001).map(o=>{let m=[o.lat,o.lng],w=o.iconUrl;w||(w=`${o.type||"default"}.svg`),w=ge(w);const z=ue({className:o.type?`marker-icon marker-type-${o.type}`:"marker-icon",prefix:o.prefix,iconUrl:w,iconSize:Array.isArray(o.iconSize)?o.iconSize:[15,25],glyph:o.glyph||"",glyphColor:o.glyphColor||"white",glyphSize:o.glyphSize||"9px",glyphAnchor:o.glyphAnchor||[0,-4]}),P=o.logo?V(o.logo):null,U=l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:1,padding:0,whiteSpace:"nowrap",minWidth:"max-content",borderRadius:2,boxShadow:"0 2px 8px rgba(25, 118, 210, 0.08)"},children:[P&&l.jsx("img",{src:P,alt:o.name||"Logo",style:{maxWidth:120,maxHeight:80,width:"auto",height:"auto",objectFit:"contain",borderRadius:"0px",marginBottom:0,padding:0}}),l.jsx("span",{style:{fontWeight:600,whiteSpace:"nowrap",color:"#1976d2"},children:o.name})]});Me(o.label);const W=S(o);return l.jsxs(Le,{position:m,icon:z,draggable:W,eventHandlers:W?{dragend:ae=>{const{lat:ie,lng:re}=ae.target.getLatLng();n(o.id,{lat:ie,lng:re})}}:{},children:[l.jsx(Se,{onOpen:()=>M(o.id),children:l.jsx("div",{dangerouslySetInnerHTML:{__html:be(o)}})}),l.jsx(je,{direction:"top",offset:[0,-32],opacity:1,permanent:!1,children:U})]},`${o.id}-${o.coreLocked}-${o.appearanceLocked}-${o.contentLocked}-${o.adminLocked}`)})}),I.filter(o=>o.id>=1001).map(o=>{let m=[o.lat,o.lng],w=o.iconUrl;w||(w=`${o.type||"glyph-marker-icon-blue"}.svg`),w=ge(w);const z=ue({className:o.type?`marker-icon marker-type-${o.type}`:"marker-icon",prefix:o.prefix,iconUrl:w,iconSize:Array.isArray(o.iconSize)?o.iconSize:[17,28],glyph:o.glyph||"?",glyphColor:o.glyphColor||"white",glyphSize:o.glyphSize||"12px",glyphAnchor:o.glyphAnchor||[0,-5]}),P=o.logo?V(o.logo):null,U=l.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:1,padding:0,whiteSpace:"nowrap",minWidth:"max-content",borderRadius:2,boxShadow:"0 2px 8px rgba(25, 118, 210, 0.08)"},children:[P&&l.jsx("img",{src:P,alt:o.name||"Logo",style:{maxWidth:120,maxHeight:80,width:"auto",height:"auto",objectFit:"contain",borderRadius:"0px",marginBottom:0,padding:0}}),l.jsx("span",{style:{fontWeight:600,whiteSpace:"nowrap",color:"#1976d2"},children:o.name})]});Me(o.label);const W=S(o),ae=W?{dragend:ie=>{const{lat:re,lng:Te}=ie.target.getLatLng();n(o.id,{lat:re,lng:Te})}}:{};return l.jsxs(Le,{position:m,icon:z,draggable:W,eventHandlers:ae,children:[l.jsx(Se,{onOpen:()=>M(o.id),children:l.jsx("div",{dangerouslySetInnerHTML:{__html:be(o)}})}),l.jsx(je,{direction:"top",offset:[0,-32],opacity:1,permanent:!1,children:U})]},`${o.id}-${o.coreLocked}-${o.appearanceLocked}-${o.contentLocked}-${o.adminLocked}`)})]})})]})}export{kt as default};
