const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CiPctLb7.js","assets/index-CVoPxlK6.css"])))=>i.map(i=>d[i]);
import{r as p,a as We,g as Ue,b as Ge,L as P,c as Q,R as O,l as Y,d as Ze,e as Be,f as Fe,h as ne,i as qe,j as Oe,k as Xe,w as Ye,m as s,I as me,n as Ve,o as Ke,M as Je,p as xe,_ as Qe}from"./index-CiPctLb7.js";const et=(e,t,n,i)=>{const a=[n,{code:t,...i||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(a,"warn","react-i18next::",!0);G(a[0])&&(a[0]=`react-i18next:: ${a[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...a):console?.warn&&console.warn(...a)},be={},ze=(e,t,n,i)=>{G(n)&&be[n]||(G(n)&&(be[n]=new Date),et(e,t,n,i))},Ee=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},he=(e,t,n)=>{e.loadNamespaces(t,Ee(e,n))},ve=(e,t,n,i)=>{if(G(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return he(e,n,i);n.forEach(a=>{e.options.ns.indexOf(a)<0&&e.options.ns.push(a)}),e.loadLanguages(t,Ee(e,i))},tt=(e,t,n={})=>!t.languages||!t.languages.length?(ze(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(i,a)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!a(i.isLanguageChangingTo,e))return!1}}),G=e=>typeof e=="string",nt=e=>typeof e=="object"&&e!==null,ot=p.createContext();class it{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var ue={exports:{}},fe={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var we;function at(){if(we)return fe;we=1;var e=We();function t(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var n=typeof Object.is=="function"?Object.is:t,i=e.useState,a=e.useEffect,l=e.useLayoutEffect,u=e.useDebugValue;function d(g,y){var m=y(),N=i({inst:{value:m,getSnapshot:y}}),f=N[0].inst,C=N[1];return l(function(){f.value=m,f.getSnapshot=y,c(f)&&C({inst:f})},[g,m,y]),a(function(){return c(f)&&C({inst:f}),g(function(){c(f)&&C({inst:f})})},[g]),u(m),m}function c(g){var y=g.getSnapshot;g=g.value;try{var m=y();return!n(g,m)}catch{return!0}}function r(g,y){return y()}var L=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?r:d;return fe.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:L,fe}var Le;function rt(){return Le||(Le=1,ue.exports=at()),ue.exports}var st=rt();const lt=(e,t)=>G(t)?t:nt(t)&&G(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,ct={t:lt,ready:!1},dt=()=>()=>{},ut=(e,t={})=>{const{i18n:n}=t,{i18n:i,defaultNS:a}=p.useContext(ot)||{},l=n||i||Ue();l&&!l.reportNamespaces&&(l.reportNamespaces=new it),l||ze(l,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const u=p.useMemo(()=>({...Ge(),...l?.options?.react,...t}),[l,t]),{useSuspense:d,keyPrefix:c}=u,r=p.useMemo(()=>{const h=a||l?.options?.defaultNS;return G(h)?[h]:h||["translation"]},[e,a,l]);l?.reportNamespaces?.addUsedNamespaces?.(r);const L=p.useCallback(h=>{if(!l)return dt;const{bindI18n:S,bindI18nStore:b}=u;return S&&l.on(S,h),b&&l.store.on(b,h),()=>{S&&S.split(" ").forEach(j=>l.off(j,h)),b&&b.split(" ").forEach(j=>l.store.off(j,h))}},[l,u]),g=p.useRef(),y=p.useCallback(()=>{if(!l)return ct;const h=!!(l.isInitialized||l.initializedStoreOnce)&&r.every($=>tt($,l,u)),S=l.getFixedT(t.lng||l.language,u.nsMode==="fallback"?r:r[0],c),b=g.current;if(b&&b.ready===h&&b.lng===(t.lng||l.language)&&b.keyPrefix===c)return b;const j={t:S,ready:h,lng:t.lng||l.language,keyPrefix:c};return g.current=j,j},[l,r,c,u,t.lng]),[m,N]=p.useState(0),{t:f,ready:C}=st.useSyncExternalStore(L,y,y);p.useEffect(()=>{if(l&&!C&&!d){const h=()=>N(S=>S+1);t.lng?ve(l,t.lng,r,h):he(l,r,h)}},[l,t.lng,r,C,d,m]);const M=l||{},E=p.useMemo(()=>{const h=[f,M,C];return h.t=f,h.i18n=M,h.ready=C,h},[f,M,C]);if(l&&d&&!C)throw new Promise(h=>{const S=()=>h();t.lng?ve(l,t.lng,r,S):he(l,r,S)});return E};function Se(e){const{logo:t,name:n,website:i,info:a}=e,l=t?Q(t):"";return`
    <div class="marker-popup">
      ${l?`<img src="${l}" alt="${n||"Logo"}" class="marker-popup-logo" style="max-width:64px;max-height:64px;margin-bottom:8px;" />`:""}
      ${n?`<div class="marker-popup-name" style="font-weight:bold;font-size:1.1em;margin-bottom:4px;">${n}</div>`:""}
      ${i?`<div class="marker-popup-website" style="margin-bottom:4px;"><a href="${i}" target="_blank" rel="noopener" style="color:#1976d2;text-decoration:underline;">${i}</a></div>`:""}
      ${a?`<div class="marker-popup-info" style="font-size:0.95em;color:#444;">${a}</div>`:""}
    </div>
  `}function pe({glyph:e,glyphColor:t="white",bgColor:n="white",glyphSize:i="8px",iconUrl:a="/Map/assets/icons/glyph-marker-icon-blue.svg",className:l,iconSize:u,prefix:d,glyphAnchor:c}){let r=i;typeof r=="number"?r=`${r}px`:typeof r=="string"&&!r.endsWith("px")?r=`${r}px`:r||(r="8px");const L=u||[25,41],g=Math.round(L[0]*(41/25)),y=Math.round(L[1]*(41/41)),m=Math.round(g*12/41),N=y;return P.icon.glyph({iconUrl:a||"/Map/assets/icons/glyph-marker-icon-blue.svg",iconSize:L,iconAnchor:[Math.round(L[0]/2),L[1]],popupAnchor:[1,-34],tooltipAnchor:[0,0],shadowUrl:"/Map/assets/icons/marker-shadow.png",shadowSize:[g,y],shadowAnchor:[m,N],prefix:d||"",glyph:e||"",glyphColor:t||"white",bgColor:n,glyphSize:r,glyphAnchor:c||[0,0],className:l||""})}function ft(e){return e.getChildCount(),pe({iconUrl:"/Map/assets/icons/glyph-marker-icon-orange.svg",iconSize:[50,82],glyph:`<div style='display:flex;align-items:center;justify-content:center;width:100%;height:100%;'>
  <img src='/Map/assets/logos/4x4Vakantiebeurs.png' alt='logo' style='width:40px;height:40px;object-fit:contain;display:block;margin:auto;position:relative;left:1px;top:10px;' />
      </div>`,glyphColor:"white",glyphSize:"40px",className:"custom-cluster-icon"})}var Ae={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ce=O.createContext&&O.createContext(Ae),ht=["attr","size","title"];function pt(e,t){if(e==null)return{};var n=gt(e,t),i,a;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)i=l[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function gt(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ee.apply(this,arguments)}function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Me(Object(n),!0).forEach(function(i){yt(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function yt(e,t,n){return t=mt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mt(e){var t=xt(e,"string");return typeof t=="symbol"?t:t+""}function xt(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _e(e){return e&&e.map((t,n)=>O.createElement(t.tag,te({key:n},t.attr),_e(t.child)))}function ge(e){return t=>O.createElement(bt,ee({attr:te({},e.attr)},t),_e(e.child))}function bt(e){var t=n=>{var{attr:i,size:a,title:l}=e,u=pt(e,ht),d=a||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),O.createElement("svg",ee({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,u,{className:c,style:te(te({color:e.color||n.color},n.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&O.createElement("title",null,l),e.children)};return Ce!==void 0?O.createElement(Ce.Consumer,null,n=>t(n)):t(Ae)}function vt(e){return ge({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"},child:[]}]})(e)}function wt(e){return ge({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(e)}function Lt(e){return ge({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13H5v-2h14v2z"},child:[]}]})(e)}function St(e,t,n){const{opacity:i,zIndex:a}=t;i!=null&&i!==n.opacity&&e.setOpacity(i),a!=null&&a!==n.zIndex&&e.setZIndex(a)}function Ct({bounds:e,boundsOptions:t,center:n,children:i,className:a,id:l,placeholder:u,style:d,whenReady:c,zoom:r,...L},g){const[y]=p.useState({className:a,id:l,style:d}),[m,N]=p.useState(null),f=p.useRef(void 0);p.useImperativeHandle(g,()=>m?.map??null,[m]);const C=p.useCallback(E=>{if(E!==null&&!f.current){const h=new Y.Map(E,L);f.current=h,n!=null&&r!=null?h.setView(n,r):e!=null&&h.fitBounds(e,t),c!=null&&h.whenReady(c),N(Ze(h))}},[]);p.useEffect(()=>()=>{m?.map.remove()},[m]);const M=m?O.createElement(Be,{value:m},i):u??null;return O.createElement("div",{...y,ref:C},M)}const Mt=p.forwardRef(Ct),je=Fe(function({position:t,...n},i){const a=new Y.Marker(t,n);return ne(a,qe(i,{overlayContainer:a}))},function(t,n,i){n.position!==i.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),Pe=Oe(function(t,n){const i=new Y.Popup(t,n.overlayContainer);return ne(i,n)},function(t,n,{position:i},a){p.useEffect(function(){const{instance:u}=t;function d(r){r.popup===u&&(u.update(),a(!0))}function c(r){r.popup===u&&a(!1)}return n.map.on({popupopen:d,popupclose:c}),n.overlayContainer==null?(i!=null&&u.setLatLng(i),u.openOn(n.map)):n.overlayContainer.bindPopup(u),function(){n.map.off({popupopen:d,popupclose:c}),n.overlayContainer?.unbindPopup(),n.map.removeLayer(u)}},[t,n,a,i])}),jt=Xe(function({url:t,...n},i){const a=new Y.TileLayer(t,Ye(n,i));return ne(a,i)},function(t,n,i){St(t,n,i);const{url:a}=n;a!=null&&a!==i.url&&t.setUrl(a)}),Ie=Oe(function(t,n){const i=new Y.Tooltip(t,n.overlayContainer);return ne(i,n)},function(t,n,{position:i},a){p.useEffect(function(){const u=n.overlayContainer;if(u==null)return;const{instance:d}=t,c=L=>{L.tooltip===d&&(i!=null&&d.setLatLng(i),d.update(),a(!0))},r=L=>{L.tooltip===d&&a(!1)};return u.on({tooltipopen:c,tooltipclose:r}),u.bindTooltip(d),function(){u.off({tooltipopen:c,tooltipclose:r}),u._map!=null&&u.unbindTooltip()}},[t,n,a,i])});function Pt(e){return e.angle||0}function R(e,t,n){const i=n*Math.PI/180,a=e*Math.cos(i)-t*Math.sin(i),l=e*Math.sin(i)+t*Math.cos(i);return[a,l]}function q(e){return e/111320}function X(e,t){return e/(40075e3*Math.cos(t*Math.PI/180)/360)}function It(e){return e*111320}function Nt(e,t){return e*(40075e3*Math.cos(t*Math.PI/180)/360)}function Ot({mapInstance:e,markers:t,rectangleSize:n,isAdminView:i,showRectanglesAndHandles:a,updateMarker:l,rectangleLayerRef:u}){if(!e)return;u.current||(u.current=P.layerGroup(),u.current.addTo(e));const d=u.current;d._markerLayers||(d._markerLayers={}),Object.keys(d._markerLayers).forEach(c=>{t.find(r=>r.id===c)||(d.removeLayer(d._markerLayers[c].rectangle),d.removeLayer(d._markerLayers[c].handle),delete d._markerLayers[c])}),t.forEach(c=>{if(c.lat&&c.lng){const r=P.latLng(c.lat,c.lng),L=Array.isArray(c.rectangle)&&c.rectangle.length===2?c.rectangle:n,g=Number(L[0])/2,y=Number(L[1])/2,m=Pt(c),N="#1976d2",f=[R(-g,-y,m),R(g,-y,m),R(g,y,m),R(-g,y,m)],C=f.map(([h,S])=>P.latLng(r.lat+q(S),r.lng+X(h,r.lat)));let M,E;if(d._markerLayers[c.id]){M=d._markerLayers[c.id].rectangle,M.setLatLngs(C),E=d._markerLayers[c.id].handle;const[h,S]=f[2],b=P.latLng(r.lat+q(S),r.lng+X(h,r.lat));E.setLatLng(b)}else{M=P.polygon(C,{color:N,weight:1});const[h,S]=f[2],b=P.latLng(r.lat+q(S),r.lng+X(h,r.lat));let j;if(i&&!c.coreLocked){const $=P.divIcon({className:"rotation-handle-icon",html:'<div style="width:8px;height:8px;background:#1976d2;border-radius:50%;"></div>',iconSize:[8,8],iconAnchor:[4,4]});j=P.marker(b,{icon:$,draggable:!0,interactive:!0,keyboard:!0,title:"Drag to rotate"}),j.on("dragstart",function(){e&&e.dragging.disable()});let A=m;j.on("drag",function(D){const Z=D.target.getLatLng(),oe=Nt(Z.lng-r.lng,r.lat),B=It(Z.lat-r.lat);let k=Math.atan2(B,oe)*180/Math.PI;k<0&&(k+=360),A=k;const F=[R(-g,-y,A),R(g,-y,A),R(g,y,A),R(-g,y,A)],H=F.map(([se,V])=>P.latLng(r.lat+q(V),r.lng+X(se,r.lat)));M.setLatLngs(H);const[ie,ae]=F[2],re=P.latLng(r.lat+q(ae),r.lng+X(ie,r.lat));j.setLatLng(re)}),j.on("dragend",function(){e&&e.dragging.enable(),l(c.id,{angle:A})})}else{const $=P.divIcon({className:"rotation-handle-icon",html:'<div style="width:8px;height:8px;background:#1976d2;border-radius:50%;opacity:0.5;"></div>',iconSize:[8,8],iconAnchor:[4,4]});j=P.marker(b,{icon:$,draggable:!1,interactive:!1,keyboard:!1,title:"Locked"})}d.addLayer(M),d.addLayer(j),d._markerLayers[c.id]={rectangle:M,handle:j}}}}),Object.values(d._markerLayers).forEach(({rectangle:c,handle:r})=>{a?(d.addLayer(c),d.addLayer(r)):(d.removeLayer(c),d.removeLayer(r))})}function zt(e){e&&e.zoomIn()}function Et(e){e&&e.zoomOut()}function At(e,t,n){e&&e.setView(t,n)}function Ne(e,t){console.log("Analytics event:",e,t)}function _t(){const e=p.useCallback(n=>{Ne("marker_view",{markerId:n,timestamp:Date.now()})},[]),t=p.useCallback(n=>{Ne("map_interaction",{type:n,timestamp:Date.now()})},[]);return{trackMarkerView:e,trackMapInteraction:t}}function Tt({lat:e,lng:t}){return{id:kt(),lat:e,lng:t,name:"",boothNumber:null,rectangle:[6,6],angle:0,iconUrl:"glyph-marker-icon-blue.svg",iconSize:[25,41],iconColor:"blue",className:"marker-icon",prefix:"",glyph:"",glyphColor:"white",glyphSize:"13px",glyphAnchor:[0,0],coreLocked:!1,appearanceLocked:!1,contentLocked:!1,adminLocked:!1}}function kt(){return Math.floor(Date.now()%2e9+Math.floor(Math.random()*1e5))}const K=typeof window<"u"&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent),Rt={appearance:"none",WebkitAppearance:"none",MozAppearance:"none",outline:"none",background:"#fff",border:"2px solid #1976d2",borderRadius:4,width:18,height:18,display:"inline-block",position:"relative",marginRight:8,cursor:"pointer",verticalAlign:"middle"},J=[{key:"carto",name:"Carto Voyager",attribution:'&copy; <a href="https://carto.com/attributions">Carto</a>',url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/rastertiles/voyager_nolabels/{z}/{x}/{y}.png"},{key:"esri",name:"Esri World Imagery",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"}];function Dt({isAdminView:e,markersState:t,updateMarker:n}){const[i,a]=p.useState(null),[l,u]=p.useState(null),d=O.useRef(null),{t:c}=ut(),[r,L]=p.useState(!1),[g,y]=p.useState(J[0].key),[m,N]=p.useState(!1),[f,C]=p.useState(null),[M,E]=p.useState(null),h=[51.898095078807025,5.772961378097534],S=17;_t();const b=O.useMemo(()=>Array.isArray(t)?t:[],[t]),j=[6,6],$=O.useRef(null);O.useEffect(()=>{b.forEach(o=>{if(o.logo){const x=new window.Image;x.src=Q(o.logo)}})},[b]);function A(o){return e&&o&&o.coreLocked===!1}const[D,Z]=p.useState(!1),[oe,B]=p.useState(!1),[T,k]=p.useState(""),[F,H]=p.useState("");p.useEffect(()=>{if(!D||!f||!T)return;const o=x=>{const v=x.latlng,I={...Tt({lat:v.lat,lng:v.lng}),id:Number(T)};typeof n=="function"&&n(I.id,I,{add:!0}),Z(!1),k(""),f.off("click",o)};return f.on("click",o),()=>{f.off("click",o)}},[D,f,n,T]);async function ie(o){try{const{supabase:x}=await Qe(async()=>{const{supabase:I}=await import("./index-CiPctLb7.js").then(z=>z.s);return{supabase:I}},__vite__mapDeps([0,1])),v=["Markers_Core","Markers_Appearance","Markers_Content","Markers_Admin"];for(const I of v){const{data:z,error:_}=await x.from(I).select("id").eq("id",Number(o));if(_)return!1;if(z&&z.length>0)return!0}return!1}catch{return!1}}const ae=()=>{B(!0),k(""),H("")},re=async()=>{if(!T||isNaN(Number(T))){H("Please enter a valid numeric ID.");return}if(await ie(T)){H("ID already exists. Please choose another.");return}B(!1),Z(!0),H("")},se=()=>{B(!1),k(""),H("")};p.useEffect(()=>{Ot({mapInstance:f,markers:b,rectangleSize:j,isAdminView:e,showRectanglesAndHandles:m,updateMarker:n,rectangleLayerRef:$})},[f,t,j,e,m]),p.useEffect(()=>{if(!f)return;let o=M;o||(o=P.layerGroup(),E(o)),o.clearLayers(),b.forEach(x=>{if(x.lat&&x.lng){const v=[x.name,x.boothNumber,x.label].filter(Boolean).join(" | "),I=P.marker([x.lat,x.lng],{opacity:0,interactive:!1});I.feature={type:"Feature",properties:{searchText:v}},I.bindPopup(x.name||x.label||""),o.addLayer(I)}})},[f,b,M]),p.useEffect(()=>{if(f&&M){const o=new P.Control.Search({layer:M,propertyName:"searchText",initial:!1,zoom:21,marker:{icon:!1,animate:!0},textPlaceholder:"Search for name or booth...",position:"topleft"});if(f.addControl(o),d.current=o,!f._minimapControl){const x=P.tileLayer(J[0].url,{attribution:"",minZoom:0,maxZoom:16}),v=new P.Control.MiniMap(x,{position:"bottomright",width:120,height:120,zoomLevelFixed:15,toggleDisplay:!0,centerFixed:h,aimingRectOptions:{color:"#1976d2",weight:2,opacity:.9,fillOpacity:.1,fill:!0},shadowRectOptions:{color:"#90caf9",weight:1,opacity:.5,fillOpacity:.05,fill:!0},strings:{hideText:"Hide MiniMap",showText:"Show MiniMap"}});v.addTo(f),f._minimapControl=v}return o.on("search:locationfound",function(x){if(x&&x.layer&&x.layer.getLatLng){const v=x.layer.getLatLng();f.flyTo(v,21,{animate:!0}),o._input&&o._input.blur(),o.hideAlert&&o.hideAlert(),o.collapse&&o.collapse()}}),()=>{f.removeControl(o),d.current=null}}},[f,M]);const V=h,ye=S,Te=14,ke=22,Re=o=>{o&&o.target?C(o.target):C(o)},$e=()=>zt(f),De=()=>Et(f),He=()=>At(f,V,ye);return s.jsxs("div",{style:{height:"100svh",height:"100dvh",height:"100vh",width:"100vw",position:"fixed",inset:0,zIndex:0,touchAction:"pan-x pan-y",overflow:"hidden"},tabIndex:0,"aria-label":"Event Map",role:"region",children:[s.jsxs("div",{style:{position:"absolute",top:10,right:10,zIndex:1e3,display:"flex",flexDirection:"column",gap:"10px"},children:[s.jsxs("button",{onClick:He,"aria-label":"Home",className:"bg-white rounded-full shadow p-2 flex items-center justify-center",style:{width:44,height:44},children:[s.jsx(vt,{size:28,color:"#1976d2","aria-hidden":"true"}),s.jsx("span",{className:"sr-only",children:"Home"})]}),s.jsxs("button",{onClick:$e,"aria-label":"Zoom in",className:"bg-white rounded-full shadow p-2 mb-2 flex items-center justify-center",style:{width:44,height:44},children:[s.jsx(wt,{size:28,color:"#1976d2","aria-hidden":"true"}),s.jsx("span",{className:"sr-only",children:"Zoom in"})]}),s.jsxs("button",{onClick:De,"aria-label":"Zoom out",className:"bg-white rounded-full shadow p-2 mb-2 flex items-center justify-center",style:{width:44,height:44},children:[s.jsx(Lt,{size:28,color:"#1976d2","aria-hidden":"true"}),s.jsx("span",{className:"sr-only",children:"Zoom out"})]}),e&&s.jsxs("div",{style:{position:"relative"},children:[s.jsxs("button",{"aria-label":"Map layers",className:"bg-white rounded-full shadow p-2 flex items-center justify-center mt-0 hover:bg-gray-100 focus:outline-none",style:{width:44,height:44},onClick:()=>L(o=>!o),children:[s.jsx(me,{path:Ve,size:1.2,color:"#1976d2"}),s.jsx("span",{className:"sr-only",children:"Map layers"})]}),r&&s.jsxs("div",{className:"absolute right-0 mt-2 bg-white rounded shadow-lg border z-50",style:{minWidth:200,padding:8,color:"#1976d2"},role:"menu","aria-label":"Layer selection",children:[s.jsx("div",{className:"font-semibold mb-2",children:"Base Layers"}),J.map(o=>s.jsx("button",{className:`w-full text-left px-2 py-1 rounded hover:bg-blue-50 ${g===o.key?"bg-blue-50 font-bold":""}`,onClick:()=>y(o.key),role:"menuitem",style:{color:"#1976d2"},children:o.name},o.key)),s.jsx("div",{className:"font-semibold mt-4 mb-2",children:"Map Features"}),s.jsxs("label",{className:"flex items-center px-2 py-1 cursor-pointer hover:bg-blue-50 rounded",style:{color:"#1976d2"},children:[s.jsx("input",{type:"checkbox",checked:m,onChange:o=>N(o.target.checked),style:Rt}),s.jsx("span",{style:{position:"relative",left:-26,width:18,height:18,pointerEvents:"none",display:m?"inline-block":"none"},children:s.jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",style:{position:"absolute",top:0,left:0},children:s.jsx("polyline",{points:"4,9 8,13 14,5",stroke:"#1976d2",strokeWidth:"2.5",fill:"none"})})}),s.jsx("span",{style:{marginLeft:m?-8:0},children:"Booth Surface"})]})]})]})]}),e&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:ae,"aria-label":"Add marker",className:"bg-white rounded-full shadow p-2 flex items-center justify-center",style:{position:"absolute",left:10,top:60,zIndex:1001,width:44,height:44,border:"none",cursor:D?"crosshair":"pointer",background:D?"#e3f2fd":"white"},title:D?"Click on map to place marker":"Add marker",children:[s.jsx(me,{path:Ke,size:1.5,color:"#1976d2","aria-hidden":"true",style:{width:"42px",height:"42px"}}),s.jsx("span",{className:"sr-only",children:"Add marker"})]}),oe&&s.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.3)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsxs("div",{style:{background:"white",borderRadius:8,boxShadow:"0 2px 16px rgba(25,118,210,0.15)",padding:32,minWidth:320,display:"flex",flexDirection:"column",alignItems:"center"},children:[s.jsx("h2",{style:{color:"#1976d2",fontWeight:700,marginBottom:16},children:"Enter Marker ID"}),s.jsx("input",{type:"number",value:T,onChange:o=>k(o.target.value),style:{fontSize:18,padding:"8px 12px",border:"2px solid #1976d2",borderRadius:4,marginBottom:12,width:"100%"},placeholder:"Marker ID (integer)",min:1}),F&&s.jsx("div",{style:{color:"red",marginBottom:8},children:F}),s.jsxs("div",{style:{display:"flex",gap:12},children:[s.jsx("button",{onClick:re,style:{background:"#1976d2",color:"white",border:"none",borderRadius:4,padding:"8px 20px",fontWeight:600,cursor:"pointer"},children:"Confirm"}),s.jsx("button",{onClick:se,style:{background:"#eee",color:"#1976d2",border:"none",borderRadius:4,padding:"8px 20px",fontWeight:600,cursor:"pointer"},children:"Cancel"})]})]})})]}),s.jsx("div",{id:"map-container",className:"fixed inset-0 w-full h-full",style:{zIndex:1,height:"100svh",height:"100dvh",height:"100vh",touchAction:"pan-x pan-y",overflow:"hidden"},"aria-label":c("map.ariaLabel"),children:s.jsxs(Mt,{center:V,zoom:ye,minZoom:Te,maxZoom:ke,zoomDelta:.5,zoomSnap:.5,zoomControl:!1,style:{width:"100vw",height:"100vh"},className:"focus:outline-none focus:ring-2 focus:ring-primary",whenReady:Re,attributionControl:!1,children:[J.filter(o=>o.key===g).map(o=>s.jsx(jt,{attribution:o.attribution,url:o.url,maxZoom:22},o.key)),s.jsx(Je,{chunkedLoading:!0,showCoverageOnHover:!0,spiderfyOnMaxZoom:!1,removeOutsideVisibleBounds:!0,disableClusteringAtZoom:18,maxClusterRadius:400,iconCreateFunction:ft,children:b.filter(o=>o.id<1001).map(o=>{let x=[o.lat,o.lng],v=o.iconUrl;v||(v=`${o.type||"default"}.svg`),v=xe(v);const I=pe({className:o.type?`marker-icon marker-type-${o.type}`:"marker-icon",prefix:o.prefix,iconUrl:v,iconSize:Array.isArray(o.iconSize)?o.iconSize:[15,25],glyph:o.glyph||"",glyphColor:o.glyphColor||"white",glyphSize:o.glyphSize||"9px",glyphAnchor:o.glyphAnchor||[0,-4]}),z=o.logo?Q(o.logo):null,_=A(o),le=i===o.id,ce=l===o.id,de=K?{click:()=>{a(o.id),u(null)},..._?{dragend:w=>{const{lat:W,lng:U}=w.target.getLatLng();n(o.id,{lat:W,lng:U})}}:{}}:{mouseover:()=>{a(o.id)},mouseout:()=>{a(null)},click:()=>{u(o.id),a(null)},..._?{dragend:w=>{const{lat:W,lng:U}=w.target.getLatLng();n(o.id,{lat:W,lng:U})}}:{}};return s.jsxs(je,{position:x,icon:I,draggable:_,eventHandlers:de,children:[le&&s.jsx(Ie,{direction:"top",offset:[0,-32],opacity:1,permanent:K,interactive:!0,children:s.jsxs("div",{className:"flex flex-col items-center",style:{minWidth:120,padding:8},onPointerDown:w=>w.stopPropagation(),onClick:w=>w.stopPropagation(),children:[z&&s.jsx("img",{src:z,alt:o.name||"Logo",style:{maxWidth:120,maxHeight:80,objectFit:"contain",borderRadius:0}}),s.jsx("span",{style:{fontWeight:600,color:"#1976d2"},children:o.name}),s.jsx("button",{className:"mt-2 px-2 py-1 text-xs bg-blue-500 text-white rounded",style:{minWidth:80},onPointerDown:w=>{w.stopPropagation()},onClick:w=>{w.stopPropagation(),a(null),u(o.id)},children:"More info"})]})}),ce&&s.jsx(Pe,{onClose:()=>u(null),autoPan:!0,children:s.jsx("div",{dangerouslySetInnerHTML:{__html:Se(o)}})})]},`${o.id}-${o.coreLocked}-${o.appearanceLocked}-${o.contentLocked}-${o.adminLocked}`)})}),b.filter(o=>o.id>=1001).map(o=>{let x=[o.lat,o.lng],v=o.iconUrl;v||(v=`${o.type||"glyph-marker-icon-blue"}.svg`),v=xe(v);const I=pe({className:o.type?`marker-icon marker-type-${o.type}`:"marker-icon",prefix:o.prefix,iconUrl:v,iconSize:Array.isArray(o.iconSize)?o.iconSize:[17,28],glyph:o.glyph||"?",glyphColor:o.glyphColor||"white",glyphSize:o.glyphSize||"12px",glyphAnchor:o.glyphAnchor||[0,-5]}),z=o.logo?Q(o.logo):null,_=A(o),le=i===o.id,ce=l===o.id,de=K?{click:()=>{a(o.id),u(null)},..._?{dragend:w=>{const{lat:W,lng:U}=w.target.getLatLng();n(o.id,{lat:W,lng:U})}}:{}}:{mouseover:()=>{a(o.id)},mouseout:()=>{a(null)},click:()=>{u(o.id),a(null)},..._?{dragend:w=>{const{lat:W,lng:U}=w.target.getLatLng();n(o.id,{lat:W,lng:U})}}:{}};return s.jsxs(je,{position:x,icon:I,draggable:_,eventHandlers:de,children:[le&&s.jsx(Ie,{direction:"top",offset:[0,-32],opacity:1,permanent:K,interactive:!0,children:s.jsxs("div",{className:"flex flex-col items-center",style:{minWidth:120,padding:8},onPointerDown:w=>w.stopPropagation(),onClick:w=>w.stopPropagation(),children:[z&&s.jsx("img",{src:z,alt:o.name||"Logo",style:{maxWidth:120,maxHeight:80,objectFit:"contain",borderRadius:0}}),s.jsx("span",{style:{fontWeight:600,color:"#1976d2"},children:o.name}),s.jsx("button",{className:"mt-2 px-2 py-1 text-xs bg-blue-500 text-white rounded",style:{minWidth:80},onPointerDown:w=>{w.stopPropagation()},onClick:w=>{w.stopPropagation(),a(null),u(o.id)},children:"More info"})]})}),ce&&s.jsx(Pe,{onClose:()=>u(null),autoPan:!0,children:s.jsx("div",{dangerouslySetInnerHTML:{__html:Se(o)}})})]},`${o.id}-${o.coreLocked}-${o.appearanceLocked}-${o.contentLocked}-${o.adminLocked}`)})]})})]})}export{Dt as default};
