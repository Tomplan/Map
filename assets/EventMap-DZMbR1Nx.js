const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Dix7EsnC.js","assets/index-BJ0U4iBb.css"])))=>i.map(i=>d[i]);
import{r as g,a as Te,g as ke,b as Re,L as j,R as E,l as Q,c as De,d as $e,e as He,f as fe,h as Ue,i as We,w as Ge,j as Ze,k as se,m as r,I as ge,n as Be,o as Fe,M as qe,p as pe,_ as Xe}from"./index-Dix7EsnC.js";const Ye=(e,t,n,a)=>{const s=[n,{code:t,...a||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(s,"warn","react-i18next::",!0);$(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...s):console?.warn&&console.warn(...s)},ye={},je=(e,t,n,a)=>{$(n)&&ye[n]||($(n)&&(ye[n]=new Date),Ye(e,t,n,a))},Ce=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},de=(e,t,n)=>{e.loadNamespaces(t,Ce(e,n))},me=(e,t,n,a)=>{if($(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return de(e,n,a);n.forEach(s=>{e.options.ns.indexOf(s)<0&&e.options.ns.push(s)}),e.loadLanguages(t,Ce(e,a))},Ve=(e,t,n={})=>!t.languages||!t.languages.length?(je(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(a,s)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&a.services.backendConnector.backend&&a.isLanguageChangingTo&&!s(a.isLanguageChangingTo,e))return!1}}),$=e=>typeof e=="string",Ke=e=>typeof e=="object"&&e!==null,Je=g.createContext();class Qe{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var le={exports:{}},ce={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xe;function et(){if(xe)return ce;xe=1;var e=Te();function t(h,u){return h===u&&(h!==0||1/h===1/u)||h!==h&&u!==u}var n=typeof Object.is=="function"?Object.is:t,a=e.useState,s=e.useEffect,l=e.useLayoutEffect,y=e.useDebugValue;function d(h,u){var x=u(),p=a({inst:{value:x,getSnapshot:u}}),w=p[0].inst,S=p[1];return l(function(){w.value=x,w.getSnapshot=u,c(w)&&S({inst:w})},[h,x,u]),s(function(){return c(w)&&S({inst:w}),h(function(){c(w)&&S({inst:w})})},[h]),y(x),x}function c(h){var u=h.getSnapshot;h=h.value;try{var x=u();return!n(h,x)}catch{return!0}}function i(h,u){return u()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?i:d;return ce.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:v,ce}var be;function tt(){return be||(be=1,le.exports=et()),le.exports}var nt=tt();const ot=(e,t)=>$(t)?t:Ke(t)&&$(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,at={t:ot,ready:!1},it=()=>()=>{},rt=(e,t={})=>{const{i18n:n}=t,{i18n:a,defaultNS:s}=g.useContext(Je)||{},l=n||a||ke();l&&!l.reportNamespaces&&(l.reportNamespaces=new Qe),l||je(l,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const y=g.useMemo(()=>({...Re(),...l?.options?.react,...t}),[l,t]),{useSuspense:d,keyPrefix:c}=y,i=g.useMemo(()=>{const f=s||l?.options?.defaultNS;return $(f)?[f]:f||["translation"]},[e,s,l]);l?.reportNamespaces?.addUsedNamespaces?.(i);const v=g.useCallback(f=>{if(!l)return it;const{bindI18n:b,bindI18nStore:M}=y;return b&&l.on(b,f),M&&l.store.on(M,f),()=>{b&&b.split(" ").forEach(C=>l.off(C,f)),M&&M.split(" ").forEach(C=>l.store.off(C,f))}},[l,y]),h=g.useRef(),u=g.useCallback(()=>{if(!l)return at;const f=!!(l.isInitialized||l.initializedStoreOnce)&&i.every(P=>Ve(P,l,y)),b=l.getFixedT(t.lng||l.language,y.nsMode==="fallback"?i:i[0],c),M=h.current;if(M&&M.ready===f&&M.lng===(t.lng||l.language)&&M.keyPrefix===c)return M;const C={t:b,ready:f,lng:t.lng||l.language,keyPrefix:c};return h.current=C,C},[l,i,c,y,t.lng]),[x,p]=g.useState(0),{t:w,ready:S}=nt.useSyncExternalStore(v,u,u);g.useEffect(()=>{if(l&&!S&&!d){const f=()=>p(b=>b+1);t.lng?me(l,t.lng,i,f):de(l,i,f)}},[l,t.lng,i,S,d,x]);const N=l||{},O=g.useMemo(()=>{const f=[w,N,S];return f.t=w,f.i18n=N,f.ready=S,f},[w,N,S]);if(l&&d&&!S)throw new Promise(f=>{const b=()=>f();t.lng?me(l,t.lng,i,b):de(l,i,b)});return O};function ue({glyph:e,glyphColor:t="white",bgColor:n="white",glyphSize:a="8px",iconUrl:s="/Map/assets/icons/glyph-marker-icon-blue.svg",className:l,iconSize:y,prefix:d,glyphAnchor:c}){let i=a;typeof i=="number"?i=`${i}px`:typeof i=="string"&&!i.endsWith("px")?i=`${i}px`:i||(i="8px");const v=y||[25,41],h=Math.round(v[0]*(41/25)),u=Math.round(v[1]*(41/41)),x=Math.round(h*12/41),p=u;return j.icon.glyph({iconUrl:s||"/Map/assets/icons/glyph-marker-icon-blue.svg",iconSize:v,iconAnchor:[Math.round(v[0]/2),v[1]],popupAnchor:[1,-34],tooltipAnchor:[0,0],shadowUrl:"/Map/assets/icons/marker-shadow.png",shadowSize:[h,u],shadowAnchor:[x,p],prefix:d||"",glyph:e||"",glyphColor:t||"white",bgColor:n,glyphSize:i,glyphAnchor:c||[0,0],className:l||""})}function st(e){return e.getChildCount(),ue({iconUrl:"/Map/assets/icons/glyph-marker-icon-orange.svg",iconSize:[50,82],glyph:`<div style='display:flex;align-items:center;justify-content:center;width:100%;height:100%;'>
  <img src='/Map/assets/logos/4x4Vakantiebeurs.png' alt='logo' style='width:40px;height:40px;object-fit:contain;display:block;margin:auto;position:relative;left:1px;top:10px;' />
      </div>`,glyphColor:"white",glyphSize:"40px",className:"custom-cluster-icon"})}var Ie={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ve=E.createContext&&E.createContext(Ie),lt=["attr","size","title"];function ct(e,t){if(e==null)return{};var n=dt(e,t),a,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(s=0;s<l.length;s++)a=l[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function dt(e,t){if(e==null)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},K.apply(this,arguments)}function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,a)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?we(Object(n),!0).forEach(function(a){ut(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function ut(e,t,n){return t=ft(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ft(e){var t=ht(e,"string");return typeof t=="symbol"?t:t+""}function ht(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ne(e){return e&&e.map((t,n)=>E.createElement(t.tag,J({key:n},t.attr),Ne(t.child)))}function he(e){return t=>E.createElement(gt,K({attr:J({},e.attr)},t),Ne(e.child))}function gt(e){var t=n=>{var{attr:a,size:s,title:l}=e,y=ct(e,lt),d=s||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),E.createElement("svg",K({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,a,y,{className:c,style:J(J({color:e.color||n.color},n.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&E.createElement("title",null,l),e.children)};return ve!==void 0?E.createElement(ve.Consumer,null,n=>t(n)):t(Ie)}function pt(e){return he({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"},child:[]}]})(e)}function yt(e){return he({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(e)}function mt(e){return he({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13H5v-2h14v2z"},child:[]}]})(e)}function xt(e,t,n){const{opacity:a,zIndex:s}=t;a!=null&&a!==n.opacity&&e.setOpacity(a),s!=null&&s!==n.zIndex&&e.setZIndex(s)}function bt({bounds:e,boundsOptions:t,center:n,children:a,className:s,id:l,placeholder:y,style:d,whenReady:c,zoom:i,...v},h){const[u]=g.useState({className:s,id:l,style:d}),[x,p]=g.useState(null),w=g.useRef(void 0);g.useImperativeHandle(h,()=>x?.map??null,[x]);const S=g.useCallback(O=>{if(O!==null&&!w.current){const f=new Q.Map(O,v);w.current=f,n!=null&&i!=null?f.setView(n,i):e!=null&&f.fitBounds(e,t),c!=null&&f.whenReady(c),p(De(f))}},[]);g.useEffect(()=>()=>{x?.map.remove()},[x]);const N=x?E.createElement($e,{value:x},a):y??null;return E.createElement("div",{...u,ref:S},N)}const vt=g.forwardRef(bt),Le=He(function({position:t,...n},a){const s=new Q.Marker(t,n);return fe(s,Ue(a,{overlayContainer:s}))},function(t,n,a){n.position!==a.position&&t.setLatLng(n.position),n.icon!=null&&n.icon!==a.icon&&t.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==a.zIndexOffset&&t.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==a.opacity&&t.setOpacity(n.opacity),t.dragging!=null&&n.draggable!==a.draggable&&(n.draggable===!0?t.dragging.enable():t.dragging.disable())}),wt=We(function({url:t,...n},a){const s=new Q.TileLayer(t,Ge(n,a));return fe(s,a)},function(t,n,a){xt(t,n,a);const{url:s}=n;s!=null&&s!==a.url&&t.setUrl(s)}),Se=Ze(function(t,n){const a=new Q.Tooltip(t,n.overlayContainer);return fe(a,n)},function(t,n,{position:a},s){g.useEffect(function(){const y=n.overlayContainer;if(y==null)return;const{instance:d}=t,c=v=>{v.tooltip===d&&(a!=null&&d.setLatLng(a),d.update(),s(!0))},i=v=>{v.tooltip===d&&s(!1)};return y.on({tooltipopen:c,tooltipclose:i}),y.bindTooltip(d),function(){y.off({tooltipopen:c,tooltipclose:i}),y._map!=null&&y.unbindTooltip()}},[t,n,s,a])});function Lt(e){return e.angle||0}function R(e,t,n){const a=n*Math.PI/180,s=e*Math.cos(a)-t*Math.sin(a),l=e*Math.sin(a)+t*Math.cos(a);return[s,l]}function Z(e){return e/111320}function B(e,t){return e/(40075e3*Math.cos(t*Math.PI/180)/360)}function St(e){return e*111320}function Mt(e,t){return e*(40075e3*Math.cos(t*Math.PI/180)/360)}function jt({mapInstance:e,markers:t,rectangleSize:n,isAdminView:a,showRectanglesAndHandles:s,updateMarker:l,rectangleLayerRef:y}){if(!e)return;y.current||(y.current=j.layerGroup(),y.current.addTo(e));const d=y.current;d._markerLayers||(d._markerLayers={}),Object.keys(d._markerLayers).forEach(c=>{t.find(i=>i.id===c)||(d.removeLayer(d._markerLayers[c].rectangle),d.removeLayer(d._markerLayers[c].handle),delete d._markerLayers[c])}),t.forEach(c=>{if(c.lat&&c.lng){const i=j.latLng(c.lat,c.lng),v=Array.isArray(c.rectangle)&&c.rectangle.length===2?c.rectangle:n,h=Number(v[0])/2,u=Number(v[1])/2,x=Lt(c),p="#1976d2",w=[R(-h,-u,x),R(h,-u,x),R(h,u,x),R(-h,u,x)],S=w.map(([f,b])=>j.latLng(i.lat+Z(b),i.lng+B(f,i.lat)));let N,O;if(d._markerLayers[c.id]){N=d._markerLayers[c.id].rectangle,N.setLatLngs(S),O=d._markerLayers[c.id].handle;const[f,b]=w[2],M=j.latLng(i.lat+Z(b),i.lng+B(f,i.lat));O.setLatLng(M)}else{N=j.polygon(S,{color:p,weight:1});const[f,b]=w[2],M=j.latLng(i.lat+Z(b),i.lng+B(f,i.lat));let C;if(a&&!c.coreLocked){const P=j.divIcon({className:"rotation-handle-icon",html:'<div style="width:8px;height:8px;background:#1976d2;border-radius:50%;"></div>',iconSize:[8,8],iconAnchor:[4,4]});C=j.marker(M,{icon:P,draggable:!0,interactive:!0,keyboard:!0,title:"Drag to rotate"}),C.on("dragstart",function(){e&&e.dragging.disable()});let z=x;C.on("drag",function(F){const q=F.target.getLatLng(),U=Mt(q.lng-i.lng,i.lat),A=St(q.lat-i.lat);let H=Math.atan2(A,U)*180/Math.PI;H<0&&(H+=360),z=H;const T=[R(-h,-u,z),R(h,-u,z),R(h,u,z),R(-h,u,z)],ee=T.map(([X,Y])=>j.latLng(i.lat+Z(Y),i.lng+B(X,i.lat)));N.setLatLngs(ee);const[te,ne]=T[2],oe=j.latLng(i.lat+Z(ne),i.lng+B(te,i.lat));C.setLatLng(oe)}),C.on("dragend",function(){e&&e.dragging.enable(),l(c.id,{angle:z})})}else{const P=j.divIcon({className:"rotation-handle-icon",html:'<div style="width:8px;height:8px;background:#1976d2;border-radius:50%;opacity:0.5;"></div>',iconSize:[8,8],iconAnchor:[4,4]});C=j.marker(M,{icon:P,draggable:!1,interactive:!1,keyboard:!1,title:"Locked"})}d.addLayer(N),d.addLayer(C),d._markerLayers[c.id]={rectangle:N,handle:C}}}}),Object.values(d._markerLayers).forEach(({rectangle:c,handle:i})=>{s?(d.addLayer(c),d.addLayer(i)):(d.removeLayer(c),d.removeLayer(i))})}function Ct(e){e&&e.zoomIn()}function It(e){e&&e.zoomOut()}function Nt(e,t,n){e&&e.setView(t,n)}function Me(e,t){console.log("Analytics event:",e,t)}function Et(){const e=g.useCallback(n=>{Me("marker_view",{markerId:n,timestamp:Date.now()})},[]),t=g.useCallback(n=>{Me("map_interaction",{type:n,timestamp:Date.now()})},[]);return{trackMarkerView:e,trackMapInteraction:t}}function zt({lat:e,lng:t}){return{id:Ot(),lat:e,lng:t,name:"",boothNumber:null,rectangle:[6,6],angle:0,iconUrl:"glyph-marker-icon-blue.svg",iconSize:[25,41],iconColor:"blue",className:"marker-icon",prefix:"",glyph:"",glyphColor:"white",glyphSize:"13px",glyphAnchor:[0,0],coreLocked:!1,appearanceLocked:!1,contentLocked:!1,adminLocked:!1}}function Ot(){return Math.floor(Date.now()%2e9+Math.floor(Math.random()*1e5))}const At={appearance:"none",WebkitAppearance:"none",MozAppearance:"none",outline:"none",background:"#fff",border:"2px solid #1976d2",borderRadius:4,width:18,height:18,display:"inline-block",position:"relative",marginRight:8,cursor:"pointer",verticalAlign:"middle"},V=[{key:"carto",name:"Carto Voyager",attribution:'&copy; <a href="https://carto.com/attributions">Carto</a>',url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/rastertiles/voyager_nolabels/{z}/{x}/{y}.png"},{key:"esri",name:"Esri World Imagery",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"}];function Pt({isAdminView:e,markersState:t,updateMarker:n}){const[a,s]=g.useState({}),l=typeof window<"u"&&/Mobi|Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i.test(window.navigator.userAgent),y=E.useRef(null),{t:d}=rt(),[c,i]=g.useState(!1),[v,h]=g.useState(V[0].key),[u,x]=g.useState(!1),[p,w]=g.useState(null),[S,N]=g.useState(null),O=[51.898095078807025,5.772961378097534],f=17;Et();const b=E.useMemo(()=>Array.isArray(t)?t:[],[t]),M=[6,6],C=E.useRef(null);E.useEffect(()=>{b.forEach(o=>{if(o.logo){const m=new window.Image;m.src=se(o.logo)}})},[b]);function P(o){return e&&o&&o.coreLocked===!1}const[z,F]=g.useState(!1),[q,U]=g.useState(!1),[A,W]=g.useState(""),[H,T]=g.useState("");g.useEffect(()=>{if(!z||!p||!A)return;const o=m=>{const I=m.latlng,L={...zt({lat:I.lat,lng:I.lng}),id:Number(A)};typeof n=="function"&&n(L.id,L,{add:!0}),F(!1),W(""),p.off("click",o)};return p.on("click",o),()=>{p.off("click",o)}},[z,p,n,A]);async function ee(o){try{const{supabase:m}=await Xe(async()=>{const{supabase:L}=await import("./index-Dix7EsnC.js").then(k=>k.s);return{supabase:L}},__vite__mapDeps([0,1])),I=["Markers_Core","Markers_Appearance","Markers_Content","Markers_Admin"];for(const L of I){const{data:k,error:D}=await m.from(L).select("id").eq("id",Number(o));if(D)return!1;if(k&&k.length>0)return!0}return!1}catch{return!1}}const te=()=>{U(!0),W(""),T("")},ne=async()=>{if(!A||isNaN(Number(A))){T("Please enter a valid numeric ID.");return}if(await ee(A)){T("ID already exists. Please choose another.");return}U(!1),F(!0),T("")},oe=()=>{U(!1),W(""),T("")};g.useEffect(()=>{jt({mapInstance:p,markers:b,rectangleSize:M,isAdminView:e,showRectanglesAndHandles:u,updateMarker:n,rectangleLayerRef:C})},[p,t,M,e,u]),g.useEffect(()=>{if(!p)return;let o=S;o||(o=j.layerGroup(),N(o)),o.clearLayers(),b.forEach(m=>{if(m.lat&&m.lng){const I=[m.name,m.boothNumber,m.label].filter(Boolean).join(" | "),L=j.marker([m.lat,m.lng],{opacity:0,interactive:!1});L.feature={type:"Feature",properties:{searchText:I}},L.bindPopup(m.name||m.label||""),o.addLayer(L)}})},[p,b,S]),g.useEffect(()=>{if(p&&S){const o=new j.Control.Search({layer:S,propertyName:"searchText",initial:!1,zoom:21,marker:{icon:!1,animate:!0},textPlaceholder:"Search for name or booth...",position:"topleft"});if(p.addControl(o),y.current=o,!p._minimapControl){const m=j.tileLayer(V[0].url,{attribution:"",minZoom:0,maxZoom:16}),I=new j.Control.MiniMap(m,{position:"bottomright",width:120,height:120,zoomLevelFixed:15,toggleDisplay:!0,centerFixed:O,aimingRectOptions:{color:"#1976d2",weight:2,opacity:.9,fillOpacity:.1,fill:!0},shadowRectOptions:{color:"#90caf9",weight:1,opacity:.5,fillOpacity:.05,fill:!0},strings:{hideText:"Hide MiniMap",showText:"Show MiniMap"}});I.addTo(p),p._minimapControl=I}return o.on("search:locationfound",function(m){if(m&&m.layer&&m.layer.getLatLng){const I=m.layer.getLatLng();p.flyTo(I,21,{animate:!0}),o._input&&o._input.blur(),o.hideAlert&&o.hideAlert(),o.collapse&&o.collapse()}}),()=>{p.removeControl(o),y.current=null}}},[p,S]);const X=O,Y=f,Ee=14,ze=22,Oe=o=>{o&&o.target?w(o.target):w(o)},Ae=()=>Ct(p),_e=()=>It(p),Pe=()=>Nt(p,X,Y);return r.jsxs("div",{style:{height:"100svh",height:"100dvh",height:"100vh",width:"100vw",position:"fixed",inset:0,zIndex:0,touchAction:"pan-x pan-y",overflow:"hidden"},tabIndex:0,"aria-label":"Event Map",role:"region",children:[r.jsxs("div",{style:{position:"absolute",top:10,right:10,zIndex:1e3,display:"flex",flexDirection:"column",gap:"10px"},children:[r.jsxs("button",{onClick:Pe,"aria-label":"Home",className:"bg-white rounded-full shadow p-2 flex items-center justify-center",style:{width:44,height:44},children:[r.jsx(pt,{size:28,color:"#1976d2","aria-hidden":"true"}),r.jsx("span",{className:"sr-only",children:"Home"})]}),r.jsxs("button",{onClick:Ae,"aria-label":"Zoom in",className:"bg-white rounded-full shadow p-2 mb-2 flex items-center justify-center",style:{width:44,height:44},children:[r.jsx(yt,{size:28,color:"#1976d2","aria-hidden":"true"}),r.jsx("span",{className:"sr-only",children:"Zoom in"})]}),r.jsxs("button",{onClick:_e,"aria-label":"Zoom out",className:"bg-white rounded-full shadow p-2 mb-2 flex items-center justify-center",style:{width:44,height:44},children:[r.jsx(mt,{size:28,color:"#1976d2","aria-hidden":"true"}),r.jsx("span",{className:"sr-only",children:"Zoom out"})]}),e&&r.jsxs("div",{style:{position:"relative"},children:[r.jsxs("button",{"aria-label":"Map layers",className:"bg-white rounded-full shadow p-2 flex items-center justify-center mt-0 hover:bg-gray-100 focus:outline-none",style:{width:44,height:44},onClick:()=>i(o=>!o),children:[r.jsx(ge,{path:Be,size:1.2,color:"#1976d2"}),r.jsx("span",{className:"sr-only",children:"Map layers"})]}),c&&r.jsxs("div",{className:"absolute right-0 mt-2 bg-white rounded shadow-lg border z-50",style:{minWidth:200,padding:8,color:"#1976d2"},role:"menu","aria-label":"Layer selection",children:[r.jsx("div",{className:"font-semibold mb-2",children:"Base Layers"}),V.map(o=>r.jsx("button",{className:`w-full text-left px-2 py-1 rounded hover:bg-blue-50 ${v===o.key?"bg-blue-50 font-bold":""}`,onClick:()=>h(o.key),role:"menuitem",style:{color:"#1976d2"},children:o.name},o.key)),r.jsx("div",{className:"font-semibold mt-4 mb-2",children:"Map Features"}),r.jsxs("label",{className:"flex items-center px-2 py-1 cursor-pointer hover:bg-blue-50 rounded",style:{color:"#1976d2"},children:[r.jsx("input",{type:"checkbox",checked:u,onChange:o=>x(o.target.checked),style:At}),r.jsx("span",{style:{position:"relative",left:-26,width:18,height:18,pointerEvents:"none",display:u?"inline-block":"none"},children:r.jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",style:{position:"absolute",top:0,left:0},children:r.jsx("polyline",{points:"4,9 8,13 14,5",stroke:"#1976d2",strokeWidth:"2.5",fill:"none"})})}),r.jsx("span",{style:{marginLeft:u?-8:0},children:"Booth Surface"})]})]})]})]}),e&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:te,"aria-label":"Add marker",className:"bg-white rounded-full shadow p-2 flex items-center justify-center",style:{position:"absolute",left:10,top:60,zIndex:1001,width:44,height:44,border:"none",cursor:z?"crosshair":"pointer",background:z?"#e3f2fd":"white"},title:z?"Click on map to place marker":"Add marker",children:[r.jsx(ge,{path:Fe,size:1.5,color:"#1976d2","aria-hidden":"true",style:{width:"42px",height:"42px"}}),r.jsx("span",{className:"sr-only",children:"Add marker"})]}),q&&r.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.3)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsxs("div",{style:{background:"white",borderRadius:8,boxShadow:"0 2px 16px rgba(25,118,210,0.15)",padding:32,minWidth:320,display:"flex",flexDirection:"column",alignItems:"center"},children:[r.jsx("h2",{style:{color:"#1976d2",fontWeight:700,marginBottom:16},children:"Enter Marker ID"}),r.jsx("input",{type:"number",value:A,onChange:o=>W(o.target.value),style:{fontSize:18,padding:"8px 12px",border:"2px solid #1976d2",borderRadius:4,marginBottom:12,width:"100%"},placeholder:"Marker ID (integer)",min:1}),H&&r.jsx("div",{style:{color:"red",marginBottom:8},children:H}),r.jsxs("div",{style:{display:"flex",gap:12},children:[r.jsx("button",{onClick:ne,style:{background:"#1976d2",color:"white",border:"none",borderRadius:4,padding:"8px 20px",fontWeight:600,cursor:"pointer"},children:"Confirm"}),r.jsx("button",{onClick:oe,style:{background:"#eee",color:"#1976d2",border:"none",borderRadius:4,padding:"8px 20px",fontWeight:600,cursor:"pointer"},children:"Cancel"})]})]})})]}),r.jsx("div",{id:"map-container",className:"fixed inset-0 w-full h-full",style:{zIndex:1,height:"100svh",height:"100dvh",height:"100vh",touchAction:"pan-x pan-y",overflow:"hidden"},"aria-label":d("map.ariaLabel"),children:r.jsxs(vt,{center:X,zoom:Y,minZoom:Ee,maxZoom:ze,zoomDelta:.5,zoomSnap:.5,zoomControl:!1,style:{width:"100vw",height:"100vh"},className:"focus:outline-none focus:ring-2 focus:ring-primary",whenReady:Oe,attributionControl:!1,children:[V.filter(o=>o.key===v).map(o=>r.jsx(wt,{attribution:o.attribution,url:o.url,maxZoom:22},o.key)),r.jsx(qe,{chunkedLoading:!0,showCoverageOnHover:!0,spiderfyOnMaxZoom:!1,removeOutsideVisibleBounds:!0,disableClusteringAtZoom:18,maxClusterRadius:400,iconCreateFunction:st,children:b.filter(o=>o.id<1001).map(o=>{const m=a[o.id];let I=[o.lat,o.lng],L=o.iconUrl;L||(L=`${o.type||"default"}.svg`),L=pe(L);const k=ue({className:o.type?`marker-icon marker-type-${o.type}`:"marker-icon",prefix:o.prefix,iconUrl:L,iconSize:Array.isArray(o.iconSize)?o.iconSize:[15,25],glyph:o.glyph||"",glyphColor:o.glyphColor||"white",glyphSize:o.glyphSize||"9px",glyphAnchor:o.glyphAnchor||[0,-4]}),D=o.logo?se(o.logo):null,G=P(o),ae={...G?{dragend:_=>{const{lat:ie,lng:re}=_.target.getLatLng();n(o.id,{lat:ie,lng:re})}}:{}};return r.jsx(Le,{position:I,icon:k,draggable:G,eventHandlers:ae,children:r.jsx(Se,{direction:"top",offset:[0,-32],opacity:1,permanent:!1,interactive:!0,children:r.jsxs("div",{className:"flex flex-col items-center",children:[D&&r.jsx("img",{src:D,alt:o.name||"Logo",style:{maxWidth:120,maxHeight:80,objectFit:"contain",borderRadius:0}}),r.jsx("span",{style:{fontWeight:600,color:"#1976d2"},children:o.name}),l&&r.jsx("button",{className:`mt-2 px-2 py-1 text-xs rounded ${m?"bg-green-500 text-white":"bg-blue-500 text-white"}`,onClick:()=>{s(_=>({..._,[o.id]:!_[o.id]}))},children:"More info"})]})})},`${o.id}-${o.coreLocked}-${o.appearanceLocked}-${o.contentLocked}-${o.adminLocked}`)})}),b.filter(o=>o.id>=1001).map(o=>{const m=a[o.id];let I=[o.lat,o.lng],L=o.iconUrl;L||(L=`${o.type||"glyph-marker-icon-blue"}.svg`),L=pe(L);const k=ue({className:o.type?`marker-icon marker-type-${o.type}`:"marker-icon",prefix:o.prefix,iconUrl:L,iconSize:Array.isArray(o.iconSize)?o.iconSize:[17,28],glyph:o.glyph||"?",glyphColor:o.glyphColor||"white",glyphSize:o.glyphSize||"12px",glyphAnchor:o.glyphAnchor||[0,-5]}),D=o.logo?se(o.logo):null,G=P(o),ae={...G?{dragend:_=>{const{lat:ie,lng:re}=_.target.getLatLng();n(o.id,{lat:ie,lng:re})}}:{}};return r.jsx(Le,{position:I,icon:k,draggable:G,eventHandlers:ae,children:r.jsx(Se,{direction:"top",offset:[0,-32],opacity:1,permanent:!1,interactive:!0,children:r.jsxs("div",{className:"flex flex-col items-center",children:[D&&r.jsx("img",{src:D,alt:o.name||"Logo",style:{maxWidth:120,maxHeight:80,objectFit:"contain",borderRadius:0}}),r.jsx("span",{style:{fontWeight:600,color:"#1976d2"},children:o.name}),l&&r.jsx("button",{className:`mt-2 px-2 py-1 text-xs rounded ${m?"bg-green-500 text-white":"bg-blue-500 text-white"}`,onClick:()=>{s(_=>({..._,[o.id]:!_[o.id]}))},children:"More info"})]})})},`${o.id}-${o.coreLocked}-${o.appearanceLocked}-${o.contentLocked}-${o.adminLocked}`)})]})})]})}export{Pt as default};
