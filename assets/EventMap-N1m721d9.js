const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-D88oEjwk.js","assets/index-BJ0U4iBb.css"])))=>i.map(i=>d[i]);
import{r as p,a as pe,g as ye,b as me,l as Y,c as be,R as N,L as xe,d as ve,w as we,e as re,f as Le,j as c,h as Se,i as ie,k as se,M as je,I as Me,m as Ce,_ as Ee,n as C,u as Ne,o as Ie,p as ke,E as ze}from"./index-D88oEjwk.js";const Oe=(e,t,n,o)=>{const r=[n,{code:t,...o||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(r,"warn","react-i18next::",!0);_(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...r):console?.warn&&console.warn(...r)},J={},le=(e,t,n,o)=>{_(n)&&J[n]||(_(n)&&(J[n]=new Date),Oe(e,t,n,o))},ce=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},X=(e,t,n)=>{e.loadNamespaces(t,ce(e,n))},Q=(e,t,n,o)=>{if(_(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return X(e,n,o);n.forEach(r=>{e.options.ns.indexOf(r)<0&&e.options.ns.push(r)}),e.loadLanguages(t,ce(e,o))},_e=(e,t,n={})=>!t.languages||!t.languages.length?(le(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(o,r)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&o.services.backendConnector.backend&&o.isLanguageChangingTo&&!r(o.isLanguageChangingTo,e))return!1}}),_=e=>typeof e=="string",Pe=e=>typeof e=="object"&&e!==null,Te=p.createContext();class Ae{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var $={exports:{}},q={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ee;function Re(){if(ee)return q;ee=1;var e=pe();function t(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var n=typeof Object.is=="function"?Object.is:t,o=e.useState,r=e.useEffect,i=e.useLayoutEffect,a=e.useDebugValue;function d(h,g){var x=g(),y=o({inst:{value:x,getSnapshot:g}}),v=y[0].inst,m=y[1];return i(function(){v.value=x,v.getSnapshot=g,s(v)&&m({inst:v})},[h,x,g]),r(function(){return s(v)&&m({inst:v}),h(function(){s(v)&&m({inst:v})})},[h]),a(x),x}function s(h){var g=h.getSnapshot;h=h.value;try{var x=g();return!n(h,x)}catch{return!0}}function l(h,g){return g()}var w=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?l:d;return q.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:w,q}var te;function De(){return te||(te=1,$.exports=Re()),$.exports}var He=De();const Ge=(e,t)=>_(t)?t:Pe(t)&&_(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,Ue={t:Ge,ready:!1},We=()=>()=>{},de=(e,t={})=>{const{i18n:n}=t,{i18n:o,defaultNS:r}=p.useContext(Te)||{},i=n||o||ye();i&&!i.reportNamespaces&&(i.reportNamespaces=new Ae),i||le(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const a=p.useMemo(()=>({...me(),...i?.options?.react,...t}),[i,t]),{useSuspense:d,keyPrefix:s}=a,l=p.useMemo(()=>{const f=r||i?.options?.defaultNS;return _(f)?[f]:f||["translation"]},[e,r,i]);i?.reportNamespaces?.addUsedNamespaces?.(l);const w=p.useCallback(f=>{if(!i)return We;const{bindI18n:b,bindI18nStore:L}=a;return b&&i.on(b,f),L&&i.store.on(L,f),()=>{b&&b.split(" ").forEach(M=>i.off(M,f)),L&&L.split(" ").forEach(M=>i.store.off(M,f))}},[i,a]),h=p.useRef(),g=p.useCallback(()=>{if(!i)return Ue;const f=!!(i.isInitialized||i.initializedStoreOnce)&&l.every(k=>_e(k,i,a)),b=i.getFixedT(t.lng||i.language,a.nsMode==="fallback"?l:l[0],s),L=h.current;if(L&&L.ready===f&&L.lng===(t.lng||i.language)&&L.keyPrefix===s)return L;const M={t:b,ready:f,lng:t.lng||i.language,keyPrefix:s};return h.current=M,M},[i,l,s,a,t.lng]),[x,y]=p.useState(0),{t:v,ready:m}=He.useSyncExternalStore(w,g,g);p.useEffect(()=>{if(i&&!m&&!d){const f=()=>y(b=>b+1);t.lng?Q(i,t.lng,l,f):X(i,l,f)}},[i,t.lng,l,m,d,x]);const j=i||{},E=p.useMemo(()=>{const f=[v,j,m];return f.t=v,f.i18n=j,f.ready=m,f},[v,j,m]);if(i&&d&&!m)throw new Promise(f=>{const b=()=>f();t.lng?Q(i,t.lng,l,b):X(i,l,b)});return E};function Be(e,t,n){const{opacity:o,zIndex:r}=t;o!=null&&o!==n.opacity&&e.setOpacity(o),r!=null&&r!==n.zIndex&&e.setZIndex(r)}function Fe({bounds:e,boundsOptions:t,center:n,children:o,className:r,id:i,placeholder:a,style:d,whenReady:s,zoom:l,...w},h){const[g]=p.useState({className:r,id:i,style:d}),[x,y]=p.useState(null),v=p.useRef(void 0);p.useImperativeHandle(h,()=>x?.map??null,[x]);const m=p.useCallback(E=>{if(E!==null&&!v.current){const f=new Y.Map(E,w);v.current=f,n!=null&&l!=null?f.setView(n,l):e!=null&&f.fitBounds(e,t),s!=null&&f.whenReady(s),y(be(f))}},[]);p.useEffect(()=>()=>{x?.map.remove()},[x]);const j=x?N.createElement(xe,{value:x},o):a??null;return N.createElement("div",{...g,ref:m},j)}const Ze=p.forwardRef(Fe),$e=ve(function({url:t,...n},o){const r=new Y.TileLayer(t,we(n,o));return re(r,o)},function(t,n,o){Be(t,n,o);const{url:r}=n;r!=null&&r!==o.url&&t.setUrl(r)}),qe=Le(function(t,n){const o=new Y.Tooltip(t,n.overlayContainer);return re(o,n)},function(t,n,{position:o},r){p.useEffect(function(){const a=n.overlayContainer;if(a==null)return;const{instance:d}=t,s=w=>{w.tooltip===d&&(o!=null&&d.setLatLng(o),d.update(),r(!0))},l=w=>{w.tooltip===d&&r(!1)};return a.on({tooltipopen:s,tooltipclose:l}),a.bindTooltip(d),function(){a.off({tooltipopen:s,tooltipclose:l}),a._map!=null&&a.unbindTooltip()}},[t,n,r,o])});function Xe({safeMarkers:e,infoButtonToggled:t,setInfoButtonToggled:n,isMobile:o,updateMarker:r,isMarkerDraggable:i}){return c.jsx(c.Fragment,{children:e.filter(a=>a.id>=1001).map(a=>{const d=t[a.id];let s=[a.lat,a.lng],l=a.iconUrl;l||(l=`${a.type||"glyph-marker-icon-blue"}.svg`),l=Se(l);const w=ie({className:a.type?`marker-icon marker-type-${a.type}`:"marker-icon",prefix:a.prefix,iconUrl:l,iconSize:Array.isArray(a.iconSize)?a.iconSize:[17,28],glyph:a.glyph||"?",glyphColor:a.glyphColor||"white",glyphSize:a.glyphSize||"12px",glyphAnchor:a.glyphAnchor||[0,-5]}),h=a.logo?se(a.logo):null,g=i(a),x={...g?{dragend:y=>{const{lat:v,lng:m}=y.target.getLatLng();r(a.id,{lat:v,lng:m})}}:{}};return c.jsx(je,{position:s,icon:w,draggable:g,eventHandlers:x,children:c.jsx(qe,{direction:"top",offset:[0,-32],opacity:1,permanent:!1,interactive:!0,children:c.jsxs("div",{className:"flex flex-col items-center",children:[h&&c.jsx("img",{src:h,alt:a.name||"Logo",style:{maxWidth:120,maxHeight:80,objectFit:"contain",borderRadius:0}}),c.jsx("span",{style:{fontWeight:600,color:"#1976d2"},children:a.name}),o&&c.jsx("button",{className:`mt-2 px-2 py-1 text-xs rounded ${d?"bg-green-500 text-white":"bg-blue-500 text-white"}`,onClick:()=>{n(y=>({...y,[a.id]:!y[a.id]}))},children:"More info"})]})})},`${a.id}-${a.coreLocked}-${a.appearanceLocked}-${a.contentLocked}-${a.adminLocked}`)})})}function Ye({isAdminView:e,mapInstance:t,updateMarker:n}){const{t:o}=de(),[r,i]=p.useState(!1),[a,d]=p.useState(!1),[s,l]=p.useState(""),[w,h]=p.useState(""),g=()=>{d(!0),l(""),h("")},x=async()=>{if(!s||isNaN(Number(s))){h("Please enter a valid numeric ID.");return}if(await v(s)){h("ID already exists. Please choose another.");return}d(!1),i(!0),h("")},y=()=>{d(!1),l(""),h("")};p.useEffect(()=>{if(!r||!t||!s)return;const m=j=>{const E=j.latlng,f={...Ve({lat:E.lat,lng:E.lng}),id:Number(s)};typeof n=="function"&&n(f.id,f,{add:!0}),i(!1),l(""),t.off("click",m)};return t.on("click",m),()=>{t.off("click",m)}},[r,t,n,s]);async function v(m){try{const{supabase:j}=await Ee(async()=>{const{supabase:f}=await import("./index-D88oEjwk.js").then(b=>b.s);return{supabase:f}},__vite__mapDeps([0,1])),E=["Markers_Core","Markers_Appearance","Markers_Content","Markers_Admin"];for(const f of E){const{data:b,error:L}=await j.from(f).select("id").eq("id",Number(m));if(L)return!1;if(b&&b.length>0)return!0}return!1}catch{return!1}}return e?c.jsxs(c.Fragment,{children:[c.jsxs("button",{onClick:g,"aria-label":"Add marker",className:"bg-white rounded-full shadow p-2 flex items-center justify-center",style:{position:"absolute",left:10,top:60,zIndex:1001,width:44,height:44,border:"none",cursor:r?"crosshair":"pointer",background:r?"#e3f2fd":"white"},title:r?"Click on map to place marker":"Add marker",children:[c.jsx(Me.Icon,{path:Ce,size:1.5,color:"#1976d2","aria-hidden":"true",style:{width:"42px",height:"42px"}}),c.jsx("span",{className:"sr-only",children:"Add marker"})]}),a&&c.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.3)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs("div",{style:{background:"white",borderRadius:8,boxShadow:"0 2px 16px rgba(25,118,210,0.15)",padding:32,minWidth:320,display:"flex",flexDirection:"column",alignItems:"center"},children:[c.jsx("h2",{style:{color:"#1976d2",fontWeight:700,marginBottom:16},children:"Enter Marker ID"}),c.jsx("input",{type:"number",value:s,onChange:m=>l(m.target.value),style:{fontSize:18,padding:"8px 12px",border:"2px solid #1976d2",borderRadius:4,marginBottom:12,width:"100%"},placeholder:"Marker ID (integer)",min:1}),w&&c.jsx("div",{style:{color:"red",marginBottom:8},children:w}),c.jsxs("div",{style:{display:"flex",gap:12},children:[c.jsx("button",{onClick:x,style:{background:"#1976d2",color:"white",border:"none",borderRadius:4,padding:"8px 20px",fontWeight:600,cursor:"pointer"},children:"Confirm"}),c.jsx("button",{onClick:y,style:{background:"#eee",color:"#1976d2",border:"none",borderRadius:4,padding:"8px 20px",fontWeight:600,cursor:"pointer"},children:"Cancel"})]})]})})]}):null}function Ve({lat:e,lng:t}){return{id:null,lat:e,lng:t,name:"",label:"",logo:"",boothNumber:"",coreLocked:!1}}function Ke(e){return e.getChildCount(),ie({iconUrl:"/Map/assets/icons/glyph-marker-icon-orange.svg",iconSize:[50,82],glyph:`<div style='display:flex;align-items:center;justify-content:center;width:100%;height:100%;'>
  <img src='/Map/assets/logos/4x4Vakantiebeurs.png' alt='logo' style='width:40px;height:40px;object-fit:contain;display:block;margin:auto;position:relative;left:1px;top:10px;' />
      </div>`,glyphColor:"white",glyphSize:"40px",className:"custom-cluster-icon"})}var ue={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ne=N.createContext&&N.createContext(ue),Je=["attr","size","title"];function Qe(e,t){if(e==null)return{};var n=et(e,t),o,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)o=i[r],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function et(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},W.apply(this,arguments)}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oe(Object(n),!0).forEach(function(o){tt(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function tt(e,t,n){return t=nt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nt(e){var t=ot(e,"string");return typeof t=="symbol"?t:t+""}function ot(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fe(e){return e&&e.map((t,n)=>N.createElement(t.tag,B({key:n},t.attr),fe(t.child)))}function V(e){return t=>N.createElement(at,W({attr:B({},e.attr)},t),fe(e.child))}function at(e){var t=n=>{var{attr:o,size:r,title:i}=e,a=Qe(e,Je),d=r||n.size||"1em",s;return n.className&&(s=n.className),e.className&&(s=(s?s+" ":"")+e.className),N.createElement("svg",W({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,o,a,{className:s,style:B(B({color:e.color||n.color},n.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),i&&N.createElement("title",null,i),e.children)};return ne!==void 0?N.createElement(ne.Consumer,null,n=>t(n)):t(ue)}function rt(e){return V({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"},child:[]}]})(e)}function it(e){return V({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(e)}function st(e){return V({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13H5v-2h14v2z"},child:[]}]})(e)}function lt(e){return e.angle||0}function O(e,t,n){const o=n*Math.PI/180,r=e*Math.cos(o)-t*Math.sin(o),i=e*Math.sin(o)+t*Math.cos(o);return[r,i]}function A(e){return e/111320}function R(e,t){return e/(40075e3*Math.cos(t*Math.PI/180)/360)}function ct(e){return e*111320}function dt(e,t){return e*(40075e3*Math.cos(t*Math.PI/180)/360)}function ut({mapInstance:e,markers:t,rectangleSize:n,isAdminView:o,showRectanglesAndHandles:r,updateMarker:i,rectangleLayerRef:a}){if(!e)return;a.current||(a.current=C.layerGroup(),a.current.addTo(e));const d=a.current;d._markerLayers||(d._markerLayers={}),Object.keys(d._markerLayers).forEach(s=>{t.find(l=>l.id===s)||(d.removeLayer(d._markerLayers[s].rectangle),d.removeLayer(d._markerLayers[s].handle),delete d._markerLayers[s])}),t.forEach(s=>{if(s.lat&&s.lng){const l=C.latLng(s.lat,s.lng),w=Array.isArray(s.rectangle)&&s.rectangle.length===2?s.rectangle:n,h=Number(w[0])/2,g=Number(w[1])/2,x=lt(s),y="#1976d2",v=[O(-h,-g,x),O(h,-g,x),O(h,g,x),O(-h,g,x)],m=v.map(([f,b])=>C.latLng(l.lat+A(b),l.lng+R(f,l.lat)));let j,E;if(d._markerLayers[s.id]){j=d._markerLayers[s.id].rectangle,j.setLatLngs(m),E=d._markerLayers[s.id].handle;const[f,b]=v[2],L=C.latLng(l.lat+A(b),l.lng+R(f,l.lat));E.setLatLng(L)}else{j=C.polygon(m,{color:y,weight:1});const[f,b]=v[2],L=C.latLng(l.lat+A(b),l.lng+R(f,l.lat));let M;if(o&&!s.coreLocked){const k=C.divIcon({className:"rotation-handle-icon",html:'<div style="width:8px;height:8px;background:#1976d2;border-radius:50%;"></div>',iconSize:[8,8],iconAnchor:[4,4]});M=C.marker(L,{icon:k,draggable:!0,interactive:!0,keyboard:!0,title:"Drag to rotate"}),M.on("dragstart",function(){e&&e.dragging.disable()});let I=x;M.on("drag",function(D){const H=D.target.getLatLng(),F=dt(H.lng-l.lng,l.lat),Z=ct(H.lat-l.lat);let P=Math.atan2(Z,F)*180/Math.PI;P<0&&(P+=360),I=P;const G=[O(-h,-g,I),O(h,-g,I),O(h,g,I),O(-h,g,I)],u=G.map(([he,ge])=>C.latLng(l.lat+A(ge),l.lng+R(he,l.lat)));j.setLatLngs(u);const[S,z]=G[2],T=C.latLng(l.lat+A(z),l.lng+R(S,l.lat));M.setLatLng(T)}),M.on("dragend",function(){e&&e.dragging.enable(),i(s.id,{angle:I})})}else{const k=C.divIcon({className:"rotation-handle-icon",html:'<div style="width:8px;height:8px;background:#1976d2;border-radius:50%;opacity:0.5;"></div>',iconSize:[8,8],iconAnchor:[4,4]});M=C.marker(L,{icon:k,draggable:!1,interactive:!1,keyboard:!1,title:"Locked"})}d.addLayer(j),d.addLayer(M),d._markerLayers[s.id]={rectangle:j,handle:M}}}}),Object.values(d._markerLayers).forEach(({rectangle:s,handle:l})=>{r?(d.addLayer(s),d.addLayer(l)):(d.removeLayer(s),d.removeLayer(l))})}function ft(e){e&&e.zoomIn()}function ht(e){e&&e.zoomOut()}function gt(e,t,n){e&&e.setView(t,n)}function ae(e,t){console.log("Analytics event:",e,t)}function pt(){const e=p.useCallback(n=>{ae("marker_view",{markerId:n,timestamp:Date.now()})},[]),t=p.useCallback(n=>{ae("map_interaction",{type:n,timestamp:Date.now()})},[]);return{trackMarkerView:e,trackMapInteraction:t}}const yt={appearance:"none",WebkitAppearance:"none",MozAppearance:"none",outline:"none",background:"#fff",border:"2px solid #1976d2",borderRadius:4,width:18,height:18,display:"inline-block",position:"relative",marginRight:8,cursor:"pointer",verticalAlign:"middle"},U=[{key:"carto",name:"Carto Voyager",attribution:'&copy; <a href="https://carto.com/attributions">Carto</a>',url:"https://cartodb-basemaps-{s}.global.ssl.fastly.net/rastertiles/voyager_nolabels/{z}/{x}/{y}.png"},{key:"esri",name:"Esri World Imagery",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"}];function bt({isAdminView:e,markersState:t,updateMarker:n}){const[o,r]=p.useState({}),i=Ne(),a=N.useRef(null),{t:d}=de(),[s,l]=p.useState(!1),[w,h]=p.useState(U[0].key),[g,x]=p.useState(!1),[y,v]=p.useState(null),[m,j]=p.useState(null),E=[51.898095078807025,5.772961378097534],f=17;pt();const b=N.useMemo(()=>Array.isArray(t)?t:[],[t]),L=[6,6],M=N.useRef(null);N.useEffect(()=>{b.forEach(u=>{if(u.logo){const S=new window.Image;S.src=se(u.logo)}})},[b]);function k(u){return e&&u&&u.coreLocked===!1}p.useEffect(()=>{ut({mapInstance:y,markers:b,rectangleSize:L,isAdminView:e,showRectanglesAndHandles:g,updateMarker:n,rectangleLayerRef:M})},[y,t,L,e,g]),p.useEffect(()=>{if(!y)return;let u=m;u||(u=C.layerGroup(),j(u)),u.clearLayers(),b.forEach(S=>{if(S.lat&&S.lng){const z=[S.name,S.boothNumber,S.label].filter(Boolean).join(" | "),T=C.marker([S.lat,S.lng],{opacity:0,interactive:!1});T.feature={type:"Feature",properties:{searchText:z}},T.bindPopup(S.name||S.label||""),u.addLayer(T)}})},[y,b,m]),p.useEffect(()=>{if(y&&m){const u=new C.Control.Search({layer:m,propertyName:"searchText",initial:!1,zoom:21,marker:{icon:!1,animate:!0},textPlaceholder:"Search for name or booth...",position:"topleft"});if(y.addControl(u),a.current=u,!y._minimapControl){const S=C.tileLayer(U[0].url,{attribution:"",minZoom:0,maxZoom:16}),z=new C.Control.MiniMap(S,{position:"bottomright",width:120,height:120,zoomLevelFixed:15,toggleDisplay:!0,centerFixed:E,aimingRectOptions:{color:"#1976d2",weight:2,opacity:.9,fillOpacity:.1,fill:!0},shadowRectOptions:{color:"#90caf9",weight:1,opacity:.5,fillOpacity:.05,fill:!0},strings:{hideText:"Hide MiniMap",showText:"Show MiniMap"}});z.addTo(y),y._minimapControl=z}return u.on("search:locationfound",function(S){if(S&&S.layer&&S.layer.getLatLng){const z=S.layer.getLatLng();y.flyTo(z,21,{animate:!0}),u._input&&u._input.blur(),u.hideAlert&&u.hideAlert(),u.collapse&&u.collapse()}}),()=>{y.removeControl(u),a.current=null}}},[y,m]);const I=E,D=f,H=14,F=22,Z=u=>{u&&u.target?v(u.target):v(u)},K=()=>ft(y),P=()=>ht(y),G=()=>gt(y,I,D);return c.jsxs("div",{style:{height:"100svh",height:"100dvh",height:"100vh",width:"100vw",position:"fixed",inset:0,zIndex:0,touchAction:"pan-x pan-y",overflow:"hidden"},tabIndex:0,"aria-label":"Event Map",role:"region",children:[c.jsxs("div",{style:{position:"absolute",top:10,right:10,zIndex:1e3,display:"flex",flexDirection:"column",gap:"10px"},children:[c.jsxs("button",{onClick:G,"aria-label":"Home",className:"bg-white rounded-full shadow p-2 flex items-center justify-center",style:{width:44,height:44},children:[c.jsx(rt,{size:28,color:"#1976d2","aria-hidden":"true"}),c.jsx("span",{className:"sr-only",children:"Home"})]}),c.jsxs("button",{onClick:K,"aria-label":"Zoom in",className:"bg-white rounded-full shadow p-2 mb-2 flex items-center justify-center",style:{width:44,height:44},children:[c.jsx(it,{size:28,color:"#1976d2","aria-hidden":"true"}),c.jsx("span",{className:"sr-only",children:"Zoom in"})]}),c.jsxs("button",{onClick:P,"aria-label":"Zoom out",className:"bg-white rounded-full shadow p-2 mb-2 flex items-center justify-center",style:{width:44,height:44},children:[c.jsx(st,{size:28,color:"#1976d2","aria-hidden":"true"}),c.jsx("span",{className:"sr-only",children:"Zoom out"})]}),e&&c.jsxs("div",{style:{position:"relative"},children:[c.jsxs("button",{"aria-label":"Map layers",className:"bg-white rounded-full shadow p-2 flex items-center justify-center mt-0 hover:bg-gray-100 focus:outline-none",style:{width:44,height:44},onClick:()=>l(u=>!u),children:[c.jsx(Ie,{path:ke,size:1.2,color:"#1976d2"}),c.jsx("span",{className:"sr-only",children:"Map layers"})]}),s&&c.jsxs("div",{className:"absolute right-0 mt-2 bg-white rounded shadow-lg border z-50",style:{minWidth:200,padding:8,color:"#1976d2"},role:"menu","aria-label":"Layer selection",children:[c.jsx("div",{className:"font-semibold mb-2",children:"Base Layers"}),U.map(u=>c.jsx("button",{className:`w-full text-left px-2 py-1 rounded hover:bg-blue-50 ${w===u.key?"bg-blue-50 font-bold":""}`,onClick:()=>h(u.key),role:"menuitem",style:{color:"#1976d2"},children:u.name},u.key)),c.jsx("div",{className:"font-semibold mt-4 mb-2",children:"Map Features"}),c.jsxs("label",{className:"flex items-center px-2 py-1 cursor-pointer hover:bg-blue-50 rounded",style:{color:"#1976d2"},children:[c.jsx("input",{type:"checkbox",checked:g,onChange:u=>x(u.target.checked),style:yt}),c.jsx("span",{style:{position:"relative",left:-26,width:18,height:18,pointerEvents:"none",display:g?"inline-block":"none"},children:c.jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",style:{position:"absolute",top:0,left:0},children:c.jsx("polyline",{points:"4,9 8,13 14,5",stroke:"#1976d2",strokeWidth:"2.5",fill:"none"})})}),c.jsx("span",{style:{marginLeft:g?-8:0},children:"Booth Surface"})]})]})]})]}),e&&c.jsx(Ye,{isAdminView:e,mapInstance:y,updateMarker:n}),c.jsx("div",{id:"map-container",className:"fixed inset-0 w-full h-full",style:{zIndex:1,height:"100svh",height:"100dvh",height:"100vh",touchAction:"pan-x pan-y",overflow:"hidden"},"aria-label":d("map.ariaLabel"),children:c.jsxs(Ze,{center:I,zoom:D,minZoom:H,maxZoom:F,zoomDelta:.5,zoomSnap:.5,zoomControl:!1,style:{width:"100vw",height:"100vh"},className:"focus:outline-none focus:ring-2 focus:ring-primary",whenReady:Z,attributionControl:!1,children:[U.filter(u=>u.key===w).map(u=>c.jsx($e,{attribution:u.attribution,url:u.url,maxZoom:22},u.key)),c.jsx(ze,{safeMarkers:b,infoButtonToggled:o,setInfoButtonToggled:r,isMobile:i,updateMarker:n,isMarkerDraggable:k,iconCreateFunction:Ke}),c.jsx(Xe,{safeMarkers:b,infoButtonToggled:o,setInfoButtonToggled:r,isMobile:i,updateMarker:n,isMarkerDraggable:k})]})})]})}export{bt as default};
