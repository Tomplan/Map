import{u as se,d as te,r as d,aj as ae,j as e,M as he,b as re,c as ne,K as ge,I as h,m as fe,af as ye,f as R,h as W,s as ee,an as je,aF as Ne,k as ve,aH as we,ai as _e}from"./index-c3c9ac92.js";import{u as Ce}from"./useEventSubscriptions-f300fdbd.js";import{u as ke}from"./useCompanies-c16be9a2.js";import{u as le}from"./useMarkerGlyphs-189c35bc.js";import{P as Se,I as Pe,E as Ee,g as Ie,f as ze}from"./ImportButton-e0317696.js";import"./phone-376c158e.js";import"./dataExportImport-9700835f.js";import"./useCategories-5ce23293.js";function Me({isOpen:i,onClose:c,subscription:r,onSave:g}){var C,q,f;const{t:l}=se(),{organizationLogo:z}=te(),[n,b]=d.useState({}),M=(r==null?void 0:r.event_year)||new Date().getFullYear(),{assignments:$}=ae(M),{markers:L}=le(M),A=d.useMemo(()=>{const a={};return L.forEach(p=>{a[p.id]=p.glyph}),a},[L]),_=d.useMemo(()=>{if(!r||!$)return"-";const a=$.filter(u=>u.company_id===r.company_id);if(a.length===0)return"-";const p=a.sort((u,k)=>u.marker_id-k.marker_id).map(u=>A[u.marker_id]||u.marker_id.toString()).filter(Boolean);return p.length>0?p.join(", "):"-"},[r,$,A]);d.useEffect(()=>{r&&b({contact:r.contact||"",phone:r.phone||"",email:r.email||"",booth_count:r.booth_count||1,area:r.area||"",breakfast_sat:r.breakfast_sat||0,lunch_sat:r.lunch_sat||0,bbq_sat:r.bbq_sat||0,breakfast_sun:r.breakfast_sun||0,lunch_sun:r.lunch_sun||0,coins:r.coins||0,notes:r.notes||""})},[r]);const D=async()=>{await g(n)};return r?e.jsx(he,{isOpen:i,onClose:c,title:`Edit Subscription: ${((C=r.company)==null?void 0:C.name)||""}`,size:"lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{...(()=>{var u;const a=((u=r.company)==null?void 0:u.logo)||z,p=re(a);return p?{src:p.src,srcSet:p.srcSet,sizes:p.sizes}:{src:ne(a)}})(),alt:(q=r.company)==null?void 0:q.name,className:"w-16 h-16 object-contain"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:(f=r.company)==null?void 0:f.name}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("span",{className:"font-medium",children:"Event Year:"})," ",r.event_year]}),_!=="-"&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("span",{className:"font-medium",children:"Current Booths:"})," ",e.jsx("span",{className:"text-blue-600 font-medium",children:_})]})]})]})}),e.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-sm mb-3 text-green-800",children:l("helpPanel.subscriptions.contactInformation")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.contact")}),e.jsx("input",{type:"text",value:n.contact||"",onChange:a=>b({...n,contact:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Contact person name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.phone")}),e.jsx(Se,{value:n.phone||"",onChange:a=>b({...n,phone:a}),placeholder:"+31612345678"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.email")}),e.jsx("input",{type:"email",value:n.email||"",onChange:a=>b({...n,email:a.target.value.toLowerCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"email@example.com"})]})]})]}),e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-sm mb-3 text-blue-800",children:l("helpPanel.subscriptions.eventLogistics")}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.boothCount")}),e.jsx("input",{type:"number",min:"1",value:n.booth_count||1,onChange:a=>b({...n,booth_count:parseInt(a.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.area")}),e.jsx("input",{type:"text",value:n.area||"",onChange:a=>b({...n,area:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:l("helpPanel.subscriptions.areaPlaceholder")})]})]})]}),e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-sm mb-3 text-blue-800",children:[l("helpPanel.subscriptions.saturday")," - ",l("helpPanel.subscriptions.meals")]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.breakfast")}),e.jsx("input",{type:"number",min:"0",value:n.breakfast_sat||0,onChange:a=>b({...n,breakfast_sat:parseInt(a.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.lunch")}),e.jsx("input",{type:"number",min:"0",value:n.lunch_sat||0,onChange:a=>b({...n,lunch_sat:parseInt(a.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.bbq")}),e.jsx("input",{type:"number",min:"0",value:n.bbq_sat||0,onChange:a=>b({...n,bbq_sat:parseInt(a.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-sm mb-3 text-green-800",children:[l("helpPanel.subscriptions.sunday")," - ",l("helpPanel.subscriptions.meals")]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.breakfast")}),e.jsx("input",{type:"number",min:"0",value:n.breakfast_sun||0,onChange:a=>b({...n,breakfast_sun:parseInt(a.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.lunch")}),e.jsx("input",{type:"number",min:"0",value:n.lunch_sun||0,onChange:a=>b({...n,lunch_sun:parseInt(a.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-sm mb-3 text-gray-800",children:l("helpPanel.subscriptions.additionalInfo")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.coins")}),e.jsx("input",{type:"number",min:"0",value:n.coins||0,onChange:a=>b({...n,coins:parseInt(a.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.notes")}),e.jsx("textarea",{value:n.notes||"",onChange:a=>b({...n,notes:a.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Additional notes..."})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6 justify-end",children:[e.jsx("button",{onClick:c,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:D,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})}):null}function Oe({selectedYear:i}){const{t:c}=se(),{organizationLogo:r}=te(),{subscriptions:g,loading:l,error:z,subscribeCompany:n,updateSubscription:b,unsubscribeCompany:M,archiveCurrentYear:$,copyFromPreviousYear:L,reload:A}=Ce(i),{companies:_}=ke(),{assignments:D}=ae(i),{markers:C,loading:q}=le(i),[f,a]=d.useState(""),[p,u]=d.useState(!1),[k,B]=d.useState(!1),[F,O]=d.useState(""),[N,oe]=d.useState("company"),[S,H]=d.useState("asc"),[ce,U]=d.useState(!1),[K,G]=d.useState(null),{confirm:V,toastError:T,toastSuccess:J,toastWarning:ie}=ge(),Q=d.useMemo(()=>{const s=new Set(g.map(t=>t.company_id));return _.filter(t=>!s.has(t.id))},[_,g]),X=d.useMemo(()=>{const s={};return D.forEach(t=>{s[t.company_id]||(s[t.company_id]=[]),s[t.company_id].push(t)}),s},[D]),Z=d.useMemo(()=>{const s={};return C.forEach(t=>{s[t.id]=t.glyph}),s},[C]),P=d.useCallback(s=>{const t=X[s]||[];if(t.length===0)return"-";const m=t.sort((o,x)=>o.marker_id-x.marker_id).map(o=>Z[o.marker_id]||o.marker_id.toString()).filter(Boolean);return m.length>0?m.join(", "):"-"},[X,Z]),E=d.useMemo(()=>{let s=g;if(f){const m=f.toLowerCase();s=s.filter(o=>{var x,y;return(y=(x=o.company)==null?void 0:x.name)==null?void 0:y.toLowerCase().includes(m)})}return[...s].sort((m,o)=>{var y,I;let x=0;if(N==="company"){const v=(((y=m.company)==null?void 0:y.name)||"").toLowerCase(),w=(((I=o.company)==null?void 0:I.name)||"").toLowerCase();x=v.localeCompare(w)}else if(N==="booths"){const v=P(m.company_id),w=P(o.company_id);if(v==="-"&&w!=="-")return 1;if(v!=="-"&&w==="-")return-1;if(v==="-"&&w==="-")return 0;x=v.localeCompare(w,void 0,{numeric:!0})}return S==="asc"?x:-x})},[g,f,N,S,P]),j=d.useMemo(()=>E.reduce((s,t)=>(s.booth_count+=t.booth_count||0,s.breakfast_sat+=t.breakfast_sat||0,s.lunch_sat+=t.lunch_sat||0,s.bbq_sat+=t.bbq_sat||0,s.breakfast_sun+=t.breakfast_sun||0,s.lunch_sun+=t.lunch_sun||0,s.coins+=t.coins||0,s),{booth_count:0,breakfast_sat:0,lunch_sat:0,bbq_sat:0,breakfast_sun:0,lunch_sun:0,coins:0}),[E]),de=s=>{G(s),U(!0)},be=async s=>{const{error:t}=await b(K.id,s);t?T(`Error updating subscription: ${t}`):(U(!1),G(null),J("Subscription updated successfully"))},me=()=>{U(!1),G(null)},xe=async s=>{var I;const t=((I=s.company)==null?void 0:I.name)||"this company",m=P(s.company_id),o=m?` and their booth assignments (${m})`:"";if(!await V({title:"Unsubscribe Company",message:`Unsubscribe ${t} from ${i}? This will delete their subscription${o}.`,confirmText:"Unsubscribe",variant:"danger"}))return;const{error:y}=await M(s.id);y&&T(`Error unsubscribing company: ${y}`)},ue=async()=>{if(!F){ie("Please select a company");return}const{error:s}=await n(parseInt(F));s?T(`Error subscribing company: ${s}`):(u(!1),O(""))},pe=async()=>{const s=i-1;if(!await V({title:"Copy Subscriptions",message:`Copy all subscriptions from ${s} to ${i}?`,confirmText:"Copy",variant:"default"}))return;const{error:m}=await L(s);m?T(`Error copying subscriptions: ${m}`):J(`Subscriptions copied from ${s} to ${i}`)},Y=s=>{N===s?H(S==="asc"?"desc":"asc"):(oe(s),H("asc"))};return l?e.jsx("div",{className:"p-4",children:"Loading subscriptions..."}):z?e.jsxs("div",{className:"p-4 text-red-600",children:["Error: ",z]}):e.jsxs("div",{className:"h-full flex flex-col p-4","data-testid":"subscriptions-container",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{path:fe,size:1,className:"text-gray-500"}),e.jsx("input",{"data-testid":"subscriptions-search",type:"text",placeholder:c("helpPanel.subscriptions.searchPlaceholder"),value:f,onChange:s=>a(s.target.value),className:"px-3 py-2 border rounded-lg"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[E.length," of ",g.length]})]}),e.jsxs("div",{className:"flex gap-2 relative z-50",children:[e.jsxs("button",{onClick:()=>u(!0),"data-testid":"subscribe-company-button",className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(h,{path:ye,size:.8}),"Subscribe Company"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>B(!k),className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium bg-white text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 shadow-sm transition-all",title:"Actions Menu",children:[e.jsx("span",{children:"Actions"}),e.jsx(h,{path:k?R:W,size:.7})]}),k&&e.jsxs("div",{className:"absolute right-0 mt-1 w-56 bg-white border border-gray-200 rounded-lg shadow-xl z-50 overflow-hidden py-1",children:[e.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider bg-gray-50 border-b border-gray-100",children:"Data Tools"}),e.jsx(Pe,{dataType:"event_subscriptions",existingData:g,eventYear:i,additionalData:{supabase:ee,selectedYear:i},onImportComplete:async()=>{await A(),B(!1)},buttonClassName:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2 bg-transparent",className:"block w-full"}),e.jsx(Ee,{dataType:"event_subscriptions",data:g,additionalData:{supabase:ee,eventYear:i},filename:`subscriptions-${i}-${new Date().toISOString().split("T")[0]}`,buttonClassName:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2 justify-between bg-transparent",className:"block w-full"}),e.jsxs("button",{onClick:()=>{pe(),B(!1)},"data-testid":"copy-from-previous-year-button",className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",title:`Copy from ${i-1}`,children:[e.jsx(h,{path:je,size:.7,className:"text-gray-400"}),e.jsxs("span",{children:["Copy from ",i-1]})]})]})]})]})]}),p&&e.jsxs("div",{className:"mb-4 p-4 border rounded-lg bg-blue-50 flex-shrink-0",children:[e.jsxs("h3",{className:"font-bold mb-3",children:["Subscribe Company to ",i]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:F,onChange:s=>O(s.target.value),className:"flex-1 px-3 py-2 border rounded",children:[e.jsx("option",{value:"",children:"Select a company..."}),Q.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsxs("button",{onClick:ue,className:"flex items-center gap-1 px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:[e.jsx(h,{path:Ne,size:.7}),"Subscribe"]}),e.jsxs("button",{onClick:()=>{u(!1),O("")},className:"flex items-center gap-1 px-3 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:[e.jsx(h,{path:ve,size:.7}),"Cancel"]})]}),Q.length===0&&e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["All companies are already subscribed to ",i]})]}),e.jsxs("div",{className:"flex-1 overflow-auto border rounded-lg","data-testid":"subscriptions-table",children:[e.jsxs("table",{className:"w-full",style:{fontSize:"11px"},children:[e.jsxs("thead",{className:"bg-gray-100 text-gray-900 sticky top-0 z-10",children:[e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left border-b cursor-pointer hover:bg-gray-200 select-none bg-gray-100",onClick:()=>Y("booths"),title:"Click to sort by booth labels",rowSpan:3,children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"Booths"}),N==="booths"&&e.jsx(h,{path:S==="asc"?R:W,size:.6,className:"text-blue-600"})]})}),e.jsx("th",{className:"p-2 text-left border-b cursor-pointer hover:bg-gray-200 select-none bg-gray-100",onClick:()=>Y("company"),title:"Click to sort by company name",rowSpan:3,children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"Company"}),N==="company"&&e.jsx(h,{path:S==="asc"?R:W,size:.6,className:"text-blue-600"})]})}),e.jsx("th",{className:"p-2 text-left border-b bg-gray-100",rowSpan:3,children:c("helpPanel.subscriptions.contact")}),e.jsx("th",{className:"p-2 text-left border-b bg-gray-100",rowSpan:3,children:c("helpPanel.subscriptions.phone")}),e.jsx("th",{className:"p-2 text-left border-b bg-gray-100",rowSpan:3,children:c("helpPanel.subscriptions.email")}),e.jsx("th",{className:"p-2 text-center border-b bg-gray-100",children:c("helpPanel.subscriptions.boothCount")}),e.jsx("th",{className:"p-2 text-left border-b bg-gray-100",rowSpan:3,children:c("helpPanel.subscriptions.area")}),e.jsx("th",{className:"p-2 text-center border-b bg-blue-50",colSpan:3,children:e.jsx("span",{className:"font-bold text-blue-700",children:c("helpPanel.subscriptions.saturday")})}),e.jsx("th",{className:"p-2 text-center border-b bg-gray-100",colSpan:2,children:e.jsx("span",{className:"font-bold text-green-700",children:c("helpPanel.subscriptions.sunday")})}),e.jsx("th",{className:"p-2 text-center border-b bg-gray-100",children:c("helpPanel.subscriptions.coins")}),e.jsx("th",{className:"p-2 text-left border-b bg-gray-100",rowSpan:3,children:c("helpPanel.subscriptions.notes")}),e.jsx("th",{className:"p-2 text-center border-b bg-gray-100",rowSpan:3,style:{minWidth:"80px"},children:c("helpPanel.subscriptions.actions")})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"p-1 text-center border-b bg-gray-100 text-xs",style:{width:"60px"}}),e.jsx("th",{className:"p-1 text-center border-b bg-blue-50 text-xs",style:{width:"60px"},children:c("helpPanel.subscriptions.breakfast")}),e.jsx("th",{className:"p-1 text-center border-b bg-blue-50 text-xs",style:{width:"60px"},children:c("helpPanel.subscriptions.lunch")}),e.jsx("th",{className:"p-1 text-center border-b bg-blue-50 text-xs",style:{width:"60px"},children:c("helpPanel.subscriptions.bbq")}),e.jsx("th",{className:"p-1 text-center border-b bg-green-50 text-xs",style:{width:"60px"},children:c("helpPanel.subscriptions.breakfast")}),e.jsx("th",{className:"p-1 text-center border-b bg-green-50 text-xs",style:{width:"60px"},children:c("helpPanel.subscriptions.lunch")}),e.jsx("th",{className:"p-1 text-center border-b bg-gray-100 text-xs",style:{width:"60px"}})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"p-1 text-center border-b bg-gray-200 text-xs font-bold",style:{width:"60px"},children:j.booth_count}),e.jsx("th",{className:"p-1 text-center border-b bg-blue-100 text-xs font-bold text-blue-800",style:{width:"60px"},children:j.breakfast_sat}),e.jsx("th",{className:"p-1 text-center border-b bg-blue-100 text-xs font-bold text-blue-800",style:{width:"60px"},children:j.lunch_sat}),e.jsx("th",{className:"p-1 text-center border-b bg-blue-100 text-xs font-bold text-blue-800",style:{width:"60px"},children:j.bbq_sat}),e.jsx("th",{className:"p-1 text-center border-b bg-green-100 text-xs font-bold text-green-800",style:{width:"60px"},children:j.breakfast_sun}),e.jsx("th",{className:"p-1 text-center border-b bg-green-100 text-xs font-bold text-green-800",style:{width:"60px"},children:j.lunch_sun}),e.jsx("th",{className:"p-1 text-center border-b bg-gray-200 text-xs font-bold",style:{width:"60px"},children:j.coins})]})]}),e.jsx("tbody",{children:E.map(s=>{const t=s.company,m=P(s.company_id);return e.jsxs("tr",{className:"bg-white hover:bg-gray-50 border-b",children:[e.jsx("td",{className:"p-2 text-left",children:e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded font-medium",children:m})}),e.jsx("td",{className:"p-2 text-left",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{...(()=>{const o=(t==null?void 0:t.logo)||r,x=re(o);return x?{src:x.src,srcSet:x.srcSet,sizes:x.sizes}:{src:ne(o)}})(),alt:t==null?void 0:t.name,className:"w-8 h-8 object-contain"}),e.jsx("span",{className:"font-semibold text-gray-700",children:t==null?void 0:t.name})]})}),e.jsx("td",{className:"p-2 text-left",children:e.jsx("span",{className:"text-xs text-gray-700",children:s.contact||"-"})}),e.jsx("td",{className:"p-2 text-left",children:s.phone?e.jsxs("span",{className:"text-xs text-gray-700 flex items-center gap-1",children:[e.jsx("span",{children:Ie(s.phone)}),e.jsx("span",{children:ze(s.phone)})]}):e.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),e.jsx("td",{className:"p-2 text-left",children:e.jsx("span",{className:"text-xs text-gray-700",children:s.email||"-"})}),e.jsx("td",{className:"p-2 text-center",children:e.jsx("span",{className:"text-xs text-gray-700",children:s.booth_count})}),e.jsx("td",{className:"p-2",children:e.jsx("span",{className:"text-xs text-gray-700",children:s.area||"-"})}),["breakfast_sat","lunch_sat","bbq_sat"].map(o=>e.jsx("td",{className:"p-2 text-center bg-blue-50",children:e.jsx("span",{className:"text-xs text-gray-700",children:s[o]})},o)),["breakfast_sun","lunch_sun"].map(o=>e.jsx("td",{className:"p-2 text-center bg-green-50",children:e.jsx("span",{className:"text-xs text-gray-700",children:s[o]})},o)),e.jsx("td",{className:"p-2 text-center",children:e.jsx("span",{className:"text-xs text-gray-700",children:s.coins})}),e.jsx("td",{className:"p-2 text-left",children:e.jsx("span",{className:"text-xs text-gray-700",children:s.notes||"-"})}),e.jsx("td",{className:"p-2 text-center",children:e.jsxs("div",{className:"flex gap-1 justify-center",children:[e.jsx("button",{onClick:()=>de(s),className:"p-1 bg-blue-600 text-white rounded hover:bg-blue-700",title:"Edit",children:e.jsx(h,{path:we,size:.6})}),e.jsx("button",{onClick:()=>xe(s),className:"p-1 bg-red-600 text-white rounded hover:bg-red-700",title:"Unsubscribe",children:e.jsx(h,{path:_e,size:.6})})]})})]},s.id)})})]}),E.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:f?"No subscriptions found matching your search":`No companies subscribed to ${i} yet. Click "Subscribe Company" to add one.`})]}),e.jsx(Me,{isOpen:ce,onClose:me,subscription:K,onSave:be})]})}export{Oe as default};
