import{c as Y,r as m,j as e,I as p}from"./vendor-react-3437b308.js";import{u as he}from"./useEventSubscriptions-316b369c.js";import{u as pe}from"./useCompanies-1e40f5cc.js";import{u as ee}from"./useAssignments-0bf0bb9c.js";import{u as se}from"./useMarkerGlyphs-500e31c8.js";import{ak as ge,aS as fe,aT as ye,aZ as je,aY as Ne,ae as ve,al as K,am as Q,a_ as _e,a$ as we}from"./vendor-3047817a.js";import{u as te,M as Ce,a as ae,b as re,i as ke,s as X}from"./index-a5e29154.js";import{P as Se,E as Pe,I as Ee,g as Ie,f as $e}from"./ImportButton-d00aa749.js";import"./vendor-i18n-2e1fa53c.js";import"./phone-996d1d4e.js";import"./vendor-supabase-a81f88b3.js";import"./vendor-map-5f90c4cc.js";import"./dataExportImport-118b7485.js";import"./useCategories-823e3140.js";function ze({isOpen:o,onClose:i,subscription:r,onSave:g}){var k,q,f;const{t:l}=Y(),{organizationLogo:M}=te(),[n,b]=m.useState({}),A=(r==null?void 0:r.event_year)||new Date().getFullYear(),{assignments:w}=ee(A),{markers:L}=se(A),T=m.useMemo(()=>{const a={};return L.forEach(h=>{a[h.id]=h.glyph}),a},[L]),C=m.useMemo(()=>{if(!r||!w)return"-";const a=w.filter(u=>u.company_id===r.company_id);if(a.length===0)return"-";const h=a.sort((u,S)=>u.marker_id-S.marker_id).map(u=>T[u.marker_id]||u.marker_id.toString()).filter(Boolean);return h.length>0?h.join(", "):"-"},[r,w,T]);m.useEffect(()=>{r&&b({contact:r.contact||"",phone:r.phone||"",email:r.email||"",booth_count:r.booth_count||1,area:r.area||"",breakfast_sat:r.breakfast_sat||0,lunch_sat:r.lunch_sat||0,bbq_sat:r.bbq_sat||0,breakfast_sun:r.breakfast_sun||0,lunch_sun:r.lunch_sun||0,coins:r.coins||0,notes:r.notes||""})},[r]);const D=async()=>{await g(n)};return r?e.jsx(Ce,{isOpen:o,onClose:i,title:`Edit Subscription: ${((k=r.company)==null?void 0:k.name)||""}`,size:"lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{...(()=>{var u;const a=((u=r.company)==null?void 0:u.logo)||M,h=ae(a);return h?{src:h.src,srcSet:h.srcSet,sizes:h.sizes}:{src:re(a)}})(),alt:(q=r.company)==null?void 0:q.name,className:"w-16 h-16 object-contain"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:(f=r.company)==null?void 0:f.name}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("span",{className:"font-medium",children:"Event Year:"})," ",r.event_year]}),C!=="-"&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[e.jsx("span",{className:"font-medium",children:"Current Booths:"})," ",e.jsx("span",{className:"text-blue-600 font-medium",children:C})]})]})]})}),e.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-sm mb-3 text-green-800",children:l("helpPanel.subscriptions.contactInformation")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.contact")}),e.jsx("input",{type:"text",value:n.contact||"",onChange:a=>b({...n,contact:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Contact person name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.phone")}),e.jsx(Se,{value:n.phone||"",onChange:a=>b({...n,phone:a}),placeholder:"+31612345678"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.email")}),e.jsx("input",{type:"email",value:n.email||"",onChange:a=>b({...n,email:a.target.value.toLowerCase()}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"email@example.com"})]})]})]}),e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-sm mb-3 text-blue-800",children:l("helpPanel.subscriptions.eventLogistics")}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.boothCount")}),e.jsx("input",{type:"number",min:"1",value:n.booth_count||1,onChange:a=>b({...n,booth_count:parseInt(a.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.area")}),e.jsx("input",{type:"text",value:n.area||"",onChange:a=>b({...n,area:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:l("helpPanel.subscriptions.areaPlaceholder")})]})]})]}),e.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-sm mb-3 text-blue-800",children:[l("helpPanel.subscriptions.saturday")," - ",l("helpPanel.subscriptions.meals")]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.breakfast")}),e.jsx("input",{type:"number",min:"0",value:n.breakfast_sat||0,onChange:a=>b({...n,breakfast_sat:parseInt(a.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.lunch")}),e.jsx("input",{type:"number",min:"0",value:n.lunch_sat||0,onChange:a=>b({...n,lunch_sat:parseInt(a.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.bbq")}),e.jsx("input",{type:"number",min:"0",value:n.bbq_sat||0,onChange:a=>b({...n,bbq_sat:parseInt(a.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-sm mb-3 text-green-800",children:[l("helpPanel.subscriptions.sunday")," - ",l("helpPanel.subscriptions.meals")]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.breakfast")}),e.jsx("input",{type:"number",min:"0",value:n.breakfast_sun||0,onChange:a=>b({...n,breakfast_sun:parseInt(a.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.lunch")}),e.jsx("input",{type:"number",min:"0",value:n.lunch_sun||0,onChange:a=>b({...n,lunch_sun:parseInt(a.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-sm mb-3 text-gray-800",children:l("helpPanel.subscriptions.additionalInfo")}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.coins")}),e.jsx("input",{type:"number",min:"0",value:n.coins||0,onChange:a=>b({...n,coins:parseInt(a.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("helpPanel.subscriptions.notes")}),e.jsx("textarea",{value:n.notes||"",onChange:a=>b({...n,notes:a.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Additional notes..."})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6 justify-end",children:[e.jsx("button",{onClick:i,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:D,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})}):null}function Ze({selectedYear:o}){const{t:i}=Y(),{organizationLogo:r}=te(),{subscriptions:g,loading:l,error:M,subscribeCompany:n,updateSubscription:b,unsubscribeCompany:A,archiveCurrentYear:w,copyFromPreviousYear:L,reload:T}=he(o),{companies:C}=pe(),{assignments:D}=ee(o),{markers:k,loading:q}=se(o),[f,a]=m.useState(""),[h,u]=m.useState(!1),[S,B]=m.useState(""),[N,ne]=m.useState("company"),[P,R]=m.useState("asc"),[le,F]=m.useState(!1),[W,O]=m.useState(null),{confirm:U,toastError:E,toastSuccess:G,toastWarning:oe}=ke(),V=m.useMemo(()=>{const s=new Set(g.map(t=>t.company_id));return C.filter(t=>!s.has(t.id))},[C,g]),Z=m.useMemo(()=>{const s={};return D.forEach(t=>{s[t.company_id]||(s[t.company_id]=[]),s[t.company_id].push(t)}),s},[D]),H=m.useMemo(()=>{const s={};return k.forEach(t=>{s[t.id]=t.glyph}),s},[k]),I=m.useCallback(s=>{const t=Z[s]||[];if(t.length===0)return"-";const d=t.sort((c,x)=>c.marker_id-x.marker_id).map(c=>H[c.marker_id]||c.marker_id.toString()).filter(Boolean);return d.length>0?d.join(", "):"-"},[Z,H]),$=m.useMemo(()=>{let s=g;if(f){const d=f.toLowerCase();s=s.filter(c=>{var x,y;return(y=(x=c.company)==null?void 0:x.name)==null?void 0:y.toLowerCase().includes(d)})}return[...s].sort((d,c)=>{var y,z;let x=0;if(N==="company"){const v=(((y=d.company)==null?void 0:y.name)||"").toLowerCase(),_=(((z=c.company)==null?void 0:z.name)||"").toLowerCase();x=v.localeCompare(_)}else if(N==="booths"){const v=I(d.company_id),_=I(c.company_id);if(v==="-"&&_!=="-")return 1;if(v!=="-"&&_==="-")return-1;if(v==="-"&&_==="-")return 0;x=v.localeCompare(_,void 0,{numeric:!0})}return P==="asc"?x:-x})},[g,f,N,P,I]),j=m.useMemo(()=>$.reduce((s,t)=>(s.booth_count+=t.booth_count||0,s.breakfast_sat+=t.breakfast_sat||0,s.lunch_sat+=t.lunch_sat||0,s.bbq_sat+=t.bbq_sat||0,s.breakfast_sun+=t.breakfast_sun||0,s.lunch_sun+=t.lunch_sun||0,s.coins+=t.coins||0,s),{booth_count:0,breakfast_sat:0,lunch_sat:0,bbq_sat:0,breakfast_sun:0,lunch_sun:0,coins:0}),[$]),ce=s=>{O(s),F(!0)},ie=async s=>{const{error:t}=await b(W.id,s);t?E(`Error updating subscription: ${t}`):(F(!1),O(null),G("Subscription updated successfully"))},de=()=>{F(!1),O(null)},me=async s=>{var z;const t=((z=s.company)==null?void 0:z.name)||"this company",d=I(s.company_id),c=d?` and their booth assignments (${d})`:"";if(!await U({title:"Unsubscribe Company",message:`Unsubscribe ${t} from ${o}? This will delete their subscription${c}.`,confirmText:"Unsubscribe",variant:"danger"}))return;const{error:y}=await A(s.id);y&&E(`Error unsubscribing company: ${y}`)},be=async()=>{if(!S){oe("Please select a company");return}const{error:s}=await n(parseInt(S));s?E(`Error subscribing company: ${s}`):(u(!1),B(""))},xe=async()=>{if(!await U({title:"Archive Subscriptions",message:`Archive all subscriptions for ${o}? This will move them to the archive and clear the active list.`,confirmText:"Archive",variant:"warning"}))return;const{data:t,error:d}=await w();d?E(`Error archiving: ${d}`):G(`Archived ${t} subscriptions for ${o}`)},ue=async()=>{const s=o-1;if(!await U({title:"Copy Subscriptions",message:`Copy all subscriptions from ${s} to ${o}?`,confirmText:"Copy",variant:"default"}))return;const{error:d}=await L(s);d?E(`Error copying subscriptions: ${d}`):G(`Subscriptions copied from ${s} to ${o}`)},J=s=>{N===s?R(P==="asc"?"desc":"asc"):(ne(s),R("asc"))};return l?e.jsx("div",{className:"p-4",children:"Loading subscriptions..."}):M?e.jsxs("div",{className:"p-4 text-red-600",children:["Error: ",M]}):e.jsxs("div",{className:"h-full flex flex-col p-4","data-testid":"subscriptions-container",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{path:ge,size:1,className:"text-gray-500"}),e.jsx("input",{"data-testid":"subscriptions-search",type:"text",placeholder:i("helpPanel.subscriptions.searchPlaceholder"),value:f,onChange:s=>a(s.target.value),className:"px-3 py-2 border rounded-lg"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[$.length," of ",g.length]})]}),e.jsxs("div",{className:"flex gap-2","data-testid":"import-export-buttons",children:[e.jsx(Pe,{dataType:"event_subscriptions",data:g,additionalData:{supabase:X,eventYear:o},filename:`subscriptions-${o}-${new Date().toISOString().split("T")[0]}`}),e.jsx(Ee,{dataType:"event_subscriptions",existingData:g,eventYear:o,additionalData:{supabase:X,selectedYear:o},onImportComplete:async()=>{await T()}}),e.jsxs("button",{onClick:ue,"data-testid":"copy-from-previous-year-button",className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",title:`Copy from ${o-1}`,children:[e.jsx(p,{path:fe,size:.8}),"Copy from ",o-1]}),e.jsxs("button",{onClick:xe,"data-testid":"archive-year-button",className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700",children:[e.jsx(p,{path:ye,size:.8}),"Archive ",o]}),e.jsxs("button",{onClick:()=>u(!0),"data-testid":"subscribe-company-button",className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(p,{path:je,size:.8}),"Subscribe Company"]})]})]}),h&&e.jsxs("div",{className:"mb-4 p-4 border rounded-lg bg-blue-50 flex-shrink-0",children:[e.jsxs("h3",{className:"font-bold mb-3",children:["Subscribe Company to ",o]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:S,onChange:s=>B(s.target.value),className:"flex-1 px-3 py-2 border rounded",children:[e.jsx("option",{value:"",children:"Select a company..."}),V.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsxs("button",{onClick:be,className:"flex items-center gap-1 px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:[e.jsx(p,{path:Ne,size:.7}),"Subscribe"]}),e.jsxs("button",{onClick:()=>{u(!1),B("")},className:"flex items-center gap-1 px-3 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:[e.jsx(p,{path:ve,size:.7}),"Cancel"]})]}),V.length===0&&e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["All companies are already subscribed to ",o]})]}),e.jsxs("div",{className:"flex-1 overflow-auto border rounded-lg","data-testid":"subscriptions-table",children:[e.jsxs("table",{className:"w-full",style:{fontSize:"11px"},children:[e.jsxs("thead",{className:"bg-gray-100 text-gray-900 sticky top-0 z-10",children:[e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left border-b cursor-pointer hover:bg-gray-200 select-none bg-gray-100",onClick:()=>J("booths"),title:"Click to sort by booth labels",rowSpan:3,children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"Booths"}),N==="booths"&&e.jsx(p,{path:P==="asc"?K:Q,size:.6,className:"text-blue-600"})]})}),e.jsx("th",{className:"p-2 text-left border-b cursor-pointer hover:bg-gray-200 select-none bg-gray-100",onClick:()=>J("company"),title:"Click to sort by company name",rowSpan:3,children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"Company"}),N==="company"&&e.jsx(p,{path:P==="asc"?K:Q,size:.6,className:"text-blue-600"})]})}),e.jsx("th",{className:"p-2 text-left border-b bg-gray-100",rowSpan:3,children:i("helpPanel.subscriptions.contact")}),e.jsx("th",{className:"p-2 text-left border-b bg-gray-100",rowSpan:3,children:i("helpPanel.subscriptions.phone")}),e.jsx("th",{className:"p-2 text-left border-b bg-gray-100",rowSpan:3,children:i("helpPanel.subscriptions.email")}),e.jsx("th",{className:"p-2 text-center border-b bg-gray-100",children:i("helpPanel.subscriptions.boothCount")}),e.jsx("th",{className:"p-2 text-left border-b bg-gray-100",rowSpan:3,children:i("helpPanel.subscriptions.area")}),e.jsx("th",{className:"p-2 text-center border-b bg-blue-50",colSpan:3,children:e.jsx("span",{className:"font-bold text-blue-700",children:i("helpPanel.subscriptions.saturday")})}),e.jsx("th",{className:"p-2 text-center border-b bg-gray-100",colSpan:2,children:e.jsx("span",{className:"font-bold text-green-700",children:i("helpPanel.subscriptions.sunday")})}),e.jsx("th",{className:"p-2 text-center border-b bg-gray-100",children:i("helpPanel.subscriptions.coins")}),e.jsx("th",{className:"p-2 text-left border-b bg-gray-100",rowSpan:3,children:i("helpPanel.subscriptions.notes")}),e.jsx("th",{className:"p-2 text-center border-b bg-gray-100",rowSpan:3,style:{minWidth:"80px"},children:i("helpPanel.subscriptions.actions")})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"p-1 text-center border-b bg-gray-100 text-xs",style:{width:"60px"}}),e.jsx("th",{className:"p-1 text-center border-b bg-blue-50 text-xs",style:{width:"60px"},children:i("helpPanel.subscriptions.breakfast")}),e.jsx("th",{className:"p-1 text-center border-b bg-blue-50 text-xs",style:{width:"60px"},children:i("helpPanel.subscriptions.lunch")}),e.jsx("th",{className:"p-1 text-center border-b bg-blue-50 text-xs",style:{width:"60px"},children:i("helpPanel.subscriptions.bbq")}),e.jsx("th",{className:"p-1 text-center border-b bg-green-50 text-xs",style:{width:"60px"},children:i("helpPanel.subscriptions.breakfast")}),e.jsx("th",{className:"p-1 text-center border-b bg-green-50 text-xs",style:{width:"60px"},children:i("helpPanel.subscriptions.lunch")}),e.jsx("th",{className:"p-1 text-center border-b bg-gray-100 text-xs",style:{width:"60px"}})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"p-1 text-center border-b bg-gray-200 text-xs font-bold",style:{width:"60px"},children:j.booth_count}),e.jsx("th",{className:"p-1 text-center border-b bg-blue-100 text-xs font-bold text-blue-800",style:{width:"60px"},children:j.breakfast_sat}),e.jsx("th",{className:"p-1 text-center border-b bg-blue-100 text-xs font-bold text-blue-800",style:{width:"60px"},children:j.lunch_sat}),e.jsx("th",{className:"p-1 text-center border-b bg-blue-100 text-xs font-bold text-blue-800",style:{width:"60px"},children:j.bbq_sat}),e.jsx("th",{className:"p-1 text-center border-b bg-green-100 text-xs font-bold text-green-800",style:{width:"60px"},children:j.breakfast_sun}),e.jsx("th",{className:"p-1 text-center border-b bg-green-100 text-xs font-bold text-green-800",style:{width:"60px"},children:j.lunch_sun}),e.jsx("th",{className:"p-1 text-center border-b bg-gray-200 text-xs font-bold",style:{width:"60px"},children:j.coins})]})]}),e.jsx("tbody",{children:$.map(s=>{const t=s.company,d=I(s.company_id);return e.jsxs("tr",{className:"bg-white hover:bg-gray-50 border-b",children:[e.jsx("td",{className:"p-2 text-left",children:e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded font-medium",children:d})}),e.jsx("td",{className:"p-2 text-left",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{...(()=>{const c=(t==null?void 0:t.logo)||r,x=ae(c);return x?{src:x.src,srcSet:x.srcSet,sizes:x.sizes}:{src:re(c)}})(),alt:t==null?void 0:t.name,className:"w-8 h-8 object-contain"}),e.jsx("span",{className:"font-semibold text-gray-700",children:t==null?void 0:t.name})]})}),e.jsx("td",{className:"p-2 text-left",children:e.jsx("span",{className:"text-xs text-gray-700",children:s.contact||"-"})}),e.jsx("td",{className:"p-2 text-left",children:s.phone?e.jsxs("span",{className:"text-xs text-gray-700 flex items-center gap-1",children:[e.jsx("span",{children:Ie(s.phone)}),e.jsx("span",{children:$e(s.phone)})]}):e.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),e.jsx("td",{className:"p-2 text-left",children:e.jsx("span",{className:"text-xs text-gray-700",children:s.email||"-"})}),e.jsx("td",{className:"p-2 text-center",children:e.jsx("span",{className:"text-xs text-gray-700",children:s.booth_count})}),e.jsx("td",{className:"p-2",children:e.jsx("span",{className:"text-xs text-gray-700",children:s.area||"-"})}),["breakfast_sat","lunch_sat","bbq_sat"].map(c=>e.jsx("td",{className:"p-2 text-center bg-blue-50",children:e.jsx("span",{className:"text-xs text-gray-700",children:s[c]})},c)),["breakfast_sun","lunch_sun"].map(c=>e.jsx("td",{className:"p-2 text-center bg-green-50",children:e.jsx("span",{className:"text-xs text-gray-700",children:s[c]})},c)),e.jsx("td",{className:"p-2 text-center",children:e.jsx("span",{className:"text-xs text-gray-700",children:s.coins})}),e.jsx("td",{className:"p-2 text-left",children:e.jsx("span",{className:"text-xs text-gray-700",children:s.notes||"-"})}),e.jsx("td",{className:"p-2 text-center",children:e.jsxs("div",{className:"flex gap-1 justify-center",children:[e.jsx("button",{onClick:()=>ce(s),className:"p-1 bg-blue-600 text-white rounded hover:bg-blue-700",title:"Edit",children:e.jsx(p,{path:_e,size:.6})}),e.jsx("button",{onClick:()=>me(s),className:"p-1 bg-red-600 text-white rounded hover:bg-red-700",title:"Unsubscribe",children:e.jsx(p,{path:we,size:.6})})]})})]},s.id)})})]}),$.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:f?"No subscriptions found matching your search":`No companies subscribed to ${o} yet. Click "Subscribe Company" to add one.`})]}),e.jsx(ze,{isOpen:le,onClose:de,subscription:W,onSave:ie})]})}export{Ze as default};
