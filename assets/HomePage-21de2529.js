import{a as T,u as k,b as z,g as P,R as u,j as e,c as v,d as D,P as h}from"./index-260573d4.js";import{u as E}from"./useEventMapSettings-89340045.js";import{L as I}from"./LanguageToggle-de18459f.js";import{u as Y}from"./useCountViews-0ffe5588.js";function w({selectedYear:j,branding:g}){T();const{t:n,i18n:f}=k(),{organizationLogo:l,organizationLogoRaw:c,loading:_}=z();console.log("[HomePage] organizationLogo:",l),console.log("[HomePage] loading:",_);const F=P(c),[y,$]=u.useState(F),[C,N]=u.useState(!1);u.useEffect(()=>{if(!l||l===y)return;let s=!1;const a=new Image;return a.onload=()=>{s||($(l),N(!0))},a.onerror=()=>{s||N(!1)},a.src=l,()=>{s=!0}},[l,c]);const{count:b,loading:p}=Y(j),[L,S]=u.useState(null);u.useEffect(()=>{p||S(b)},[p,b]);const H={name:(g==null?void 0:g.eventName)||"4x4 Vakantiebeurs"},{settings:t}=E(j),R=((s,a)=>{if(!s&&!a)return null;const o=(f==null?void 0:f.language)||"en-US";if(s&&a){const r=new Date(s),i=new Date(a);if(r.getFullYear()===i.getFullYear()){if(r.getMonth()===i.getMonth())return`${r.toLocaleString(o,{month:"long"})} ${r.getDate()}-${i.getDate()}, ${r.getFullYear()}`;const d=`${r.toLocaleString(o,{month:"short"})} ${r.getDate()}`,x=`${i.toLocaleString(o,{month:"short"})} ${i.getDate()}, ${i.getFullYear()}`;return`${d} - ${x}`}return`${r.toLocaleDateString(o)} - ${i.toLocaleDateString(o)}`}return(s?new Date(s):new Date(a)).toLocaleDateString(o,{year:"numeric",month:"long",day:"numeric"})})(t==null?void 0:t.event_start_date,t==null?void 0:t.event_end_date);return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20 md:pb-0",children:[e.jsx("div",{className:"bg-white shadow-sm",children:e.jsxs("div",{className:"max-w-screen-xl mx-auto px-4 py-8 text-center",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(I,{})}),l&&e.jsx("div",{className:"mb-6",children:(()=>{const s=v(l)||v(c),a=D(c||y||l);return e.jsxs("picture",{children:[s&&s.srcSet&&e.jsx("source",{srcSet:s.srcSet,sizes:s.sizes,type:"image/webp"}),e.jsx("img",{src:s?s.src:a,alt:H.name,className:"h-24 mx-auto object-contain",onError:o=>{const m=parseInt(o.target.dataset.logoRetries||"0",10),r=d=>!d||o.target.src===d?!1:(o.target.src=d,o.target.srcset="",o.target.dataset.logoRetries=String(m+1),!0);if(m===0&&c&&c.startsWith("http")&&(console.log("[HomePage] Logo error, trying raw URL:",c),r(c)))return;if(m<=1){const x=D(c||l);if(console.log("[HomePage] Logo error, trying normalized fallback:",x),r(x))return}const i=P(c);console.log("[HomePage] Logo error, final fallback to default:",i),r(i)}})]})})()}),e.jsx("p",{className:"text-sm text-orange-600 mb-2",style:{fontFamily:g==null?void 0:g.fontFamily},children:n("homePage.subtitle")}),e.jsx("h1",{className:"text-4xl font-bold text-orange-600 mb-4",style:{fontFamily:g==null?void 0:g.fontFamily},children:n("homePage.title")}),e.jsx("p",{className:"text-lg text-gray-600 mb-6",children:R||n("homePage.eventDate")}),e.jsxs("div",{className:"flex justify-center gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:p||L===null?"...":L}),e.jsx("div",{className:"text-sm text-gray-600",children:n("homePage.exhibitors")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:(()=>{if(t!=null&&t.event_start_date||t!=null&&t.event_end_date)try{const s=t!=null&&t.event_start_date?new Date(t.event_start_date):null,a=t!=null&&t.event_end_date?new Date(t.event_end_date):null;if(s&&a){const m=Math.round((a-s)/864e5)+1;return m>0?m:1}return 1}catch{return 2}return 2})()}),e.jsx("div",{className:"text-sm text-gray-600",children:n("homePage.days")})]})]})]})}),e.jsx("div",{className:"max-w-screen-xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"üïí"}),n("homePage.openingHours")]}),e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:n("homePage.openingHoursInfo")})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"üìç"}),n("homePage.location")]}),e.jsx("p",{className:"text-gray-700 whitespace-pre-line",children:n("homePage.locationInfo")})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx("span",{children:"üÖøÔ∏è"}),n("homePage.parking")]}),e.jsx("p",{className:"text-gray-700",children:n("homePage.parkingInfo")})]})]})})]})}w.propTypes={selectedYear:h.number,branding:h.shape({eventName:h.string,fontFamily:h.string})};w.defaultProps={selectedYear:new Date().getFullYear(),branding:null};export{w as default};
