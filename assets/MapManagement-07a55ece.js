import{u as ye,r as v,a3 as ve,j as e,I as M,a4 as je,a5 as we,a6 as Ne,m as Se,e as Ce,f as Me,s as _,g as Pe,c as Ee,a7 as ze,a8 as Ae,i as Ie}from"./index-f3aaddb5.js";import{P as De}from"./ProtectedSection-44986451.js";import{g as K,E as Ue,h as Le}from"./EventMap-0a96d5d1.js";import{u as Be}from"./useUserRole-b0f40ae7.js";import"./getDefaultLogo-7dd9d292.js";import"./useTranslatedCompanyInfo-bff645d3.js";import"./useCategories-8e231f0a.js";import"./useEventSubscriptions-c9fd5a7d.js";import"./phone-376c158e.js";import"./useAssignments-6054e26b.js";import"./index-9c824e12.js";import"./useEventMapSettings-65e41045.js";function Ze({markersState:t,setMarkersState:u,updateMarker:x,selectedYear:c,archiveMarkers:S,copyMarkers:o}){const{t:m}=ye(),{isEventManager:H,isSystemManager:O,isSuperAdmin:l}=Be(),[D,re]=v.useState(""),[C,Q]=v.useState(null),[F,P]=v.useState(!1),[h,E]=v.useState(null),[W,le]=v.useState("id"),[U,ie]=v.useState("asc"),[z,Z]=v.useState([]),{confirm:Y,toastError:R,toastSuccess:k}=ve(),[w,oe]=v.useState(null),[ee,q]=v.useState(!1),[te,ce]=v.useState([]),[de,T]=v.useState(!1),f=H;v.useEffect(()=>{async function s(){try{const[a,n]=await Promise.all([_.from("markers_core").select("*").in("id",[-1,-2]).eq("event_year",0),_.from("markers_appearance").select("*").in("id",[-1,-2]).eq("event_year",0)]);if(a.error)throw a.error;if(n.error)throw n.error;const r=(a.data||[]).map(i=>{const d=(n.data||[]).find(y=>y.id===i.id)||{};return{...i,...d}});Z(r)}catch(a){console.error("Error fetching default markers:",a)}}s()},[]);const se=v.useMemo(()=>{if(!t)return z;const a=[...t.filter(n=>{var i,d;const r=D.toLowerCase();return n.id.toString().includes(r)||((i=n.glyph)==null?void 0:i.toLowerCase().includes(r))||((d=n.name)==null?void 0:d.toLowerCase().includes(r))})].sort((n,r)=>{let i=0;switch(W){case"id":i=n.id-r.id;break;case"name":i=(n.glyph||n.name||"").localeCompare(r.glyph||r.name||"");break;case"type":n.id>=1e3!=r.id>=1e3?i=n.id>=1e3?-1:1:i=n.id-r.id;break;default:i=n.id-r.id}return U==="desc"?-i:i});return D?a:[...[...z].sort((r,i)=>i.id-r.id),...a]},[t,z,D,W,U]),g=v.useMemo(()=>{if(!C)return null;const s=z.find(a=>a.id===C);return s||(t==null?void 0:t.find(a=>a.id===C))},[C,t,z]),he=s=>{Q(s.id),P(!1)},ue=()=>{g&&(E({...g}),P(!0))},ge=()=>{E(null),P(!1)},pe=async()=>{if(!h)return;const s=h.id===-1||h.id===-2;try{if(s){const a={rectWidth:h.rectWidth,rectHeight:h.rectHeight},n={iconUrl:h.iconUrl,iconSize:h.iconSize,glyphColor:h.glyphColor,glyphSize:h.glyphSize,shadowScale:h.shadowScale},[r,i]=await Promise.all([_.from("markers_core").update(a).eq("id",h.id).eq("event_year",0),_.from("markers_appearance").update(n).eq("id",h.id).eq("event_year",0)]);if(r.error)throw r.error;if(i.error)throw i.error;Z(d=>d.map(y=>y.id===h.id?{...y,...h}:y))}else{const a={};if(Object.keys(h).forEach(n=>{h[n]!==g[n]&&(a[n]=h[n])}),Object.keys(a).length===0){P(!1),E(null);return}u(n=>n.map(r=>r.id===h.id?{...r,...h}:r)),await x(h.id,a)}P(!1),E(null)}catch(a){console.error("Error saving marker:",a),R("Failed to save marker. Please try again.")}},xe=(s,a)=>{E(n=>({...n,[s]:a}))},me=async()=>{if(f||!await Y({title:"Archive Markers",message:`Archive all markers for ${c}? This will move them to the archive and clear the current year.`,confirmText:"Archive",variant:"warning"}))return;const{error:a}=await S();a?R(`Error archiving markers: ${a}`):k(`Successfully archived markers for ${c}`)},ae=async()=>{if(f)return;const s=c-1;if(!await Y({title:"Copy Markers",message:`Copy all markers from ${s} to ${c}?`,confirmText:"Copy",variant:"default"}))return;const{error:n}=await o(s);n?R(`Error copying markers: ${n}`):k(`Markers copied from ${s} to ${c}`)},be=async s=>{if(!w||!w.printControl||!s)return;T(!0);const a=w.printControl,n=(a==null?void 0:a.browserPrint)||a;let r=null,i=!1,d=!1;const y=()=>{if(!w||!(window.L&&window.L.BrowserPrint&&window.L.BrowserPrint.Event))return;const N=window.L.BrowserPrint.Event;try{w.off(N.PrintStart,L),w.off(N.PrintEnd,B),w.off(N.PrintCancel,$)}catch{}r&&(clearTimeout(r),r=null)},L=()=>{i=!0},B=()=>{d=!0,y()},$=()=>{d=!0,y()};try{if(window.L&&window.L.BrowserPrint&&window.L.BrowserPrint.Event){const j=window.L.BrowserPrint.Event;w.on(j.PrintStart,L),w.on(j.PrintEnd,B),w.on(j.PrintCancel,$)}try{if(typeof n.print=="function")n.print(s);else if(typeof(a==null?void 0:a._printMode)=="function")a._printMode(s);else throw new Error("No browser print API available")}catch(j){console.warn("Header BrowserPrint call failed:",j),y(),await V();return}await(()=>new Promise(j=>{if(i)return j("started");r=setTimeout(()=>j("timeout"),2500);const fe=setInterval(()=>{(i||d)&&(clearInterval(fe),r&&(clearTimeout(r),r=null),j(i?"started":"finished"))},80)}))()==="timeout"&&(console.warn("Header BrowserPrint did not start; falling back to snapshot export"),y(),await V())}finally{T(!1)}},V=async()=>{var s;if(!de){T(!0);try{const a=document.querySelector("#map-container")||document.querySelector(".leaflet-container");if(!a)return;await new Promise(A=>setTimeout(A,400));const r=(await Le(a,{useCORS:!0,allowTaint:!0,logging:!1,backgroundColor:"#ffffff",scale:2,ignoreElements:A=>{var j;return(j=A.classList)==null?void 0:j.contains("map-controls-print-hide")}})).toDataURL("image/png",1),i=window.open("","_blank","width=900,height=700");if(!i)return;const d=i.document;d.open();const y=d.createElement("head"),L=d.createElement("title");L.textContent="Map Print";const B=d.createElement("style");B.textContent="*{margin:0;padding:0}body{display:flex;justify-content:center;align-items:center;min-height:100vh;background:white}img{max-width:100%;max-height:100vh;object-fit:contain}@media print{img{width:100%;height:auto}}",y.appendChild(L),y.appendChild(B);const $=d.createElement("body"),N=d.createElement("img");for(N.src=r,N.alt="Map",N.onload=()=>setTimeout(()=>{try{i.print()}catch{}},100),$.appendChild(N);(s=d.documentElement)!=null&&s.firstChild;)d.documentElement.removeChild(d.documentElement.firstChild);d.documentElement.appendChild(y),d.documentElement.appendChild($),d.close(),i.document.close(),i.onafterprint=()=>i.close()}catch(a){console.error("Snapshot print failed:",a);try{R("Snapshot failed — map tiles may be blocked by CORS or the service worker. Use the Print Map plugin preset or enable CORS for your tile provider.")}catch{}window.print()}finally{T(!1)}}},G=g&&(g.id===-1||g.id===-2),J=g&&g.id>=1e3,X=g&&g.id>0&&g.id<1e3,ne=s=>{const a=z.find(r=>r.id===(s?-1:-2));if(!(a!=null&&a.iconUrl))return s?"Blue (assigned)":"Gray (unassigned)";const n=a.iconUrl.match(/glyph-marker-icon-(\w+)\.svg/);return n?`${n[1].charAt(0).toUpperCase()+n[1].slice(1)} (${s?"assigned":"unassigned"})`:s?"Blue (assigned)":"Gray (unassigned)"};return e.jsx(De,{requiredRole:["super_admin","system_manager","event_manager"],children:e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:f?"Event Map Viewer":m("mapManagement.title")}),e.jsx("div",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:c})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>q(s=>!s),className:`flex items-center gap-2 px-4 py-2 ${f?"bg-gray-600 text-white hover:bg-gray-700":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"} rounded-lg`,title:"Print map","aria-haspopup":"menu","aria-expanded":ee,children:[e.jsx(M,{path:je,size:.8}),"Print Map"]}),ee&&e.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg z-40 overflow-hidden",children:te.length>0?e.jsx("div",{className:"py-1",children:te.map((s,a)=>{var n,r;return e.jsx("button",{type:"button",onClick:async()=>{q(!1),await be(s)},className:"w-full text-left px-4 py-2 hover:bg-gray-50",children:((n=s==null?void 0:s.options)==null?void 0:n.title)||((r=s==null?void 0:s.options)==null?void 0:r.pageSize)||`Preset ${a+1}`},a)})}):e.jsx("div",{className:"py-1",children:e.jsx("button",{type:"button",onClick:async()=>{q(!1),await V()},className:"w-full text-left px-4 py-2 hover:bg-gray-50",children:"Snapshot (PNG)"})})})]}),!f&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:ae,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",title:`Copy markers from ${c-1}`,children:[e.jsx(M,{path:we,size:.8}),"Copy from ",c-1]}),e.jsxs("button",{onClick:me,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:((t==null?void 0:t.length)||0)===0,title:`Archive all markers for ${c}`,children:[e.jsx(M,{path:Ne,size:.8}),"Archive ",c]})]})]})]}),se.length===0&&!D&&e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-6 mb-4",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:["No Markers Found for ",c]}),e.jsx("p",{className:"text-blue-700 mb-4",children:f?`There are no markers configured for ${c}. Please contact your system administrator.`:`There are no markers configured for ${c}. You can copy markers from the previous year or create new ones.`}),!f&&e.jsxs("button",{onClick:ae,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:["Copy from ",c-1]})]})}),!f&&e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(M,{path:Se,size:1,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:m("mapManagement.searchPlaceholder"),value:D,onChange:s=>re(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex items-center border border-gray-300 rounded-md shadow-sm bg-white w-64",children:[e.jsxs("select",{value:W,onChange:s=>le(s.target.value),className:"flex-1 pl-3 pr-3 py-1.5 border-0 rounded-l-md bg-white text-gray-900 text-sm focus:ring-0 appearance-none","aria-label":m("mapManagement.sortBy"),children:[e.jsx("option",{value:"id",children:m("mapManagement.sortId")}),e.jsx("option",{value:"name",children:m("mapManagement.sortName")}),e.jsx("option",{value:"type",children:m("mapManagement.sortType")})]}),e.jsx("button",{type:"button",onClick:()=>ie(U==="asc"?"desc":"asc"),"aria-label":`Toggle sort direction to ${U==="asc"?"descending":"ascending"}`,className:"px-2 py-1.5 border-l border-gray-300 text-gray-500 hover:bg-gray-50 rounded-r-md",children:e.jsx(M,{path:U==="asc"?Ce:Me,size:.8})})]})]})]}),e.jsxs("div",{className:"flex h-[calc(100vh-150px)]",children:[!f&&e.jsx("div",{className:"w-64 border-r border-gray-200 overflow-y-auto flex-shrink-0",children:e.jsx("div",{className:"p-2",children:se.map(s=>{const a=s.id===C,n=s.id===-1||s.id===-2,r=s.id>=1e3;return e.jsx("button",{onClick:()=>he(s),className:`w-full text-left p-3 rounded-lg mb-2 transition-colors ${a?"bg-blue-50 border-2 border-blue-500":n?"bg-amber-50 border-2 border-amber-300 hover:bg-amber-100":"bg-white border border-gray-200 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[s.iconUrl?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:K(s.iconUrl),alt:"icon",className:"w-6 h-6"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-orange-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"•"})})]}):e.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center text-xs text-gray-600",children:"D"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-semibold text-gray-900 truncate",children:n?s.id===-1?"Assigned Booth Default":"Unassigned Booth Default":s.glyph||`Marker ${s.id}`}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",s.id,n&&" ⚙️ Global Default",r&&" (Special)"]}),s.name&&e.jsx("div",{className:"text-xs text-gray-600 truncate",children:s.name})]})]})},s.id)})})}),e.jsx("div",{className:"flex-1 relative bg-gray-50",children:e.jsx(Ue,{isAdminView:!0,previewUseVisitorSizing:!0,markersState:t,updateMarker:f?null:x,selectedYear:c,selectedMarkerId:C,editMode:!f&&F,onMarkerSelect:s=>{Q(s),f||P(!1)},onMarkerDrag:(s,a,n)=>{!f&&F&&C===s&&E(r=>({...r,lat:a,lng:n}))},onMapReady:s=>{var n,r;oe(s);const a=((r=(n=s==null?void 0:s.printControl)==null?void 0:n.options)==null?void 0:r.printModes)||[];ce(Array.isArray(a)?a:[])}})}),!f&&e.jsx("div",{className:"w-96 border-l border-gray-200 overflow-y-auto p-6 flex-shrink-0",children:g?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:G?g.id===-1?"Assigned Booth Default":"Unassigned Booth Default":g.glyph||`Marker ${g.id}`}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",g.id,G&&" ⚙️ Global Default for Booth Markers",J&&" (Special Marker)",X&&" (Booth - Content managed via Companies/Assignments)"]})]}),!F&&!f&&e.jsx("button",{onClick:ue,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Edit"})]}),F?e.jsx(Fe,{marker:h,isDefaultMarker:G,isSpecialMarker:J,isBoothMarker:X,getDefaultColorName:ne,onChange:xe,onSave:pe,onCancel:ge}):e.jsx($e,{marker:g,isSpecialMarker:J,isDefaultMarker:G,isBoothMarker:X,getDefaultColorName:ne})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:m("mapManagement.selectMarker")})})]})]})})}function $e({marker:t,isSpecialMarker:u,isDefaultMarker:x,isBoothMarker:c,getDefaultColorName:S}){var o;return e.jsxs("div",{className:"space-y-6",children:[x&&e.jsxs("div",{className:"bg-amber-50 border-2 border-amber-300 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-amber-900 mb-2",children:"ℹ️ About Default Markers"}),e.jsx("p",{className:"text-sm text-amber-800 mb-2",children:t.id===-1?"This defines the default appearance for booth markers (ID < 1000) that have a company assigned.":"This defines the default appearance for booth markers (ID < 1000) that have no company assigned."}),e.jsx("p",{className:"text-sm text-amber-800",children:"Individual booth markers can override these defaults by having their own values in the Appearance table."})]}),!x&&e.jsxs(I,{title:"Position & Structure",children:[e.jsx(p,{label:"Latitude",value:t.lat}),e.jsx(p,{label:"Longitude",value:t.lng}),e.jsx(p,{label:"Rectangle",value:JSON.stringify(t.rectangle)}),e.jsx(p,{label:"Angle",value:t.angle||0})]}),e.jsxs(I,{title:x?"Default Visual Styling":"Visual Styling",children:[e.jsx(p,{label:"Icon",children:t.iconUrl?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:K(t.iconUrl),alt:"icon",className:"w-8 h-8"}),e.jsx("span",{className:"text-xs text-orange-600 font-medium",children:"Custom Color"})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded flex items-center justify-center text-[9px] text-gray-600 font-medium leading-none",children:"Default"}),e.jsx("span",{className:"text-xs text-blue-600 font-medium",children:c?S(((o=t.assignments)==null?void 0:o.length)>0):"Based on marker type"})]})}),e.jsx(p,{label:"Icon Size",value:JSON.stringify(t.iconSize)}),!x&&e.jsx(p,{label:"Glyph (Booth Label)",value:t.glyph}),e.jsx(p,{label:"Glyph Color",value:t.glyphColor}),e.jsx(p,{label:"Glyph Size",value:t.glyphSize}),e.jsx(p,{label:"Glyph Anchor",value:t.glyphAnchor?JSON.stringify(t.glyphAnchor):"—"}),e.jsx(p,{label:"Shadow Scale",value:t.shadowScale??"1.0"}),x&&e.jsxs(e.Fragment,{children:[e.jsx(p,{label:"Rectangle Width",value:t.rectWidth}),e.jsx(p,{label:"Rectangle Height",value:t.rectHeight})]})]}),u&&e.jsxs(I,{title:"Content (Special Marker)",children:[e.jsx(p,{label:"Name",value:t.name}),e.jsx(p,{label:"Logo",children:t.logo&&e.jsx("img",{...(()=>{const m=Pe(t.logo);return m?{src:m.src,srcSet:m.srcSet,sizes:m.sizes}:{src:Ee(t.logo)}})(),alt:"logo",className:"w-12 h-12"})}),e.jsx(p,{label:"Website",value:t.website}),e.jsx(p,{label:"Info",value:t.info})]})]})}function Fe({marker:t,isDefaultMarker:u,isSpecialMarker:x,isBoothMarker:c,getDefaultColorName:S,onChange:o,onSave:m,onCancel:H}){var O;return e.jsxs("div",{className:"space-y-6",children:[u&&e.jsxs("div",{className:"bg-amber-50 border-2 border-amber-300 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-amber-900 mb-2",children:"⚙️ Editing Global Defaults"}),e.jsx("p",{className:"text-sm text-amber-800 mb-2",children:t.id===-1?"Changes here will affect all booth markers (ID < 1000) that have a company assigned, unless they have individual overrides.":"Changes here will affect all booth markers (ID < 1000) that have no company assigned, unless they have individual overrides."})]}),!u&&e.jsxs(I,{title:"Position & Structure",children:[e.jsx(b,{label:"Latitude",type:"number",step:"0.0001",value:t.lat,onChange:l=>o("lat",parseFloat(l))}),e.jsx(b,{label:"Longitude",type:"number",step:"0.0001",value:t.lng,onChange:l=>o("lng",parseFloat(l))}),e.jsx(b,{label:"Angle",type:"number",step:"0.1",value:t.angle||0,onChange:l=>o("angle",parseFloat(l))})]}),e.jsxs(I,{title:u?"Default Visual Styling":"Visual Styling",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Icon"}),e.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[e.jsx("button",{onClick:()=>o("iconUrl",null),className:`w-10 h-10 border-2 rounded-lg transition-all flex items-center justify-center ${t.iconUrl?"border-gray-200 hover:border-gray-400":"border-blue-500 bg-blue-50"}`,title:"Use default color based on assignment status",children:e.jsx("div",{className:"text-[9px] text-gray-600 font-medium leading-none",children:"Default"})}),ze.map(l=>e.jsx("button",{onClick:()=>o("iconUrl",l),className:`p-2 border-2 rounded-lg transition-all ${t.iconUrl===l?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-400"}`,children:e.jsx("img",{src:K(l),alt:l,className:"w-8 h-8"})},l))]}),t.iconUrl?e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Using custom color override"}):e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Using default color: ",c?S(((O=t.assignments)==null?void 0:O.length)>0):"Based on marker type"]})]}),!u&&e.jsx(b,{label:"Glyph (Booth Label)",value:t.glyph,onChange:l=>o("glyph",l)}),e.jsx(b,{label:"Glyph Color",type:"color",value:t.glyphColor,onChange:l=>o("glyphColor",l)}),e.jsx(b,{label:"Glyph Size",type:"number",step:"0.01",value:t.glyphSize,onChange:l=>o("glyphSize",parseFloat(l))}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(b,{label:"Glyph Anchor X",type:"number",step:"0.01",value:t.glyphAnchor?t.glyphAnchor[0]:"",onChange:l=>o("glyphAnchor",[parseFloat(l)||0,t.glyphAnchor&&t.glyphAnchor[1]||0])}),e.jsx(b,{label:"Glyph Anchor Y",type:"number",step:"0.01",value:t.glyphAnchor?t.glyphAnchor[1]:"",onChange:l=>o("glyphAnchor",[t.glyphAnchor&&t.glyphAnchor[0]||0,parseFloat(l)||0])})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(b,{label:"Icon Width",type:"number",step:"0.01",value:t.iconSize?t.iconSize[0]:"",onChange:l=>o("iconSize",[parseFloat(l)||null,t.iconSize?t.iconSize[1]:null])}),e.jsx(b,{label:"Icon Height",type:"number",step:"0.01",value:t.iconSize?t.iconSize[1]:"",onChange:l=>o("iconSize",[t.iconSize?t.iconSize[0]:null,parseFloat(l)||null])})]}),e.jsx(b,{label:"Shadow Scale",type:"number",step:"0.01",value:t.shadowScale??1,onChange:l=>o("shadowScale",parseFloat(l))}),u&&e.jsxs(e.Fragment,{children:[e.jsx(b,{label:"Rectangle Width",type:"number",step:"1",value:t.rectWidth,onChange:l=>o("rectWidth",parseFloat(l))}),e.jsx(b,{label:"Rectangle Height",type:"number",step:"1",value:t.rectHeight,onChange:l=>o("rectHeight",parseFloat(l))})]})]}),x&&e.jsxs(I,{title:"Content (Special Marker)",children:[e.jsx(b,{label:"Name",value:t.name,onChange:l=>o("name",l)}),e.jsx(b,{label:"Logo URL",value:t.logo,onChange:l=>o("logo",l)}),e.jsx(b,{label:"Website",value:t.website,onChange:l=>o("website",l)}),e.jsx(Re,{label:"Info",value:t.info,onChange:l=>o("info",l)})]}),c&&e.jsx(e.Fragment,{}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(M,{path:Ae,size:.9}),"Save Changes"]}),e.jsxs("button",{onClick:H,className:"flex items-center gap-2 px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:[e.jsx(M,{path:Ie,size:.9}),"Cancel"]})]})]})}function I({title:t,children:u}){return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:t}),e.jsx("div",{className:"space-y-3",children:u})]})}function p({label:t,value:u,children:x}){return e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:t}),x||e.jsx("div",{className:"text-gray-900",children:u||"—"})]})}function b({label:t,value:u,onChange:x,type:c="text",...S}){const o=c==="color"&&!u?"#000000":u||"";return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),e.jsx("input",{type:c,value:o,"aria-label":t,onChange:m=>x(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",...S})]})}function Re({label:t,value:u,onChange:x}){return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),e.jsx("textarea",{value:u||"",onChange:c=>x(c.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}export{Ze as default};
