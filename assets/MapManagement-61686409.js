import{c as ye,r as y,j as e,I as P,_ as ve}from"./vendor-react-505adfae.js";import{aR as je,aS as we,aT as Ne,ak as Se,al as Ce,am as Me,aU as Pe,ae as Ee}from"./vendor-3a7855fa.js";import{P as Ae}from"./ProtectedSection-f8d87ce8.js";import{g as X,E as ze}from"./EventMap-38901943.js";import{i as Ie,s as R,a as De,b as Ue,I as Le}from"./index-5891cb02.js";import"./vendor-canvas-85f1a6b6.js";import{u as Be}from"./useUserRole-58d31cc8.js";import"./vendor-i18n-2e1fa53c.js";import"./vendor-map-5eb3cb24.js";import"./useTranslatedCompanyInfo-3c4be85b.js";import"./useCategories-6fd5f963.js";import"./vendor-ui-20405275.js";import"./useEventSubscriptions-015b6bb3.js";import"./phone-a3a14bef.js";import"./useAssignments-671cc28d.js";import"./useEventMapSettings-a4b2ca38.js";import"./vendor-supabase-54a3b136.js";function st({markersState:t,setMarkersState:h,updateMarker:g,selectedYear:c,archiveMarkers:S,copyMarkers:o}){const{t:m}=ye(),{isEventManager:G,isSystemManager:H,isSuperAdmin:l}=Be(),[D,ne]=y.useState(""),[C,K]=y.useState(null),[_,E]=y.useState(!1),[d,A]=y.useState(null),[O,re]=y.useState("id"),[U,le]=y.useState("asc"),[z,Q]=y.useState([]),{confirm:Z,toastError:T,toastSuccess:Y}=Ie(),[j,ie]=y.useState(null),[k,W]=y.useState(!1),[ee,oe]=y.useState([]),[ce,$]=y.useState(!1),b=G;y.useEffect(()=>{async function s(){try{const[a,n]=await Promise.all([R.from("markers_core").select("*").in("id",[-1,-2]).eq("event_year",0),R.from("markers_appearance").select("*").in("id",[-1,-2]).eq("event_year",0)]);if(a.error)throw a.error;if(n.error)throw n.error;const r=(a.data||[]).map(i=>{const f=(n.data||[]).find(v=>v.id===i.id)||{};return{...i,...f}});Q(r)}catch(a){console.error("Error fetching default markers:",a)}}s()},[]);const te=y.useMemo(()=>{if(!t)return z;const a=[...t.filter(n=>{var i,f;const r=D.toLowerCase();return n.id.toString().includes(r)||((i=n.glyph)==null?void 0:i.toLowerCase().includes(r))||((f=n.name)==null?void 0:f.toLowerCase().includes(r))})].sort((n,r)=>{let i=0;switch(O){case"id":i=n.id-r.id;break;case"name":i=(n.glyph||n.name||"").localeCompare(r.glyph||r.name||"");break;case"type":n.id>=1e3!=r.id>=1e3?i=n.id>=1e3?-1:1:i=n.id-r.id;break;default:i=n.id-r.id}return U==="desc"?-i:i});return D?a:[...[...z].sort((r,i)=>i.id-r.id),...a]},[t,z,D,O,U]),u=y.useMemo(()=>{if(!C)return null;const s=z.find(a=>a.id===C);return s||(t==null?void 0:t.find(a=>a.id===C))},[C,t,z]),de=s=>{K(s.id),E(!1)},he=()=>{u&&(A({...u}),E(!0))},ue=()=>{A(null),E(!1)},pe=async()=>{if(!d)return;const s=d.id===-1||d.id===-2;try{if(s){const a={rectWidth:d.rectWidth,rectHeight:d.rectHeight},n={iconUrl:d.iconUrl,iconSize:d.iconSize,glyphColor:d.glyphColor,glyphSize:d.glyphSize,shadowScale:d.shadowScale},[r,i]=await Promise.all([R.from("markers_core").update(a).eq("id",d.id).eq("event_year",0),R.from("markers_appearance").update(n).eq("id",d.id).eq("event_year",0)]);if(r.error)throw r.error;if(i.error)throw i.error;Q(f=>f.map(v=>v.id===d.id?{...v,...d}:v))}else{const a={};if(Object.keys(d).forEach(n=>{d[n]!==u[n]&&(a[n]=d[n])}),Object.keys(a).length===0){E(!1),A(null);return}h(n=>n.map(r=>r.id===d.id?{...r,...d}:r)),await g(d.id,a)}E(!1),A(null)}catch(a){console.error("Error saving marker:",a),T("Failed to save marker. Please try again.")}},ge=(s,a)=>{A(n=>({...n,[s]:a}))},me=async()=>{if(b||!await Z({title:"Archive Markers",message:`Archive all markers for ${c}? This will move them to the archive and clear the current year.`,confirmText:"Archive",variant:"warning"}))return;const{error:a}=await S();a?T(`Error archiving markers: ${a}`):Y(`Successfully archived markers for ${c}`)},se=async()=>{if(b)return;const s=c-1;if(!await Z({title:"Copy Markers",message:`Copy all markers from ${s} to ${c}?`,confirmText:"Copy",variant:"default"}))return;const{error:n}=await o(s);n?T(`Error copying markers: ${n}`):Y(`Markers copied from ${s} to ${c}`)},xe=async s=>{if(!j||!j.printControl||!s)return;$(!0);const a=j.printControl,n=(a==null?void 0:a.browserPrint)||a;let r=null,i=!1,f=!1;const v=()=>{if(!j||!(window.L&&window.L.BrowserPrint&&window.L.BrowserPrint.Event))return;const w=window.L.BrowserPrint.Event;try{j.off(w.PrintStart,L),j.off(w.PrintEnd,B),j.off(w.PrintCancel,M)}catch{}r&&(clearTimeout(r),r=null)},L=()=>{i=!0},B=()=>{f=!0,v()},M=()=>{f=!0,v()};try{if(window.L&&window.L.BrowserPrint&&window.L.BrowserPrint.Event){const N=window.L.BrowserPrint.Event;j.on(N.PrintStart,L),j.on(N.PrintEnd,B),j.on(N.PrintCancel,M)}try{if(typeof n.print=="function")n.print(s);else if(typeof(a==null?void 0:a._printMode)=="function")a._printMode(s);else throw new Error("No browser print API available")}catch(N){console.warn("Header BrowserPrint call failed:",N),v(),await V();return}await(()=>new Promise(N=>{if(i)return N("started");r=setTimeout(()=>N("timeout"),2500);const fe=setInterval(()=>{(i||f)&&(clearInterval(fe),r&&(clearTimeout(r),r=null),N(i?"started":"finished"))},80)}))()==="timeout"&&(console.warn("Header BrowserPrint did not start; falling back to snapshot export"),v(),await V())}finally{$(!1)}},V=async()=>{var s;if(!ce){$(!0);try{const a=document.querySelector("#map-container")||document.querySelector(".leaflet-container");if(!a)return;await new Promise(w=>setTimeout(w,400));const n=await ve(()=>import("./printHelpers-60d60172.js"),["assets/printHelpers-60d60172.js","assets/vendor-canvas-85f1a6b6.js"]).then(w=>w.snapshotElementToDataUrl(a,{scale:2})),r=window.open("","_blank","width=900,height=700");if(!r)return;const i=r.document;i.open();const f=i.createElement("head"),v=i.createElement("title");v.textContent="Map Print";const L=i.createElement("style");L.textContent="*{margin:0;padding:0}body{display:flex;justify-content:center;align-items:center;min-height:100vh;background:white}img{max-width:100%;max-height:100vh;object-fit:contain}@media print{img{width:100%;height:auto}}",f.appendChild(v),f.appendChild(L);const B=i.createElement("body"),M=i.createElement("img");for(M.src=n,M.alt="Map",M.onload=()=>setTimeout(()=>{try{r.print()}catch{}},100),B.appendChild(M);(s=i.documentElement)!=null&&s.firstChild;)i.documentElement.removeChild(i.documentElement.firstChild);i.documentElement.appendChild(f),i.documentElement.appendChild(B),i.close(),r.document.close(),r.onafterprint=()=>r.close()}catch(a){console.error("Snapshot print failed:",a);try{T("Snapshot failed — map tiles may be blocked by CORS or the service worker. Use the Print Map plugin preset or enable CORS for your tile provider.")}catch{}window.print()}finally{$(!1)}}},F=u&&(u.id===-1||u.id===-2),q=u&&u.id>=1e3,J=u&&u.id>0&&u.id<1e3,ae=s=>{const a=z.find(r=>r.id===(s?-1:-2));if(!(a!=null&&a.iconUrl))return s?"Blue (assigned)":"Gray (unassigned)";const n=a.iconUrl.match(/glyph-marker-icon-(\w+)\.svg/);return n?`${n[1].charAt(0).toUpperCase()+n[1].slice(1)} (${s?"assigned":"unassigned"})`:s?"Blue (assigned)":"Gray (unassigned)"};return e.jsx(Ae,{requiredRole:["super_admin","system_manager","event_manager"],children:e.jsxs("div",{className:"bg-white rounded-lg shadow","data-testid":"map-management-container",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:b?"Event Map Viewer":m("mapManagement.title")}),e.jsx("div",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:c})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>W(s=>!s),className:`flex items-center gap-2 px-4 py-2 ${b?"bg-gray-600 text-white hover:bg-gray-700":"bg-white text-gray-700 border border-gray-200 hover:bg-gray-50"} rounded-lg`,title:"Print map","aria-haspopup":"menu","aria-expanded":k,children:[e.jsx(P,{path:je,size:.8}),"Print Map"]}),k&&e.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg z-40 overflow-hidden",children:ee.length>0?e.jsx("div",{className:"py-1",children:ee.map((s,a)=>{var n,r;return e.jsx("button",{type:"button",onClick:async()=>{W(!1),await xe(s)},className:"w-full text-left px-4 py-2 hover:bg-gray-50",children:((n=s==null?void 0:s.options)==null?void 0:n.title)||((r=s==null?void 0:s.options)==null?void 0:r.pageSize)||`Preset ${a+1}`},a)})}):e.jsx("div",{className:"py-1",children:e.jsx("button",{type:"button",onClick:async()=>{W(!1),await V()},className:"w-full text-left px-4 py-2 hover:bg-gray-50",children:"Snapshot (PNG)"})})})]}),!b&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:se,"data-testid":"copy-from-year-button",className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",title:`Copy markers from ${c-1}`,children:[e.jsx(P,{path:we,size:.8}),"Copy from ",c-1]}),e.jsxs("button",{onClick:me,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:((t==null?void 0:t.length)||0)===0,title:`Archive all markers for ${c}`,children:[e.jsx(P,{path:Ne,size:.8}),"Archive ",c]})]})]})]}),te.length===0&&!D&&e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-6 mb-4",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:["No Markers Found for ",c]}),e.jsx("p",{className:"text-blue-700 mb-4",children:b?`There are no markers configured for ${c}. Please contact your system administrator.`:`There are no markers configured for ${c}. You can copy markers from the previous year or create new ones.`}),!b&&e.jsxs("button",{onClick:se,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:["Copy from ",c-1]})]})}),!b&&e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(P,{path:Se,size:1,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:m("mapManagement.searchPlaceholder"),value:D,onChange:s=>ne(s.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex items-center border border-gray-300 rounded-md shadow-sm bg-white w-64",children:[e.jsxs("select",{value:O,onChange:s=>re(s.target.value),className:"flex-1 pl-3 pr-3 py-1.5 border-0 rounded-l-md bg-white text-gray-900 text-sm focus:ring-0 appearance-none","aria-label":m("mapManagement.sortBy"),children:[e.jsx("option",{value:"id",children:m("mapManagement.sortId")}),e.jsx("option",{value:"name",children:m("mapManagement.sortName")}),e.jsx("option",{value:"type",children:m("mapManagement.sortType")})]}),e.jsx("button",{type:"button",onClick:()=>le(U==="asc"?"desc":"asc"),"aria-label":`Toggle sort direction to ${U==="asc"?"descending":"ascending"}`,className:"px-2 py-1.5 border-l border-gray-300 text-gray-500 hover:bg-gray-50 rounded-r-md",children:e.jsx(P,{path:U==="asc"?Ce:Me,size:.8})})]})]})]}),e.jsxs("div",{className:"flex h-[calc(100vh-150px)]",children:[!b&&e.jsx("div",{className:"w-64 border-r border-gray-200 overflow-y-auto flex-shrink-0",children:e.jsx("div",{className:"p-2",children:te.map(s=>{const a=s.id===C,n=s.id===-1||s.id===-2,r=s.id>=1e3;return e.jsx("button",{onClick:()=>de(s),className:`w-full text-left p-3 rounded-lg mb-2 transition-colors ${a?"bg-blue-50 border-2 border-blue-500":n?"bg-amber-50 border-2 border-amber-300 hover:bg-amber-100":"bg-white border border-gray-200 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[s.iconUrl?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:X(s.iconUrl),alt:"icon",className:"w-6 h-6"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-orange-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"•"})})]}):e.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded flex items-center justify-center text-xs text-gray-600",children:"D"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-semibold text-gray-900 truncate",children:n?s.id===-1?"Assigned Booth Default":"Unassigned Booth Default":s.glyph||`Marker ${s.id}`}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",s.id,n&&" ⚙️ Global Default",r&&" (Special)"]}),s.name&&e.jsx("div",{className:"text-xs text-gray-600 truncate",children:s.name})]})]})},s.id)})})}),e.jsx("div",{className:"flex-1 relative bg-gray-50",children:e.jsx(ze,{isAdminView:!0,previewUseVisitorSizing:!0,markersState:t,updateMarker:b?null:g,selectedYear:c,selectedMarkerId:C,editMode:!b&&_,onMarkerSelect:s=>{K(s),b||E(!1)},onMarkerDrag:(s,a,n)=>{!b&&_&&C===s&&A(r=>({...r,lat:a,lng:n}))},onMapReady:s=>{var n,r;ie(s);const a=((r=(n=s==null?void 0:s.printControl)==null?void 0:n.options)==null?void 0:r.printModes)||[];oe(Array.isArray(a)?a:[])}})}),!b&&e.jsx("div",{className:"w-96 border-l border-gray-200 overflow-y-auto p-6 flex-shrink-0","data-testid":"marker-properties-panel",children:u?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:F?u.id===-1?"Assigned Booth Default":"Unassigned Booth Default":u.glyph||`Marker ${u.id}`}),e.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",u.id,F&&" ⚙️ Global Default for Booth Markers",q&&" (Special Marker)",J&&" (Booth - Content managed via Companies/Assignments)"]})]}),!_&&!b&&e.jsx("button",{onClick:he,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Edit"})]}),_?e.jsx(Te,{marker:d,isDefaultMarker:F,isSpecialMarker:q,isBoothMarker:J,getDefaultColorName:ae,onChange:ge,onSave:pe,onCancel:ue}):e.jsx(_e,{marker:u,isSpecialMarker:q,isDefaultMarker:F,isBoothMarker:J,getDefaultColorName:ae})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:m("mapManagement.selectMarker")})})]})]})})}function _e({marker:t,isSpecialMarker:h,isDefaultMarker:g,isBoothMarker:c,getDefaultColorName:S}){var o;return e.jsxs("div",{className:"space-y-6",children:[g&&e.jsxs("div",{className:"bg-amber-50 border-2 border-amber-300 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-amber-900 mb-2",children:"ℹ️ About Default Markers"}),e.jsx("p",{className:"text-sm text-amber-800 mb-2",children:t.id===-1?"This defines the default appearance for booth markers (ID < 1000) that have a company assigned.":"This defines the default appearance for booth markers (ID < 1000) that have no company assigned."}),e.jsx("p",{className:"text-sm text-amber-800",children:"Individual booth markers can override these defaults by having their own values in the Appearance table."})]}),!g&&e.jsxs(I,{title:"Position & Structure",children:[e.jsx(p,{label:"Latitude",value:t.lat}),e.jsx(p,{label:"Longitude",value:t.lng}),e.jsx(p,{label:"Rectangle",value:JSON.stringify(t.rectangle)}),e.jsx(p,{label:"Angle",value:t.angle||0})]}),e.jsxs(I,{title:g?"Default Visual Styling":"Visual Styling",children:[e.jsx(p,{label:"Icon",children:t.iconUrl?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:X(t.iconUrl),alt:"icon",className:"w-8 h-8"}),e.jsx("span",{className:"text-xs text-orange-600 font-medium",children:"Custom Color"})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded flex items-center justify-center text-[9px] text-gray-600 font-medium leading-none",children:"Default"}),e.jsx("span",{className:"text-xs text-blue-600 font-medium",children:c?S(((o=t.assignments)==null?void 0:o.length)>0):"Based on marker type"})]})}),e.jsx(p,{label:"Icon Size",value:JSON.stringify(t.iconSize)}),!g&&e.jsx(p,{label:"Glyph (Booth Label)",value:t.glyph}),e.jsx(p,{label:"Glyph Color",value:t.glyphColor}),e.jsx(p,{label:"Glyph Size",value:t.glyphSize}),e.jsx(p,{label:"Glyph Anchor",value:t.glyphAnchor?JSON.stringify(t.glyphAnchor):"—"}),e.jsx(p,{label:"Shadow Scale",value:t.shadowScale??"1.0"}),g&&e.jsxs(e.Fragment,{children:[e.jsx(p,{label:"Rectangle Width",value:t.rectWidth}),e.jsx(p,{label:"Rectangle Height",value:t.rectHeight})]})]}),h&&e.jsxs(I,{title:"Content (Special Marker)",children:[e.jsx(p,{label:"Name",value:t.name}),e.jsx(p,{label:"Logo",children:t.logo&&e.jsx("img",{...(()=>{const m=De(t.logo);return m?{src:m.src,srcSet:m.srcSet,sizes:m.sizes}:{src:Ue(t.logo)}})(),alt:"logo",className:"w-12 h-12"})}),e.jsx(p,{label:"Website",value:t.website}),e.jsx(p,{label:"Info",value:t.info})]})]})}function Te({marker:t,isDefaultMarker:h,isSpecialMarker:g,isBoothMarker:c,getDefaultColorName:S,onChange:o,onSave:m,onCancel:G}){var H;return e.jsxs("div",{className:"space-y-6",children:[h&&e.jsxs("div",{className:"bg-amber-50 border-2 border-amber-300 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-amber-900 mb-2",children:"⚙️ Editing Global Defaults"}),e.jsx("p",{className:"text-sm text-amber-800 mb-2",children:t.id===-1?"Changes here will affect all booth markers (ID < 1000) that have a company assigned, unless they have individual overrides.":"Changes here will affect all booth markers (ID < 1000) that have no company assigned, unless they have individual overrides."})]}),!h&&e.jsxs(I,{title:"Position & Structure",children:[e.jsx(x,{label:"Latitude",type:"number",step:"0.0001",value:t.lat,onChange:l=>o("lat",parseFloat(l))}),e.jsx(x,{label:"Longitude",type:"number",step:"0.0001",value:t.lng,onChange:l=>o("lng",parseFloat(l))}),e.jsx(x,{label:"Angle",type:"number",step:"0.1",value:t.angle||0,onChange:l=>o("angle",parseFloat(l))})]}),e.jsxs(I,{title:h?"Default Visual Styling":"Visual Styling",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Icon"}),e.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[e.jsx("button",{onClick:()=>o("iconUrl",null),className:`w-10 h-10 border-2 rounded-lg transition-all flex items-center justify-center ${t.iconUrl?"border-gray-200 hover:border-gray-400":"border-blue-500 bg-blue-50"}`,title:"Use default color based on assignment status",children:e.jsx("div",{className:"text-[9px] text-gray-600 font-medium leading-none",children:"Default"})}),Le.map(l=>e.jsx("button",{onClick:()=>o("iconUrl",l),className:`p-2 border-2 rounded-lg transition-all ${t.iconUrl===l?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-400"}`,children:e.jsx("img",{src:X(l),alt:l,className:"w-8 h-8"})},l))]}),t.iconUrl?e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Using custom color override"}):e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Using default color:"," ",c?S(((H=t.assignments)==null?void 0:H.length)>0):"Based on marker type"]})]}),!h&&e.jsx(x,{label:"Glyph (Booth Label)",value:t.glyph,onChange:l=>o("glyph",l)}),e.jsx(x,{label:"Glyph Color",type:"color",value:t.glyphColor,onChange:l=>o("glyphColor",l)}),e.jsx(x,{label:"Glyph Size",type:"number",step:"0.01",value:t.glyphSize,onChange:l=>o("glyphSize",parseFloat(l))}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(x,{label:"Glyph Anchor X",type:"number",step:"0.01",value:t.glyphAnchor?t.glyphAnchor[0]:"",onChange:l=>o("glyphAnchor",[parseFloat(l)||0,t.glyphAnchor&&t.glyphAnchor[1]||0])}),e.jsx(x,{label:"Glyph Anchor Y",type:"number",step:"0.01",value:t.glyphAnchor?t.glyphAnchor[1]:"",onChange:l=>o("glyphAnchor",[t.glyphAnchor&&t.glyphAnchor[0]||0,parseFloat(l)||0])})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(x,{label:"Icon Width",type:"number",step:"0.01",value:t.iconSize?t.iconSize[0]:"",onChange:l=>o("iconSize",[parseFloat(l)||null,t.iconSize?t.iconSize[1]:null])}),e.jsx(x,{label:"Icon Height",type:"number",step:"0.01",value:t.iconSize?t.iconSize[1]:"",onChange:l=>o("iconSize",[t.iconSize?t.iconSize[0]:null,parseFloat(l)||null])})]}),e.jsx(x,{label:"Shadow Scale",type:"number",step:"0.01",value:t.shadowScale??1,onChange:l=>o("shadowScale",parseFloat(l))}),h&&e.jsxs(e.Fragment,{children:[e.jsx(x,{label:"Rectangle Width",type:"number",step:"1",value:t.rectWidth,onChange:l=>o("rectWidth",parseFloat(l))}),e.jsx(x,{label:"Rectangle Height",type:"number",step:"1",value:t.rectHeight,onChange:l=>o("rectHeight",parseFloat(l))})]})]}),g&&e.jsxs(I,{title:"Content (Special Marker)",children:[e.jsx(x,{label:"Name",value:t.name,onChange:l=>o("name",l)}),e.jsx(x,{label:"Logo URL",value:t.logo,onChange:l=>o("logo",l)}),e.jsx(x,{label:"Website",value:t.website,onChange:l=>o("website",l)}),e.jsx($e,{label:"Info",value:t.info,onChange:l=>o("info",l)})]}),c&&e.jsx(e.Fragment,{}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(P,{path:Pe,size:.9}),"Save Changes"]}),e.jsxs("button",{onClick:G,className:"flex items-center gap-2 px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:[e.jsx(P,{path:Ee,size:.9}),"Cancel"]})]})]})}function I({title:t,children:h}){return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:t}),e.jsx("div",{className:"space-y-3",children:h})]})}function p({label:t,value:h,children:g}){return e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:t}),g||e.jsx("div",{className:"text-gray-900",children:h||"—"})]})}function x({label:t,value:h,onChange:g,type:c="text",...S}){const o=c==="color"&&!h?"#000000":h||"";return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),e.jsx("input",{type:c,value:o,"aria-label":t,onChange:m=>g(m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",...S})]})}function $e({label:t,value:h,onChange:g}){return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:t}),e.jsx("textarea",{value:h||"",onChange:c=>g(c.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}export{st as default};
