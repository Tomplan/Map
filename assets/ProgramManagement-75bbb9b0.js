import{u as ge,R as e,r as c,a1 as be,M as fe,s as W}from"./index-1e4c7e6c.js";import{u as xe}from"./useEventActivities-499e2a21.js";import{d as pe,e as Ee,f as _e,b as he,g as ye,h as Ne,i as we,j as ve}from"./index-17768d2d.js";import{u as Fe}from"./useCompanies-49571dae.js";import{u as $e}from"./useEventSubscriptions-6efe7c48.js";import"./phone-376c158e.js";function Ce({scope:t="global"}){const{t:l}=ge(),b=l(t==="global"?"admin.yearScope.global":"admin.yearScope.eventSpecific"),m=t==="global"?"bg-green-100 text-green-800":"bg-blue-50 text-blue-800";return e.createElement("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m} border border-transparent`,role:"status","aria-label":b,title:b},b)}function Se({activity:t=null,day:l="saturday",year:b=new Date().getFullYear(),initialActivityData:m=null,onSave:q=()=>{},onClose:k=()=>{}}){const{t:o,i18n:w}=ge(),[v,O]=c.useState("nl"),te=w&&w.language==="nl"?"nl":"en",[ie,z]=c.useState((t==null?void 0:t.title_nl)||""),[re,H]=c.useState((t==null?void 0:t.title_en)||""),[ae,M]=c.useState((t==null?void 0:t.title_de)||""),[T,D]=c.useState((t==null?void 0:t.description_nl)||""),[p,y]=c.useState((t==null?void 0:t.description_en)||""),[U,A]=c.useState((t==null?void 0:t.description_de)||""),[ne,f]=c.useState((t==null?void 0:t.location_nl)||""),[X,x]=c.useState((t==null?void 0:t.location_en)||""),[L,B]=c.useState((t==null?void 0:t.location_de)||""),[I,P]=c.useState((t==null?void 0:t.badge_nl)||""),[R,N]=c.useState((t==null?void 0:t.badge_en)||""),[le,F]=c.useState((t==null?void 0:t.badge_de)||""),[E,G]=c.useState((t==null?void 0:t.start_time)||""),[oe,J]=c.useState((t==null?void 0:t.end_time)||""),[Z,Y]=c.useState((t==null?void 0:t.display_order)??0),[se,K]=c.useState((t==null?void 0:t.is_active)??!0),[ce,$]=c.useState((t==null?void 0:t.show_location_type_badge)??!1),[me,Q]=c.useState((t==null?void 0:t.location_type)||(t!=null&&t.company_id?"exhibitor":"venue")),[C,j]=c.useState((t==null?void 0:t.company_id)??null),n=(t==null?void 0:t.id)??"new",{toastSuccess:de,toastError:r}=be(),{companies:s}=Fe(),{subscriptions:u}=$e(b),_=new Set(u.map(a=>a.company_id)),V=s.filter(a=>_.has(a.id));c.useEffect(()=>{t?(z(t.title_nl||""),H(t.title_en||""),M(t.title_de||""),D(t.description_nl||""),y(t.description_en||""),A(t.description_de||""),f(t.location_nl||""),x(t.location_en||""),B(t.location_de||""),P(t.badge_nl||""),N(t.badge_en||""),F(t.badge_de||""),G(t.start_time||""),J(t.end_time||""),Y(t.display_order||0),K(t.is_active??!0),$(t.show_location_type_badge??!1),Q(t.location_type||(t.company_id?"exhibitor":"venue")),j(t.company_id||null)):m?(z(m.title_nl||""),H(m.title_en||""),M(m.title_de||""),D(m.description_nl||""),y(m.description_en||""),A(m.description_de||""),f(m.location_nl||""),x(m.location_en||""),B(m.location_de||""),P(m.badge_nl||""),N(m.badge_en||""),F(m.badge_de||""),G(m.start_time||""),J(m.end_time||""),Y(m.display_order||0),K(m.is_active??!0),$(m.show_location_type_badge??!1),Q(m.location_type||(m.company_id?"exhibitor":"venue")),j(m.company_id||null)):(z(""),H(""),M(""),D(""),y(""),A(""),f(""),x(""),B(""),P(""),N(""),F(""),G(""),J(""),Y(0),K(!0),$(!1),Q("venue"),j(null))},[t,m]);const S=async a=>{a&&a.preventDefault&&a.preventDefault();const d=C!=null&&C!==""?Number(C):null,g={organization_id:1,day:l,start_time:E||null,end_time:oe||null,display_order:Z||null,title_nl:ie||null,title_en:re||null,title_de:ae||null,description_nl:T||null,description_en:p||null,description_de:U||null,location_type:me||"venue",company_id:d,location_nl:ne||null,location_en:X||null,location_de:L||null,badge_nl:I||null,badge_en:R||null,badge_de:le||null,is_active:!!se,show_location_type_badge:!!ce};g.event_year=b;try{if(console.debug("ActivityForm payload",g),!(t!=null&&t.id)&&(!Z||Z===0)){const{data:i,error:h}=await W.from("event_activities").select("display_order").eq("day",l).order("display_order",{ascending:!1}).limit(1).maybeSingle();!h&&i&&typeof i.display_order=="number"?g.display_order=i.display_order+1:g.display_order=1}if(t&&t.id){const{error:i}=await W.from("event_activities").update(g).eq("id",t.id);if(i)throw i;const{data:h,error:ee}=await W.from("event_activities").select().eq("id",t.id).maybeSingle();if(ee&&console.warn("Failed to fetch updated activity:",ee),h&&typeof h.show_location_type_badge<"u"){const ue=!!h.show_location_type_badge;if(ue!==g.show_location_type_badge){console.warn("Persisted show_location_type_badge does not match requested value",{requested:g.show_location_type_badge,persisted:ue,id:t==null?void 0:t.id});try{r(o("activityForm.savePersistMismatch"))}catch{}}$(ue)}}else{const{error:i}=await W.from("event_activities").insert([{...g}]);if(i)throw i;const{data:h,error:ee}=await W.from("event_activities").select().eq("day",l).order("created_at",{ascending:!1}).limit(1).maybeSingle();ee&&console.warn("Failed to fetch inserted activity:",ee),h&&typeof h.show_location_type_badge<"u"&&$(!!h.show_location_type_badge)}await q();try{de(o("activityForm.saveSuccess"))}catch{}try{window.dispatchEvent(new Event("eventActivitiesUpdated"))}catch{}k()}catch(i){console.error("Error saving activity:",i);try{r(o("activityForm.saveError")+(i.message?": "+i.message:""))}catch{alert(o("activityForm.saveError")+(i.message?": "+i.message:""))}}};return e.createElement(fe,{isOpen:!0,onClose:k,title:o("activityForm.createTitle"),size:"lg"},e.createElement("div",{className:"px-6 pt-4"},e.createElement("div",{className:"flex items-center gap-2 mb-3"},e.createElement("button",{type:"button",onClick:()=>O("nl"),className:`px-3 py-1 rounded ${v==="nl"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"}`},"NL"),e.createElement("button",{type:"button",onClick:()=>O("en"),className:`px-3 py-1 rounded ${v==="en"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"}`},"EN"),e.createElement("button",{type:"button",onClick:()=>O("de"),className:`px-3 py-1 rounded ${v==="de"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"}`},"DE")),e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},e.createElement("div",null,e.createElement("label",{htmlFor:`start-time-${n}`,className:"block text-sm font-medium text-gray-700 mb-2"},o("activityForm.startTime")),e.createElement("input",{id:`start-time-${n}`,type:"time",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:E||"",onChange:a=>G(a.target.value)})),e.createElement("div",null,e.createElement("label",{htmlFor:`end-time-${n}`,className:"block text-sm font-medium text-gray-700 mb-2"},o("activityForm.endTime")),e.createElement("input",{id:`end-time-${n}`,type:"time",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:oe||"",onChange:a=>J(a.target.value)}))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},e.createElement("div",null,e.createElement("label",{htmlFor:`location-type-${n}`,className:"block text-sm font-medium text-gray-700 mb-2"},o("activityForm.locationType")),e.createElement("select",{id:`location-type-${n}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:me,onChange:a=>Q(a.target.value)},e.createElement("option",{value:"venue"},o("activityForm.venue")),e.createElement("option",{value:"exhibitor"},o("activityForm.exhibitor")))),e.createElement("div",null,e.createElement("div",{className:"flex items-center justify-between mb-2"},e.createElement("label",{htmlFor:`company-${n}`,className:"block text-sm font-medium text-gray-700"},o("activityForm.company")),e.createElement("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},o("activityForm.subscribedCompanies",{year:b}))),e.createElement("select",{id:`company-${n}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:C||"",onChange:a=>j(a.target.value||null)},e.createElement("option",{value:""},o("activityForm.selectCompany")),V.map(a=>e.createElement("option",{key:a.id,value:a.id},a.name))),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},o("activityForm.companyScopeHint"))))),e.createElement("div",{className:"mt-8 pt-6 border-t border-gray-200"},v==="nl"&&e.createElement("div",{className:"space-y-4"},e.createElement("div",null,e.createElement("label",{htmlFor:`title-nl-${n}`,className:"block text-sm font-medium text-gray-700 mb-2"},o("activityForm.titleNL",{lng:te})),e.createElement("input",{id:`title-nl-${n}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:ie,onChange:a=>z(a.target.value)})),e.createElement("div",null,e.createElement("label",{htmlFor:`description-nl-${n}`,className:"block text-sm font-medium text-gray-700 mb-2"},o("activityForm.descriptionNL")),e.createElement("textarea",{id:`description-nl-${n}`,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:T,onChange:a=>D(a.target.value)})),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},e.createElement("div",null,e.createElement("label",{htmlFor:`location-nl-${n}`,className:"block text-sm font-medium text-gray-700 mb-2"},o("activityForm.locationNL")),e.createElement("input",{id:`location-nl-${n}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:ne,onChange:a=>f(a.target.value)})),e.createElement("div",null,e.createElement("label",{htmlFor:`badge-nl-${n}`,className:"block text-sm font-medium text-gray-700 mb-2"},o("activityForm.badgeNL")," ",e.createElement("span",{className:"text-xs text-gray-500"},o("activityForm.optional"))),e.createElement("input",{id:`badge-nl-${n}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:I,onChange:a=>P(a.target.value)})))),v==="en"&&e.createElement("div",{className:"space-y-4"},e.createElement("div",null,e.createElement("label",{htmlFor:`title-en-${n}`,className:"block text-sm font-medium text-gray-700 mb-2"},o("activityForm.titleEN",{lng:te})),e.createElement("input",{id:`title-en-${n}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:re,onChange:a=>H(a.target.value)})),e.createElement("div",null,e.createElement("label",{htmlFor:`description-en-${n}`,className:"block text-sm font-medium text-gray-700 mb-2"},o("activityForm.descriptionEN")),e.createElement("textarea",{id:`description-en-${n}`,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:p,onChange:a=>y(a.target.value)})),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},e.createElement("div",null,e.createElement("label",{htmlFor:`location-en-${n}`,className:"block text-sm font-medium text-gray-700 mb-2"},o("activityForm.locationEN")),e.createElement("input",{id:`location-en-${n}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:X,onChange:a=>x(a.target.value)})),e.createElement("div",null,e.createElement("label",{htmlFor:`badge-en-${n}`,className:"block text-sm font-medium text-gray-700 mb-2"},o("activityForm.badgeEN")," ",e.createElement("span",{className:"text-xs text-gray-500"},o("activityForm.optional"))),e.createElement("input",{id:`badge-en-${n}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:R,onChange:a=>N(a.target.value)})))),v==="de"&&e.createElement("div",{className:"space-y-4"},e.createElement("div",null,e.createElement("label",{htmlFor:`title-de-${n}`,className:"block text-sm font-medium text-gray-700 mb-2"},"Title (DE)"),e.createElement("input",{id:`title-de-${n}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:ae,onChange:a=>M(a.target.value)})),e.createElement("div",null,e.createElement("label",{htmlFor:`description-de-${n}`,className:"block text-sm font-medium text-gray-700 mb-2"},"Description (DE)"),e.createElement("textarea",{id:`description-de-${n}`,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:U,onChange:a=>A(a.target.value)})),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},e.createElement("div",null,e.createElement("label",{htmlFor:`location-de-${n}`,className:"block text-sm font-medium text-gray-700 mb-2"},"Location (DE)"),e.createElement("input",{id:`location-de-${n}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:L,onChange:a=>B(a.target.value)})),e.createElement("div",null,e.createElement("label",{htmlFor:`badge-de-${n}`,className:"block text-sm font-medium text-gray-700 mb-2"},"Badge (DE) ",e.createElement("span",{className:"text-xs text-gray-500"},o("activityForm.optional"))),e.createElement("input",{id:`badge-de-${n}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:le,onChange:a=>F(a.target.value)}))))),e.createElement("div",{className:"mt-6 px-6 py-4 bg-gray-50 border-t border-gray-200"},e.createElement("div",{className:"space-y-3"},e.createElement("div",{className:"flex items-center space-x-3"},e.createElement("input",{id:`isActive-${n}`,type:"checkbox",className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:se,onChange:a=>K(a.target.checked)}),e.createElement("div",{className:"flex-1"},e.createElement("label",{htmlFor:`isActive-${n}`,className:"text-sm text-gray-700 cursor-pointer"},o("activityForm.isActive")),e.createElement("p",{className:"text-xs text-gray-500 mt-0.5"},o("activityForm.isActiveHelp")))),e.createElement("div",{className:"flex items-center space-x-3"},e.createElement("input",{id:`showLocBadge-${n}`,type:"checkbox",className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:ce,onChange:a=>$(a.target.checked)}),e.createElement("div",{className:"flex-1"},e.createElement("label",{htmlFor:`showLocBadge-${n}`,className:"text-sm text-gray-700 cursor-pointer"},o("activityForm.showLocationBadge")),e.createElement("p",{className:"text-xs text-gray-500 mt-0.5"},o("activityForm.showLocationBadgeHelp"))))))),e.createElement("form",{onSubmit:S,className:"px-6 py-4 border-t border-gray-100"},e.createElement("div",{className:"flex justify-end gap-3"},e.createElement("button",{type:"button",onClick:k,className:"px-4 py-2 bg-white text-gray-900 border border-gray-300 rounded hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-300","aria-label":o("activityForm.cancel")},o("activityForm.cancel")),e.createElement("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-300","aria-label":o("activityForm.save")},o("activityForm.save")))))}function Ie({selectedYear:t}){var C,j,n,de;const{t:l,i18n:b}=ge(),{confirm:m,toastError:q,toastSuccess:k,toastInfo:o}=be(),{activities:w,loading:v,error:O,getActivityLocation:te,createActivity:ie,updateActivity:z,deleteActivity:re,archiveCurrentYear:H,copyFromPreviousYear:ae,refetch:M}=xe(t),[T,D]=c.useState("saturday"),[p,y]=c.useState(null),[U,A]=c.useState(!1),[ne,f]=c.useState(!1),[X,x]=c.useState(null),[L,B]=c.useState(null),[I,P]=c.useState(!1),[R,N]=c.useState(null),[le,F]=c.useState(null),E=w[T]||[],G=async r=>{if(!(!p||p.id!==r)){A(!0);try{const{error:s}=await re(r);if(s)throw new Error(s);y(null)}catch(s){console.error("Error deleting activity:",s),q(l("programManagement.deleteError")+": "+s.message)}finally{A(!1)}}},oe=async()=>{if(!await m({title:"Archive Activities",message:`Archive all activities for ${t}? This will move them to the archive and clear the current year.`,confirmText:"Archive",variant:"warning"}))return;const{error:s}=await H();s?q(`Error archiving: ${s}`):k(`Successfully archived activities for ${t}`)},J=async()=>{const r=t-1;if(!await m({title:"Copy Activities",message:`Copy all activities from ${r} to ${t}?`,confirmText:"Copy",variant:"default"}))return;const{error:u}=await ae(r);u?q(`Error copying activities: ${u}`):k(`Activities copied from ${r} to ${t}`)},Z=r=>{const s={start_time:r.start_time,end_time:r.end_time,display_order:r.display_order,title_nl:r.title_nl,title_en:r.title_en,title_de:r.title_de,description_nl:r.description_nl,description_en:r.description_en,description_de:r.description_de,location_type:r.location_type,company_id:r.company_id,location_nl:r.location_nl,location_en:r.location_en,location_de:r.location_de,badge_nl:r.badge_nl,badge_en:r.badge_en,badge_de:r.badge_de,is_active:r.is_active,show_location_type_badge:r.show_location_type_badge};N(s),o('Activity copied! Click "Paste" to create a duplicate.')},Y=()=>{R&&(x(null),f(!0))},se=async r=>{try{const{error:s}=await z(r,{is_active:!0});if(s)throw new Error(s);k(l("programManagement.reactivateSuccess"))}catch(s){console.error("Error reactivating activity:",s),q(l("programManagement.reactivateError")+": "+s.message)}},K=(r,s,u)=>{B({activity:s,index:u}),r.dataTransfer.effectAllowed="move",r.currentTarget.style.opacity="0.4"},ce=r=>{r.currentTarget.style.opacity="1",B(null),F(null)},$=(r,s)=>{r.preventDefault(),r.dataTransfer.dropEffect="move",F(s)},me=()=>{F(null)},Q=async(r,s)=>{if(r.preventDefault(),!(!L||L.index===s)){P(!0);try{const u=[...E],[_]=u.splice(L.index,1);u.splice(s,0,_);const V=u.map((S,a)=>({id:S.id,display_order:a+1}));for(const S of V){const{error:a}=await W.from("event_activities").update({display_order:S.display_order}).eq("id",S.id);if(a)throw a}await M()}catch(u){console.error("Error reordering activities:",u),alert(l("programManagement.reorderError")+": "+u.message)}finally{P(!1)}}};return v?e.createElement("div",{className:"flex justify-center items-center py-12"},e.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.createElement("span",{className:"ml-3 text-gray-600"},l("programManagement.loading"))):O?e.createElement("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4"},e.createElement("p",{className:"text-red-800"},l("programManagement.error"),": ",O.message)):e.createElement("div",{className:"bg-white rounded-lg shadow-sm"},e.createElement("div",{className:"border-b border-gray-200 px-6 py-4"},e.createElement("div",{className:"flex justify-between items-center"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement("h2",{className:"text-xl font-semibold text-gray-900"},l("programManagement.title")),e.createElement("div",null,e.createElement(Ce,{scope:"year",year:t}))),e.createElement("div",{className:"flex gap-2"},e.createElement("button",{onClick:J,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",title:`Copy from ${t-1}`},e.createElement(pe,{className:"text-lg"}),"Copy from ",t-1),e.createElement("button",{onClick:oe,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:(((C=w.saturday)==null?void 0:C.length)||0)+(((j=w.sunday)==null?void 0:j.length)||0)===0,title:`Archive all activities for ${t}`},e.createElement(Ee,{className:"text-lg"}),"Archive ",t),R&&e.createElement("button",{onClick:Y,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",title:"Paste copied activity"},e.createElement(_e,{className:"text-lg"}),"Paste Activity"),e.createElement("button",{onClick:()=>{x(null),N(null),f(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},e.createElement(he,{className:"text-xl"}),e.createElement("span",null,l("programManagement.addActivity")))))),e.createElement("div",{className:"border-b border-gray-200"},e.createElement("div",{className:"flex"},e.createElement("button",{onClick:()=>D("saturday"),className:`px-6 py-3 font-medium transition-colors ${T==="saturday"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`},l("programManagement.saturday")," (",((n=w.saturday)==null?void 0:n.length)||0,")"),e.createElement("button",{onClick:()=>D("sunday"),className:`px-6 py-3 font-medium transition-colors ${T==="sunday"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`},l("programManagement.sunday")," (",((de=w.sunday)==null?void 0:de.length)||0,")"))),e.createElement("div",{className:"divide-y divide-gray-200"},E.length===0?e.createElement("div",{className:"px-6 py-12 text-center"},e.createElement("p",{className:"text-gray-500"},l("programManagement.noActivitiesFound")),e.createElement("button",{onClick:()=>{x(null),N(null),f(!0)},className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},l("programManagement.addFirstActivity"))):e.createElement(e.Fragment,null,E.map((r,s)=>{const u=te(r,b.language),_=b.language||"en",V=_==="nl"?r.title_nl:_==="de"?r.title_de:r.title_en,S=_==="nl"?r.description_nl:_==="de"?r.description_de:r.description_en,a=_==="nl"?r.badge_nl:_==="de"?r.badge_de:r.badge_en,d=!r.is_active;return e.createElement("div",{key:`activity-${r.id}`},le===s&&L&&e.createElement("div",{className:"h-1 bg-blue-500 rounded-full mb-2 animate-pulse"}),e.createElement("div",{draggable:!I&&!d,onDragStart:g=>K(g,r,s),onDragEnd:ce,onDragOver:g=>$(g,s),onDragLeave:me,onDrop:g=>Q(g,s),className:`px-6 py-4 transition-colors ${d?"bg-gray-100 border-l-4 border-gray-400 relative overflow-hidden":I?"hover:bg-gray-50 opacity-50 cursor-wait":"hover:bg-gray-50 cursor-move"}`,style:d?{backgroundImage:`repeating-linear-gradient(
                       45deg,
                       transparent,
                       transparent 10px,
                       rgba(156, 163, 175, 0.1) 10px,
                       rgba(156, 163, 175, 0.1) 20px
                     )`}:void 0},e.createElement("div",{className:"flex items-start gap-4"},e.createElement("button",{className:`mt-1 ${d?"text-gray-300 cursor-not-allowed":I?"text-gray-400 cursor-wait":"text-gray-400 hover:text-gray-600 cursor-move"}`,title:l(d?"programManagement.inactive":"programManagement.dragToReorder"),disabled:I||d},e.createElement(ye,{className:"text-2xl"})),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"flex items-start justify-between gap-4"},e.createElement("div",{className:"flex-1"},e.createElement("div",{className:"flex items-center gap-3 mb-2"},e.createElement("span",{className:`text-sm ${d?"text-gray-600":"text-gray-500"}`},r.start_time," - ",r.end_time),a&&e.createElement("span",{className:`px-2 py-1 text-xs font-medium rounded ${d?"text-gray-600 bg-gray-200":"text-blue-700 bg-blue-100"}`},a),d&&e.createElement("span",{className:"px-2 py-1 text-xs font-medium text-orange-700 bg-orange-100 rounded"},l("programManagement.inactive"))),e.createElement("h3",{className:`text-lg font-semibold mb-1 ${d?"text-gray-700":"text-gray-900"}`},V),e.createElement("p",{className:"text-sm mb-2 line-clamp-2 text-gray-600"},S),e.createElement("div",{className:"flex items-center gap-2 text-sm"},e.createElement("span",{className:d?"text-gray-600":"text-gray-500"},l("programManagement.location"),":"),e.createElement("span",{className:"font-medium text-gray-700"},u.text),r.show_location_type_badge&&e.createElement("span",{className:`px-2 py-0.5 text-xs rounded ${d?r.location_type==="exhibitor"||r.location_type==="company"?"bg-green-50 text-green-600":"bg-gray-50 text-gray-600":r.location_type==="exhibitor"||r.location_type==="company"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`},r.location_type==="exhibitor"||r.location_type==="company"?l("programManagement.exhibitor"):l("programManagement.venue")))),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("button",{onClick:()=>Z(r),className:`p-2 rounded-lg transition-colors ${d?"text-gray-400 hover:bg-gray-50 cursor-not-allowed":"text-gray-600 hover:bg-gray-50"}`,title:"Copy activity",disabled:d},e.createElement(pe,{className:"text-xl"})),e.createElement("button",{onClick:()=>{x(r),f(!0)},className:`p-2 rounded-lg transition-colors ${d?"text-blue-400 hover:bg-blue-50":"text-blue-600 hover:bg-blue-50"}`,title:l("programManagement.edit")},e.createElement(Ne,{className:"text-xl"})),d?e.createElement("button",{onClick:()=>se(r.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:l("programManagement.reactivate")},e.createElement(we,{className:"text-xl"})):e.createElement("button",{onClick:()=>y({id:r.id,title:V}),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:l("programManagement.delete")},e.createElement(ve,{className:"text-xl"}))))))))}))),E.length>0&&e.createElement("div",{className:"border-t border-gray-200 px-6 py-3 bg-gray-50"},e.createElement("div",{className:"flex gap-6 text-sm"},e.createElement("p",{className:"text-gray-600"},l("programManagement.totalActivities"),": ",e.createElement("span",{className:"font-medium"},E.length)),e.createElement("p",{className:"text-gray-600"},l("programManagement.activeActivities"),": ",e.createElement("span",{className:"font-medium text-green-600"},E.filter(r=>r.is_active).length)),e.createElement("p",{className:"text-gray-600"},l("programManagement.inactiveActivities"),": ",e.createElement("span",{className:"font-medium text-orange-600"},E.filter(r=>!r.is_active).length)))),e.createElement(fe,{isOpen:!!p,onClose:()=>y(null),title:l("programManagement.confirmDelete"),size:"md"},e.createElement("div",{className:"p-6"},e.createElement("p",{className:"text-gray-700"},l("programManagement.confirmDeleteMessage")),e.createElement("p",{className:"mt-2 font-medium text-gray-900"},'"',p==null?void 0:p.title,'"')),e.createElement("div",{className:"px-6 py-4 bg-gray-50 flex justify-end gap-3 border-t border-gray-200"},e.createElement("button",{onClick:()=>y(null),disabled:U,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50"},l("programManagement.cancel")),e.createElement("button",{onClick:()=>G(p==null?void 0:p.id),disabled:U,className:"px-4 py-2 text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center gap-2"},U?e.createElement(e.Fragment,null,e.createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),l("programManagement.deleting")):l("programManagement.deleteButton")))),ne&&e.createElement(Se,{activity:X,day:T,year:t,initialActivityData:X?null:R,onSave:()=>{M(),R&&N(null)},onClose:()=>{f(!1),x(null)}}))}export{Ie as default};
