import{u as ge,j as e,r as d,a3 as pe,M as be,s as W}from"./index-f3aaddb5.js";import{u as he}from"./useEventActivities-2a299e91.js";import{c as xe,d as fe,e as _e,a as je,f as ye,g as Ne,h as we,i as ve}from"./index-9c824e12.js";import{u as Fe}from"./useCompanies-e99a91be.js";import{u as $e}from"./useEventSubscriptions-c9fd5a7d.js";import"./phone-376c158e.js";function Ce({scope:r="global"}){const{t}=ge(),p=t(r==="global"?"admin.yearScope.global":"admin.yearScope.eventSpecific"),c=r==="global"?"bg-green-100 text-green-800":"bg-blue-50 text-blue-800";return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${c} border border-transparent`,role:"status","aria-label":p,title:p,children:p})}function Ee({activity:r=null,day:t="saturday",year:p=new Date().getFullYear(),initialActivityData:c=null,onSave:q=()=>{},onClose:S=()=>{}}){const{t:a,i18n:w}=ge(),[v,O]=d.useState("nl"),re=w&&w.language==="nl"?"nl":"en",[me,z]=d.useState((r==null?void 0:r.title_nl)||""),[se,H]=d.useState((r==null?void 0:r.title_en)||""),[ne,M]=d.useState((r==null?void 0:r.title_de)||""),[k,T]=d.useState((r==null?void 0:r.description_nl)||""),[x,y]=d.useState((r==null?void 0:r.description_en)||""),[U,D]=d.useState((r==null?void 0:r.description_de)||""),[oe,b]=d.useState((r==null?void 0:r.location_nl)||""),[X,h]=d.useState((r==null?void 0:r.location_en)||""),[A,L]=d.useState((r==null?void 0:r.location_de)||""),[B,I]=d.useState((r==null?void 0:r.badge_nl)||""),[P,N]=d.useState((r==null?void 0:r.badge_en)||""),[te,F]=d.useState((r==null?void 0:r.badge_de)||""),[f,G]=d.useState((r==null?void 0:r.start_time)||""),[ae,J]=d.useState((r==null?void 0:r.end_time)||""),[Z,Y]=d.useState((r==null?void 0:r.display_order)??0),[le,K]=d.useState((r==null?void 0:r.is_active)??!0),[de,$]=d.useState((r==null?void 0:r.show_location_type_badge)??!1),[ce,Q]=d.useState((r==null?void 0:r.location_type)||(r!=null&&r.company_id?"exhibitor":"venue")),[C,R]=d.useState((r==null?void 0:r.company_id)??null),o=(r==null?void 0:r.id)??"new",{toastSuccess:ie,toastError:s}=pe(),{companies:l}=Fe(),{subscriptions:u}=$e(p),_=new Set(u.map(n=>n.company_id)),V=l.filter(n=>_.has(n.id));d.useEffect(()=>{r?(z(r.title_nl||""),H(r.title_en||""),M(r.title_de||""),T(r.description_nl||""),y(r.description_en||""),D(r.description_de||""),b(r.location_nl||""),h(r.location_en||""),L(r.location_de||""),I(r.badge_nl||""),N(r.badge_en||""),F(r.badge_de||""),G(r.start_time||""),J(r.end_time||""),Y(r.display_order||0),K(r.is_active??!0),$(r.show_location_type_badge??!1),Q(r.location_type||(r.company_id?"exhibitor":"venue")),R(r.company_id||null)):c?(z(c.title_nl||""),H(c.title_en||""),M(c.title_de||""),T(c.description_nl||""),y(c.description_en||""),D(c.description_de||""),b(c.location_nl||""),h(c.location_en||""),L(c.location_de||""),I(c.badge_nl||""),N(c.badge_en||""),F(c.badge_de||""),G(c.start_time||""),J(c.end_time||""),Y(c.display_order||0),K(c.is_active??!0),$(c.show_location_type_badge??!1),Q(c.location_type||(c.company_id?"exhibitor":"venue")),R(c.company_id||null)):(z(""),H(""),M(""),T(""),y(""),D(""),b(""),h(""),L(""),I(""),N(""),F(""),G(""),J(""),Y(0),K(!0),$(!1),Q("venue"),R(null))},[r,c]);const E=async n=>{n&&n.preventDefault&&n.preventDefault();const i=C!=null&&C!==""?Number(C):null,g={organization_id:1,day:t,start_time:f||null,end_time:ae||null,display_order:Z||null,title_nl:me||null,title_en:se||null,title_de:ne||null,description_nl:k||null,description_en:x||null,description_de:U||null,location_type:ce||"venue",company_id:i,location_nl:oe||null,location_en:X||null,location_de:A||null,badge_nl:B||null,badge_en:P||null,badge_de:te||null,is_active:!!le,show_location_type_badge:!!de};g.event_year=p;try{if(console.debug("ActivityForm payload",g),!(r!=null&&r.id)&&(!Z||Z===0)){const{data:m,error:j}=await W.from("event_activities").select("display_order").eq("day",t).order("display_order",{ascending:!1}).limit(1).maybeSingle();!j&&m&&typeof m.display_order=="number"?g.display_order=m.display_order+1:g.display_order=1}if(r&&r.id){const{error:m}=await W.from("event_activities").update(g).eq("id",r.id);if(m)throw m;const{data:j,error:ee}=await W.from("event_activities").select().eq("id",r.id).maybeSingle();if(ee&&console.warn("Failed to fetch updated activity:",ee),j&&typeof j.show_location_type_badge<"u"){const ue=!!j.show_location_type_badge;if(ue!==g.show_location_type_badge){console.warn("Persisted show_location_type_badge does not match requested value",{requested:g.show_location_type_badge,persisted:ue,id:r==null?void 0:r.id});try{s(a("activityForm.savePersistMismatch"))}catch{}}$(ue)}}else{const{error:m}=await W.from("event_activities").insert([{...g}]);if(m)throw m;const{data:j,error:ee}=await W.from("event_activities").select().eq("day",t).order("created_at",{ascending:!1}).limit(1).maybeSingle();ee&&console.warn("Failed to fetch inserted activity:",ee),j&&typeof j.show_location_type_badge<"u"&&$(!!j.show_location_type_badge)}await q();try{ie(a("activityForm.saveSuccess"))}catch{}try{window.dispatchEvent(new Event("eventActivitiesUpdated"))}catch{}S()}catch(m){console.error("Error saving activity:",m);try{s(a("activityForm.saveError")+(m.message?": "+m.message:""))}catch{alert(a("activityForm.saveError")+(m.message?": "+m.message:""))}}};return e.jsxs(be,{isOpen:!0,onClose:S,title:a("activityForm.createTitle"),size:"lg",children:[e.jsxs("div",{className:"px-6 pt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("button",{type:"button",onClick:()=>O("nl"),className:`px-3 py-1 rounded ${v==="nl"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"}`,children:"NL"}),e.jsx("button",{type:"button",onClick:()=>O("en"),className:`px-3 py-1 rounded ${v==="en"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"}`,children:"EN"}),e.jsx("button",{type:"button",onClick:()=>O("de"),className:`px-3 py-1 rounded ${v==="de"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700"}`,children:"DE"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:`start-time-${o}`,className:"block text-sm font-medium text-gray-700 mb-2",children:a("activityForm.startTime")}),e.jsx("input",{id:`start-time-${o}`,type:"time",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:f||"",onChange:n=>G(n.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:`end-time-${o}`,className:"block text-sm font-medium text-gray-700 mb-2",children:a("activityForm.endTime")}),e.jsx("input",{id:`end-time-${o}`,type:"time",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:ae||"",onChange:n=>J(n.target.value)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:`location-type-${o}`,className:"block text-sm font-medium text-gray-700 mb-2",children:a("activityForm.locationType")}),e.jsxs("select",{id:`location-type-${o}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:ce,onChange:n=>Q(n.target.value),children:[e.jsx("option",{value:"venue",children:a("activityForm.venue")}),e.jsx("option",{value:"exhibitor",children:a("activityForm.exhibitor")})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{htmlFor:`company-${o}`,className:"block text-sm font-medium text-gray-700",children:a("activityForm.company")}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:a("activityForm.subscribedCompanies",{year:p})})]}),e.jsxs("select",{id:`company-${o}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:C||"",onChange:n=>R(n.target.value||null),children:[e.jsx("option",{value:"",children:a("activityForm.selectCompany")}),V.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:a("activityForm.companyScopeHint")})]})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[v==="nl"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:`title-nl-${o}`,className:"block text-sm font-medium text-gray-700 mb-2",children:a("activityForm.titleNL",{lng:re})}),e.jsx("input",{id:`title-nl-${o}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:me,onChange:n=>z(n.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:`description-nl-${o}`,className:"block text-sm font-medium text-gray-700 mb-2",children:a("activityForm.descriptionNL")}),e.jsx("textarea",{id:`description-nl-${o}`,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:k,onChange:n=>T(n.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:`location-nl-${o}`,className:"block text-sm font-medium text-gray-700 mb-2",children:a("activityForm.locationNL")}),e.jsx("input",{id:`location-nl-${o}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:oe,onChange:n=>b(n.target.value)})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:`badge-nl-${o}`,className:"block text-sm font-medium text-gray-700 mb-2",children:[a("activityForm.badgeNL")," ",e.jsx("span",{className:"text-xs text-gray-500",children:a("activityForm.optional")})]}),e.jsx("input",{id:`badge-nl-${o}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:B,onChange:n=>I(n.target.value)})]})]})]}),v==="en"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:`title-en-${o}`,className:"block text-sm font-medium text-gray-700 mb-2",children:a("activityForm.titleEN",{lng:re})}),e.jsx("input",{id:`title-en-${o}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:se,onChange:n=>H(n.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:`description-en-${o}`,className:"block text-sm font-medium text-gray-700 mb-2",children:a("activityForm.descriptionEN")}),e.jsx("textarea",{id:`description-en-${o}`,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:x,onChange:n=>y(n.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:`location-en-${o}`,className:"block text-sm font-medium text-gray-700 mb-2",children:a("activityForm.locationEN")}),e.jsx("input",{id:`location-en-${o}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:X,onChange:n=>h(n.target.value)})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:`badge-en-${o}`,className:"block text-sm font-medium text-gray-700 mb-2",children:[a("activityForm.badgeEN")," ",e.jsx("span",{className:"text-xs text-gray-500",children:a("activityForm.optional")})]}),e.jsx("input",{id:`badge-en-${o}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:P,onChange:n=>N(n.target.value)})]})]})]}),v==="de"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:`title-de-${o}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Title (DE)"}),e.jsx("input",{id:`title-de-${o}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:ne,onChange:n=>M(n.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:`description-de-${o}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (DE)"}),e.jsx("textarea",{id:`description-de-${o}`,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:U,onChange:n=>D(n.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:`location-de-${o}`,className:"block text-sm font-medium text-gray-700 mb-2",children:"Location (DE)"}),e.jsx("input",{id:`location-de-${o}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:A,onChange:n=>L(n.target.value)})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:`badge-de-${o}`,className:"block text-sm font-medium text-gray-700 mb-2",children:["Badge (DE) ",e.jsx("span",{className:"text-xs text-gray-500",children:a("activityForm.optional")})]}),e.jsx("input",{id:`badge-de-${o}`,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:te,onChange:n=>F(n.target.value)})]})]})]})]}),e.jsx("div",{className:"mt-6 px-6 py-4 bg-gray-50 border-t border-gray-200",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{id:`isActive-${o}`,type:"checkbox",className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:le,onChange:n=>K(n.target.checked)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`isActive-${o}`,className:"text-sm text-gray-700 cursor-pointer",children:a("activityForm.isActive")}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:a("activityForm.isActiveHelp")})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{id:`showLocBadge-${o}`,type:"checkbox",className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:de,onChange:n=>$(n.target.checked)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`showLocBadge-${o}`,className:"text-sm text-gray-700 cursor-pointer",children:a("activityForm.showLocationBadge")}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:a("activityForm.showLocationBadgeHelp")})]})]})]})})]}),e.jsx("form",{onSubmit:E,className:"px-6 py-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 bg-white text-gray-900 border border-gray-300 rounded hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-300","aria-label":a("activityForm.cancel"),children:a("activityForm.cancel")}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-300","aria-label":a("activityForm.save"),children:a("activityForm.save")})]})})]})}function Be({selectedYear:r}){var C,R,o,ie;const{t,i18n:p}=ge(),{confirm:c,toastError:q,toastSuccess:S,toastInfo:a}=pe(),{activities:w,loading:v,error:O,getActivityLocation:re,createActivity:me,updateActivity:z,deleteActivity:se,archiveCurrentYear:H,copyFromPreviousYear:ne,refetch:M}=he(r),[k,T]=d.useState("saturday"),[x,y]=d.useState(null),[U,D]=d.useState(!1),[oe,b]=d.useState(!1),[X,h]=d.useState(null),[A,L]=d.useState(null),[B,I]=d.useState(!1),[P,N]=d.useState(null),[te,F]=d.useState(null),f=w[k]||[],G=async s=>{if(!(!x||x.id!==s)){D(!0);try{const{error:l}=await se(s);if(l)throw new Error(l);y(null)}catch(l){console.error("Error deleting activity:",l),q(t("programManagement.deleteError")+": "+l.message)}finally{D(!1)}}},ae=async()=>{if(!await c({title:"Archive Activities",message:`Archive all activities for ${r}? This will move them to the archive and clear the current year.`,confirmText:"Archive",variant:"warning"}))return;const{error:l}=await H();l?q(`Error archiving: ${l}`):S(`Successfully archived activities for ${r}`)},J=async()=>{const s=r-1;if(!await c({title:"Copy Activities",message:`Copy all activities from ${s} to ${r}?`,confirmText:"Copy",variant:"default"}))return;const{error:u}=await ne(s);u?q(`Error copying activities: ${u}`):S(`Activities copied from ${s} to ${r}`)},Z=s=>{const l={start_time:s.start_time,end_time:s.end_time,display_order:s.display_order,title_nl:s.title_nl,title_en:s.title_en,title_de:s.title_de,description_nl:s.description_nl,description_en:s.description_en,description_de:s.description_de,location_type:s.location_type,company_id:s.company_id,location_nl:s.location_nl,location_en:s.location_en,location_de:s.location_de,badge_nl:s.badge_nl,badge_en:s.badge_en,badge_de:s.badge_de,is_active:s.is_active,show_location_type_badge:s.show_location_type_badge};N(l),a('Activity copied! Click "Paste" to create a duplicate.')},Y=()=>{P&&(h(null),b(!0))},le=async s=>{try{const{error:l}=await z(s,{is_active:!0});if(l)throw new Error(l);S(t("programManagement.reactivateSuccess"))}catch(l){console.error("Error reactivating activity:",l),q(t("programManagement.reactivateError")+": "+l.message)}},K=(s,l,u)=>{L({activity:l,index:u}),s.dataTransfer.effectAllowed="move",s.currentTarget.style.opacity="0.4"},de=s=>{s.currentTarget.style.opacity="1",L(null),F(null)},$=(s,l)=>{s.preventDefault(),s.dataTransfer.dropEffect="move",F(l)},ce=()=>{F(null)},Q=async(s,l)=>{if(s.preventDefault(),!(!A||A.index===l)){I(!0);try{const u=[...f],[_]=u.splice(A.index,1);u.splice(l,0,_);const V=u.map((E,n)=>({id:E.id,display_order:n+1}));for(const E of V){const{error:n}=await W.from("event_activities").update({display_order:E.display_order}).eq("id",E.id);if(n)throw n}await M()}catch(u){console.error("Error reordering activities:",u),alert(t("programManagement.reorderError")+": "+u.message)}finally{I(!1)}}};return v?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:t("programManagement.loading")})]}):O?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-red-800",children:[t("programManagement.error"),": ",O.message]})}):e.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[e.jsx("div",{className:"border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t("programManagement.title")}),e.jsx("div",{children:e.jsx(Ce,{scope:"year",year:r})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:J,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",title:`Copy from ${r-1}`,children:[e.jsx(xe,{className:"text-lg"}),"Copy from ",r-1]}),e.jsxs("button",{onClick:ae,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:(((C=w.saturday)==null?void 0:C.length)||0)+(((R=w.sunday)==null?void 0:R.length)||0)===0,title:`Archive all activities for ${r}`,children:[e.jsx(fe,{className:"text-lg"}),"Archive ",r]}),P&&e.jsxs("button",{onClick:Y,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",title:"Paste copied activity",children:[e.jsx(_e,{className:"text-lg"}),"Paste Activity"]}),e.jsxs("button",{onClick:()=>{h(null),N(null),b(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(je,{className:"text-xl"}),e.jsx("span",{children:t("programManagement.addActivity")})]})]})]})}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex",children:[e.jsxs("button",{onClick:()=>T("saturday"),className:`px-6 py-3 font-medium transition-colors ${k==="saturday"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[t("programManagement.saturday")," (",((o=w.saturday)==null?void 0:o.length)||0,")"]}),e.jsxs("button",{onClick:()=>T("sunday"),className:`px-6 py-3 font-medium transition-colors ${k==="sunday"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:[t("programManagement.sunday")," (",((ie=w.sunday)==null?void 0:ie.length)||0,")"]})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:f.length===0?e.jsxs("div",{className:"px-6 py-12 text-center",children:[e.jsx("p",{className:"text-gray-500",children:t("programManagement.noActivitiesFound")}),e.jsx("button",{onClick:()=>{h(null),N(null),b(!0)},className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:t("programManagement.addFirstActivity")})]}):e.jsx(e.Fragment,{children:f.map((s,l)=>{const u=re(s,p.language),_=p.language||"en",V=_==="nl"?s.title_nl:_==="de"?s.title_de:s.title_en,E=_==="nl"?s.description_nl:_==="de"?s.description_de:s.description_en,n=_==="nl"?s.badge_nl:_==="de"?s.badge_de:s.badge_en,i=!s.is_active;return e.jsxs("div",{children:[te===l&&A&&e.jsx("div",{className:"h-1 bg-blue-500 rounded-full mb-2 animate-pulse"}),e.jsx("div",{draggable:!B&&!i,onDragStart:g=>K(g,s,l),onDragEnd:de,onDragOver:g=>$(g,l),onDragLeave:ce,onDrop:g=>Q(g,l),className:`px-6 py-4 transition-colors ${i?"bg-gray-100 border-l-4 border-gray-400 relative overflow-hidden":B?"hover:bg-gray-50 opacity-50 cursor-wait":"hover:bg-gray-50 cursor-move"}`,style:i?{backgroundImage:`repeating-linear-gradient(
                       45deg,
                       transparent,
                       transparent 10px,
                       rgba(156, 163, 175, 0.1) 10px,
                       rgba(156, 163, 175, 0.1) 20px
                     )`}:void 0,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("button",{className:`mt-1 ${i?"text-gray-300 cursor-not-allowed":B?"text-gray-400 cursor-wait":"text-gray-400 hover:text-gray-600 cursor-move"}`,title:t(i?"programManagement.inactive":"programManagement.dragToReorder"),disabled:B||i,children:e.jsx(ye,{className:"text-2xl"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("span",{className:`text-sm ${i?"text-gray-600":"text-gray-500"}`,children:[s.start_time," - ",s.end_time]}),n&&e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded ${i?"text-gray-600 bg-gray-200":"text-blue-700 bg-blue-100"}`,children:n}),i&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium text-orange-700 bg-orange-100 rounded",children:t("programManagement.inactive")})]}),e.jsx("h3",{className:`text-lg font-semibold mb-1 ${i?"text-gray-700":"text-gray-900"}`,children:V}),e.jsx("p",{className:"text-sm mb-2 line-clamp-2 text-gray-600",children:E}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxs("span",{className:i?"text-gray-600":"text-gray-500",children:[t("programManagement.location"),":"]}),e.jsx("span",{className:"font-medium text-gray-700",children:u.text}),s.show_location_type_badge&&e.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${i?s.location_type==="exhibitor"||s.location_type==="company"?"bg-green-50 text-green-600":"bg-gray-50 text-gray-600":s.location_type==="exhibitor"||s.location_type==="company"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:s.location_type==="exhibitor"||s.location_type==="company"?t("programManagement.exhibitor"):t("programManagement.venue")})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>Z(s),className:`p-2 rounded-lg transition-colors ${i?"text-gray-400 hover:bg-gray-50 cursor-not-allowed":"text-gray-600 hover:bg-gray-50"}`,title:"Copy activity",disabled:i,children:e.jsx(xe,{className:"text-xl"})}),e.jsx("button",{onClick:()=>{h(s),b(!0)},className:`p-2 rounded-lg transition-colors ${i?"text-blue-400 hover:bg-blue-50":"text-blue-600 hover:bg-blue-50"}`,title:t("programManagement.edit"),children:e.jsx(Ne,{className:"text-xl"})}),i?e.jsx("button",{onClick:()=>le(s.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:t("programManagement.reactivate"),children:e.jsx(we,{className:"text-xl"})}):e.jsx("button",{onClick:()=>y({id:s.id,title:V}),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:t("programManagement.delete"),children:e.jsx(ve,{className:"text-xl"})})]})]})})]})})]},`activity-${s.id}`)})})}),f.length>0&&e.jsx("div",{className:"border-t border-gray-200 px-6 py-3 bg-gray-50",children:e.jsxs("div",{className:"flex gap-6 text-sm",children:[e.jsxs("p",{className:"text-gray-600",children:[t("programManagement.totalActivities"),": ",e.jsx("span",{className:"font-medium",children:f.length})]}),e.jsxs("p",{className:"text-gray-600",children:[t("programManagement.activeActivities"),": ",e.jsx("span",{className:"font-medium text-green-600",children:f.filter(s=>s.is_active).length})]}),e.jsxs("p",{className:"text-gray-600",children:[t("programManagement.inactiveActivities"),": ",e.jsx("span",{className:"font-medium text-orange-600",children:f.filter(s=>!s.is_active).length})]})]})}),e.jsxs(be,{isOpen:!!x,onClose:()=>y(null),title:t("programManagement.confirmDelete"),size:"md",children:[e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-700",children:t("programManagement.confirmDeleteMessage")}),e.jsxs("p",{className:"mt-2 font-medium text-gray-900",children:['"',x==null?void 0:x.title,'"']})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 flex justify-end gap-3 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>y(null),disabled:U,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:t("programManagement.cancel")}),e.jsx("button",{onClick:()=>G(x==null?void 0:x.id),disabled:U,className:"px-4 py-2 text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:U?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),t("programManagement.deleting")]}):t("programManagement.deleteButton")})]})]}),oe&&e.jsx(Ee,{activity:X,day:k,year:r,initialActivityData:X?null:P,onSave:()=>{M(),P&&N(null)},onClose:()=>{b(!1),h(null)}})]})}export{Be as default};
