import{u as A,a1 as B,r as l,s as U,R as e,I as m,ar as J,ak as Y,as as P,at as ee,al as te,am as ae,M as se,aj as ne,N as O,au as G,av as le,aw as re,ax as V,ay as H,az as K,j as q,aA as Q,aB as me,f as ie,S as oe}from"./index-1e4c7e6c.js";import{u as X}from"./useUserRole-6e97074a.js";import"./ProtectedSection-cf76d1b4.js";import{u as W,a as ce}from"./useEventMapSettings-ac641da5.js";import{L as de}from"./LanguageToggle-08a9130b.js";import ue from"./CategoryManagement-ec41bd71.js";import"./useCategories-30773e88.js";function ge(){const{t}=A(),{isSuperAdmin:a}=X(),{confirm:n}=B(),[b,$]=l.useState([]),[N,k]=l.useState(!0),[x,E]=l.useState(null),[Z,c]=l.useState(!1),[h,p]=l.useState(""),[s,D]=l.useState("event_manager"),[z,d]=l.useState(!1),[y,L]=l.useState(!1),[I,T]=l.useState(null);l.useEffect(()=>{C()},[]);const C=async()=>{try{k(!0),E(null);let r,i;try{const _=await U.rpc("get_user_roles_with_email");r=_.data,i=_.error}catch{console.warn("get_user_roles_with_email not available, using fallback");const o=await U.from("user_roles").select("user_id, role, created_at, updated_at").order("created_at",{ascending:!1});r=o.data,i=o.error}if(i)throw i;const{data:{user:g}}=await U.auth.getUser(),f=(r||[]).map(_=>{const o=(g==null?void 0:g.id)===_.user_id;return{id:_.user_id,email:_.email||(o?g.email:`user-${_.user_id.substring(0,8)}...`),role:_.role,created_at:_.created_at,last_sign_in_at:_.last_sign_in_at||(o?g.last_sign_in_at:null),isCurrentUser:o}});$(f),k(!1)}catch(r){console.error("Error fetching users:",r),E(t("settings.userManagement.errors.fetchFailed")),k(!1)}},M=async r=>{var i;r.preventDefault(),d(!0),E(null);try{const f="/Map",_=`${window.location.origin}${f}#/reset-password`,o=Math.random().toString(36).slice(-12)+"A1!",{data:R,error:S}=await U.auth.signUp({email:h,password:o,options:{data:{role:s},emailRedirectTo:_}});if(S)throw S;if((i=R==null?void 0:R.user)!=null&&i.id){const{error:j}=await U.from("user_roles").insert({user_id:R.user.id,role:s});j&&console.warn("Failed to add user to user_roles:",j)}const{error:v}=await U.auth.resetPasswordForEmail(h,{redirectTo:_});v&&console.warn("Password reset email failed:",v),L(!0),setTimeout(()=>{c(!1),L(!1),p(""),D("event_manager"),C()},8e3)}catch(g){console.error("Error inviting user:",g),E(g.message||t("settings.userManagement.errors.inviteFailed"))}finally{d(!1)}},u=async(r,i)=>{if(await n({title:t("settings.userManagement.deleteUser"),message:t("settings.userManagement.confirmDelete",{email:i}),confirmText:t("common.delete"),variant:"danger"}))try{E(null);const{error:f}=await U.from("user_roles").delete().eq("user_id",r);if(f)throw f;await C()}catch(f){console.error("Error deleting user:",f),E(t("settings.userManagement.errors.deleteFailed"))}},w={super_admin:t("settings.userManagement.roles.superAdmin"),system_manager:t("settings.userManagement.roles.systemManager"),event_manager:t("settings.userManagement.roles.eventManager")},F={super_admin:"bg-purple-100 text-purple-800 border-purple-200",system_manager:"bg-blue-100 text-blue-800 border-blue-200",event_manager:"bg-green-100 text-green-800 border-green-200"};return N?e.createElement("div",{className:"bg-white rounded-lg shadow p-6"},e.createElement("div",{className:"flex items-center justify-center py-8"},e.createElement("div",{className:"text-gray-500"},t("settings.userManagement.loading")))):e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"bg-white rounded-lg shadow p-6"},e.createElement("div",{className:"flex items-center justify-between mb-4"},e.createElement("div",null,e.createElement("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2"},e.createElement(m,{path:J,size:1}),t("settings.userManagement.title")),e.createElement("p",{className:"text-sm text-gray-600 mt-1"},t("settings.userManagement.description"))),e.createElement("button",{onClick:()=>c(!0),className:"btn-primary flex items-center gap-2"},e.createElement(m,{path:Y,size:.8}),t("settings.userManagement.inviteUser"))),x&&e.createElement("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 px-4 py-3 rounded-lg mb-4"},e.createElement("div",{className:"flex items-center"},e.createElement(m,{path:P,size:.8,className:"mr-2"}),e.createElement("span",{className:"text-sm"},x))),e.createElement("div",{className:"overflow-x-auto"},e.createElement("table",{className:"w-full"},e.createElement("thead",null,e.createElement("tr",{className:"border-b border-gray-200"},e.createElement("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700"},t("settings.userManagement.table.email")),e.createElement("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700"},t("settings.userManagement.table.role")),e.createElement("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700"},t("settings.userManagement.table.created")),e.createElement("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700"},t("settings.userManagement.table.lastLogin")),e.createElement("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700"},t("settings.userManagement.table.actions")))),e.createElement("tbody",null,b.map(r=>e.createElement("tr",{key:r.id,className:"border-b border-gray-100 hover:bg-gray-50"},e.createElement("td",{className:"py-3 px-4"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement(m,{path:ee,size:.7,className:"text-gray-400"}),e.createElement("span",{className:"text-sm text-gray-900"},r.email))),e.createElement("td",{className:"py-3 px-4"},e.createElement("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-medium border ${F[r.role]||"bg-gray-100 text-gray-800"}`},w[r.role]||r.role)),e.createElement("td",{className:"py-3 px-4 text-sm text-gray-600"},new Date(r.created_at).toLocaleDateString()),e.createElement("td",{className:"py-3 px-4 text-sm text-gray-600"},r.last_sign_in_at?new Date(r.last_sign_in_at).toLocaleDateString():"-"),e.createElement("td",{className:"py-3 px-4 text-right"},e.createElement("div",{className:"flex items-center justify-end gap-2"},e.createElement("button",{onClick:()=>T(r),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:t("settings.userManagement.editRole")},e.createElement(m,{path:te,size:.7})),a&&e.createElement("button",{onClick:()=>u(r.id,r.email),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:t("settings.userManagement.deleteUser")},e.createElement(m,{path:ae,size:.7})))))))))),e.createElement(se,{isOpen:Z,onClose:()=>c(!1),title:t("settings.userManagement.inviteUser"),size:"md"},e.createElement("div",{className:"p-6"},y?e.createElement("div",{className:"bg-green-50 border-l-4 border-green-500 text-green-700 px-4 py-3 rounded-lg"},e.createElement("div",{className:"flex items-center"},e.createElement(m,{path:ne,size:.8,className:"mr-2"}),e.createElement("div",null,e.createElement("p",{className:"font-semibold"},t("settings.userManagement.inviteSuccess")),e.createElement("p",{className:"text-sm mt-1"},t("settings.userManagement.inviteSuccessMessage"))))):e.createElement("form",{onSubmit:M,className:"space-y-4"},e.createElement("div",null,e.createElement("label",{className:"label-base"},t("settings.userManagement.emailLabel")),e.createElement("input",{type:"email",value:h,onChange:r=>p(r.target.value),className:"input-base",placeholder:"manager@example.com",required:!0})),e.createElement("div",null,e.createElement("label",{className:"label-base"},t("settings.userManagement.roleLabel")),e.createElement("select",{value:s,onChange:r=>D(r.target.value),className:"input-base"},e.createElement("option",{value:"event_manager"},w.event_manager),e.createElement("option",{value:"system_manager"},w.system_manager),a&&e.createElement("option",{value:"super_admin"},w.super_admin)),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},t(`settings.userManagement.roleDescriptions.${s}`))),e.createElement("div",{className:"flex gap-3"},e.createElement("button",{type:"button",onClick:()=>c(!1),className:"flex-1 py-2 px-4 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors"},t("settings.userManagement.cancel")),e.createElement("button",{type:"submit",disabled:z,className:"flex-1 btn-primary"},t(z?"settings.userManagement.sending":"settings.userManagement.sendInvite")))))))}function pe(){const{t}=A(),{settings:a,loading:n,error:b,updateSettings:$}=W(),{toastError:N,toastWarning:k}=B(),[x,E]=l.useState(!1),[Z,c]=l.useState(!1),[h,p]=l.useState(null),[s,D]=l.useState(0),[z,d]=l.useState(0),[y,L]=l.useState(0),[I,T]=l.useState(0),[C,M]=l.useState(0),[u,w]=l.useState(!0),[F,r]=l.useState(!0),[i,g]=l.useState(!0);l.useEffect(()=>{if(a&&(D(a.default_breakfast_sat??0),d(a.default_lunch_sat??0),L(a.default_bbq_sat??0),T(a.default_breakfast_sun??0),M(a.default_lunch_sun??0),a.notification_settings)){const o=typeof a.notification_settings=="string"?JSON.parse(a.notification_settings):a.notification_settings;w(o.emailNotifications??!0),r(o.newSubscriptionNotify??!0),g(o.assignmentChangeNotify??!0)}},[a]);const f=async o=>{var R;o.preventDefault(),E(!0),p(null),c(!1);try{if(!await $({default_breakfast_sat:s,default_lunch_sat:z,default_bbq_sat:y,default_breakfast_sun:I,default_lunch_sun:C,notification_settings:{emailNotifications:u,newSubscriptionNotify:F,assignmentChangeNotify:i}}))throw new Error("Failed to update settings");c(!0),setTimeout(()=>c(!1),3e3)}catch(S){console.error("Failed to save settings:",S),(R=S.message)!=null&&R.includes("updated by another admin")?(k(S.message),p(t("settings.eventDefaults.errors.saveFailed"))):(N(S.message||t("settings.eventDefaults.errors.saveFailed")),p(S.message||t("settings.eventDefaults.errors.saveFailed")))}finally{E(!1)}},_=()=>{if(a&&(D(a.default_breakfast_sat??0),d(a.default_lunch_sat??0),L(a.default_bbq_sat??0),T(a.default_breakfast_sun??0),M(a.default_lunch_sun??0),a.notification_settings)){const o=typeof a.notification_settings=="string"?JSON.parse(a.notification_settings):a.notification_settings;w(o.emailNotifications??!0),r(o.newSubscriptionNotify??!0),g(o.assignmentChangeNotify??!0)}};return n?e.createElement("div",{className:"bg-white rounded-lg shadow p-6"},e.createElement("div",{className:"flex items-center justify-center py-12"},e.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"}),e.createElement("span",{className:"ml-3 text-gray-600"},t("settings.eventDefaults.loading")))):e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"bg-white rounded-lg shadow p-6"},e.createElement("div",{className:"flex items-center justify-between mb-2"},e.createElement("h2",{className:"text-xl font-bold text-gray-900"},t("settings.eventDefaults.title")),e.createElement("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-orange-50 border border-orange-200 rounded-lg"},e.createElement(m,{path:O,size:.6,className:"text-orange-600"}),e.createElement("span",{className:"text-xs font-semibold text-orange-700 uppercase tracking-wide"},"Organization Setting"))),e.createElement("p",{className:"text-sm text-gray-600"},t("settings.eventDefaults.description"))),Z&&e.createElement("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg flex items-start"},e.createElement(m,{path:G,size:1,className:"text-green-600 mr-3 flex-shrink-0"}),e.createElement("div",null,e.createElement("p",{className:"font-semibold text-green-800"},t("settings.eventDefaults.saveSuccess")),e.createElement("p",{className:"text-sm text-green-700"},t("settings.eventDefaults.saveSuccessMessage")))),h&&e.createElement("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg flex items-start"},e.createElement(m,{path:P,size:1,className:"text-red-600 mr-3 flex-shrink-0"}),e.createElement("div",null,e.createElement("p",{className:"font-semibold text-red-800"},t("settings.eventDefaults.error")),e.createElement("p",{className:"text-sm text-red-700"},h))),e.createElement("form",{onSubmit:f,className:"space-y-6"},e.createElement("div",{className:"bg-white rounded-lg shadow p-6"},e.createElement("div",{className:"flex items-center gap-3 mb-4"},e.createElement(m,{path:le,size:1,className:"text-orange-600"}),e.createElement("h3",{className:"text-lg font-semibold text-gray-900"},t("settings.eventDefaults.mealDefaults.title"))),e.createElement("p",{className:"text-sm text-gray-600 mb-6"},t("settings.eventDefaults.mealDefaults.description")),e.createElement("div",{className:"mb-6"},e.createElement("h4",{className:"text-md font-semibold text-gray-800 mb-3"},t("settings.eventDefaults.mealDefaults.saturday")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},e.createElement("div",null,e.createElement("label",{htmlFor:"breakfastSat",className:"label-base"},t("settings.eventDefaults.mealDefaults.breakfast")),e.createElement("input",{type:"number",id:"breakfastSat",min:"0",max:"9999",value:s,onChange:o=>D(parseInt(o.target.value)||0),className:"input-base"})),e.createElement("div",null,e.createElement("label",{htmlFor:"lunchSat",className:"label-base"},t("settings.eventDefaults.mealDefaults.lunch")),e.createElement("input",{type:"number",id:"lunchSat",min:"0",max:"9999",value:z,onChange:o=>d(parseInt(o.target.value)||0),className:"input-base"})),e.createElement("div",null,e.createElement("label",{htmlFor:"bbqSat",className:"label-base"},t("settings.eventDefaults.mealDefaults.bbq")),e.createElement("input",{type:"number",id:"bbqSat",min:"0",max:"9999",value:y,onChange:o=>L(parseInt(o.target.value)||0),className:"input-base"})))),e.createElement("div",null,e.createElement("h4",{className:"text-md font-semibold text-gray-800 mb-3"},t("settings.eventDefaults.mealDefaults.sunday")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},e.createElement("div",null,e.createElement("label",{htmlFor:"breakfastSun",className:"label-base"},t("settings.eventDefaults.mealDefaults.breakfast")),e.createElement("input",{type:"number",id:"breakfastSun",min:"0",max:"9999",value:I,onChange:o=>T(parseInt(o.target.value)||0),className:"input-base"})),e.createElement("div",null,e.createElement("label",{htmlFor:"lunchSun",className:"label-base"},t("settings.eventDefaults.mealDefaults.lunch")),e.createElement("input",{type:"number",id:"lunchSun",min:"0",max:"9999",value:C,onChange:o=>M(parseInt(o.target.value)||0),className:"input-base"})),e.createElement("div",{className:"opacity-50"},e.createElement("label",{className:"label-base text-gray-400"},t("settings.eventDefaults.mealDefaults.bbq")),e.createElement("span",{className:"input-base bg-gray-100 cursor-not-allowed block w-full h-[2.5rem] rounded text-center text-gray-400","aria-disabled":"true"},"‚Äî"),e.createElement("p",{className:"text-xs text-gray-400 mt-1"},t("settings.eventDefaults.mealDefaults.sundayNoBbq")))))),e.createElement("div",{className:"bg-white rounded-lg shadow p-6"},e.createElement("div",{className:"flex items-center gap-3 mb-4"},e.createElement(m,{path:re,size:1,className:"text-orange-600"}),e.createElement("h3",{className:"text-lg font-semibold text-gray-900"},t("settings.eventDefaults.notifications.title"))),e.createElement("p",{className:"text-sm text-gray-600 mb-6"},t("settings.eventDefaults.notifications.description")),e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},e.createElement("div",null,e.createElement("label",{htmlFor:"emailNotifications",className:"font-medium text-gray-900"},t("settings.eventDefaults.notifications.emailNotifications")),e.createElement("p",{className:"text-sm text-gray-600"},t("settings.eventDefaults.notifications.emailNotificationsDesc"))),e.createElement("button",{type:"button",role:"switch","aria-checked":u,onClick:()=>w(!u),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${u?"bg-orange-600":"bg-gray-300"}`},e.createElement("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${u?"translate-x-5":"translate-x-0"}`}))),e.createElement("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg"},e.createElement("div",null,e.createElement("label",{htmlFor:"newSubscriptionNotify",className:"font-medium text-gray-900"},t("settings.eventDefaults.notifications.newSubscription")),e.createElement("p",{className:"text-sm text-gray-600"},t("settings.eventDefaults.notifications.newSubscriptionDesc"))),e.createElement("button",{type:"button",role:"switch","aria-checked":F,onClick:()=>r(!F),disabled:!u,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${F&&u?"bg-orange-600":"bg-gray-300"} ${u?"":"opacity-50 cursor-not-allowed"}`},e.createElement("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${F?"translate-x-5":"translate-x-0"}`}))),e.createElement("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg"},e.createElement("div",null,e.createElement("label",{htmlFor:"assignmentChangeNotify",className:"font-medium text-gray-900"},t("settings.eventDefaults.notifications.assignmentChange")),e.createElement("p",{className:"text-sm text-gray-600"},t("settings.eventDefaults.notifications.assignmentChangeDesc"))),e.createElement("button",{type:"button",role:"switch","aria-checked":i,onClick:()=>g(!i),disabled:!u,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${i&&u?"bg-orange-600":"bg-gray-300"} ${u?"":"opacity-50 cursor-not-allowed"}`},e.createElement("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${i?"translate-x-5":"translate-x-0"}`}))))),e.createElement("div",{className:"flex justify-end gap-3 bg-white rounded-lg shadow p-6"},e.createElement("button",{type:"button",onClick:_,disabled:x,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},t("settings.eventDefaults.reset")),e.createElement("button",{type:"submit",disabled:x,className:"btn-primary px-6 py-2 disabled:opacity-50 disabled:cursor-not-allowed"},t(x?"settings.eventDefaults.saving":"settings.eventDefaults.save")))))}function fe(){const{t}=A(),{settings:a,loading:n,updateSettings:b}=W(),{toastError:$,toastWarning:N}=B(),[k,x]=l.useState(!1),[E,Z]=l.useState(!1),[c,h]=l.useState("#3b82f6"),[p,s]=l.useState("Arvo, serif");l.useEffect(()=>{a&&(h(a.theme_color||"#3b82f6"),s(a.font_family||"Arvo, serif"))},[a]);const D=async()=>{var d;try{if(x(!0),!await b({theme_color:c,font_family:p}))throw new Error("Failed to update branding settings");Z(!0),setTimeout(()=>Z(!1),3e3)}catch(y){console.error("Error saving branding settings:",y),(d=y.message)!=null&&d.includes("updated by another admin")?N(y.message):$(y.message||t("settings.branding.errors.saveFailed"))}finally{x(!1)}},z=()=>{a&&(h(a.theme_color||"#3b82f6"),s(a.font_family||"Arvo, serif"))};return n?e.createElement("div",{className:"flex items-center justify-center p-8"},e.createElement("div",{className:"text-gray-500"},t("settings.branding.loading"))):e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"bg-white rounded-lg shadow p-6"},e.createElement("div",{className:"flex items-center justify-between mb-2"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement(m,{path:V,size:1,className:"text-orange-600"}),e.createElement("h2",{className:"text-xl font-bold text-gray-900"},t("settings.branding.title"))),e.createElement("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-orange-50 border border-orange-200 rounded-lg"},e.createElement(m,{path:O,size:.6,className:"text-orange-600"}),e.createElement("span",{className:"text-xs font-semibold text-orange-700 uppercase tracking-wide"},"Organization Setting"))),e.createElement("p",{className:"text-sm text-gray-600"},t("settings.branding.description")),e.createElement("p",{className:"mt-2 text-xs text-gray-500"},"üí° ",t("settings.branding.note"))),e.createElement("div",{className:"bg-white rounded-lg shadow p-6 space-y-6"},e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},t("settings.branding.themeColor.label")),e.createElement("p",{className:"text-xs text-gray-500 mb-3"},t("settings.branding.themeColor.description")),e.createElement("div",{className:"flex items-center gap-4"},e.createElement("input",{type:"color",value:c,onChange:d=>h(d.target.value),className:"h-12 w-24 border border-gray-300 rounded cursor-pointer"}),e.createElement("input",{type:"text",value:c,onChange:d=>h(d.target.value),placeholder:"#ffffff",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",maxLength:7})),e.createElement("div",{className:"mt-3 space-y-2"},e.createElement("div",{className:"p-4 rounded-lg border-2",style:{backgroundColor:c,borderColor:c}},e.createElement("p",{className:"font-bold text-white text-lg"},"Preview Text (White on Color)"),e.createElement("p",{className:"text-white text-sm opacity-90"},"The quick brown fox jumps over the lazy dog")),e.createElement("div",{className:"p-4 rounded-lg border-2 border-gray-300 bg-white"},e.createElement("p",{className:"font-bold text-lg",style:{color:c}},"Preview Text (Color on White)"),e.createElement("p",{className:"text-sm",style:{color:c}},"The quick brown fox jumps over the lazy dog")))),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},t("settings.branding.fontFamily.label")),e.createElement("p",{className:"text-xs text-gray-500 mb-3"},t("settings.branding.fontFamily.description")),e.createElement("select",{value:p,onChange:d=>s(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},e.createElement("option",{value:"Arvo, Sans-serif"},"Arvo (Default)"),e.createElement("option",{value:"Arial, sans-serif"},"Arial"),e.createElement("option",{value:"Helvetica, sans-serif"},"Helvetica"),e.createElement("option",{value:"Georgia, serif"},"Georgia"),e.createElement("option",{value:"'Times New Roman', serif"},"Times New Roman"),e.createElement("option",{value:"'Courier New', monospace"},"Courier New"),e.createElement("option",{value:"Verdana, sans-serif"},"Verdana"),e.createElement("option",{value:"'Comic Sans MS', cursive"},"Comic Sans MS"),e.createElement("option",{value:"Impact, sans-serif"},"Impact")),e.createElement("div",{className:"mt-3 p-4 rounded-lg border border-gray-300 bg-white",style:{fontFamily:p}},e.createElement("p",{className:"text-lg text-gray-900 font-semibold"},"The quick brown fox jumps over the lazy dog"),e.createElement("p",{className:"text-sm text-gray-700 mt-1"},"1234567890 !@#$%^&*()")))),e.createElement("div",{className:"flex items-center justify-between"},e.createElement("button",{onClick:z,className:"px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50"},t("settings.branding.reset")),e.createElement("button",{onClick:D,disabled:k,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},k?t("common.saving"):E?e.createElement(e.Fragment,null,e.createElement(m,{path:G,size:.8}),t("settings.branding.saveSuccess")):t("common.save"))))}function be(){const{t}=A();return e.createElement("div",{className:"bg-white rounded-lg shadow p-6"},e.createElement("div",{className:"flex items-center justify-between mb-6"},e.createElement("div",{className:"flex items-center gap-3"},e.createElement(m,{path:H,size:1.2,className:"text-blue-600"}),e.createElement("div",null,e.createElement("h2",{className:"text-xl font-bold text-gray-900"},t("settings.uiLanguage.title")),e.createElement("p",{className:"text-sm text-gray-600 mt-1"},t("settings.uiLanguage.description")))),e.createElement("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-blue-50 border border-blue-200 rounded-lg"},e.createElement(m,{path:K,size:.6,className:"text-blue-600"}),e.createElement("span",{className:"text-xs font-semibold text-blue-700 uppercase tracking-wide"},"Personal Setting"))),e.createElement("div",{className:"space-y-4"},e.createElement("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg"},e.createElement("div",{className:"flex items-start gap-3"},e.createElement(m,{path:H,size:.9,className:"text-blue-600 flex-shrink-0 mt-0.5"}),e.createElement("div",{className:"text-sm text-blue-800"},e.createElement("p",{className:"font-semibold mb-1"},t("settings.uiLanguage.note.title")),e.createElement("p",null,t("settings.uiLanguage.note.description"))))),e.createElement("div",null,e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-3"},t("settings.uiLanguage.selectLanguage")),e.createElement(de,null))))}function xe(){return e.createElement(ue,null)}function Ee(){const{t}=A(),{settings:a,loading:n,error:b,updateSettings:$}=W(),{toastError:N,toastWarning:k}=B(),[x,E]=l.useState(!1),[Z,c]=l.useState(!1),[h,p]=l.useState(null),[s,D]=l.useState(51.898095),[z,d]=l.useState(5.772961),[y,L]=l.useState(17),[I,T]=l.useState(14),[C,M]=l.useState(22),[u,w]=l.useState(21);l.useEffect(()=>{a&&(D(a.map_center_lat??51.898095),d(a.map_center_lng??5.772961),L(a.map_default_zoom??17),T(a.map_min_zoom??14),M(a.map_max_zoom??22),w(a.map_search_zoom??21))},[a]);const F=async i=>{var g;i.preventDefault(),E(!0),p(null),c(!1);try{if(I>y||y>C)throw new Error(t("settings.mapDefaults.errors.invalidZoomLevels"));if(u<I||u>C)throw new Error(t("settings.mapDefaults.errors.invalidSearchZoom"));if(!await $({map_center_lat:parseFloat(s),map_center_lng:parseFloat(z),map_default_zoom:parseInt(y),map_min_zoom:parseInt(I),map_max_zoom:parseInt(C),map_search_zoom:parseInt(u)}))throw new Error("Failed to update map settings");c(!0),setTimeout(()=>c(!1),3e3)}catch(f){console.error("Failed to save map settings:",f),(g=f.message)!=null&&g.includes("updated by another admin")?(k(f.message),p(t("settings.mapDefaults.errors.saveFailed"))):(N(f.message||t("settings.mapDefaults.errors.saveFailed")),p(f.message||t("settings.mapDefaults.errors.saveFailed")))}finally{E(!1)}},r=()=>{a&&(D(a.map_center_lat??51.898095),d(a.map_center_lng??5.772961),L(a.map_default_zoom??17),T(a.map_min_zoom??14),M(a.map_max_zoom??22),w(a.map_search_zoom??21))};return n?e.createElement("div",{className:"bg-white rounded-lg shadow p-6"},e.createElement("div",{className:"flex items-center justify-center py-12"},e.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"}),e.createElement("span",{className:"ml-3 text-gray-600"},t("settings.mapDefaults.loading")))):e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"bg-white rounded-lg shadow p-6"},e.createElement("div",{className:"flex items-center justify-between mb-2"},e.createElement("h2",{className:"text-xl font-bold text-gray-900"},t("settings.mapDefaults.title")),e.createElement("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-orange-50 border border-orange-200 rounded-lg"},e.createElement(m,{path:O,size:.6,className:"text-orange-600"}),e.createElement("span",{className:"text-xs font-semibold text-orange-700 uppercase tracking-wide"},"Organization Setting"))),e.createElement("p",{className:"text-sm text-gray-600"},t("settings.mapDefaults.description"))),Z&&e.createElement("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg flex items-start"},e.createElement(m,{path:G,size:1,className:"text-green-600 mr-3 flex-shrink-0"}),e.createElement("div",null,e.createElement("p",{className:"font-semibold text-green-800"},t("settings.mapDefaults.saveSuccess")),e.createElement("p",{className:"text-sm text-green-700"},t("settings.mapDefaults.saveSuccessMessage")))),h&&e.createElement("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg flex items-start"},e.createElement(m,{path:P,size:1,className:"text-red-600 mr-3 flex-shrink-0"}),e.createElement("div",null,e.createElement("p",{className:"font-semibold text-red-800"},t("settings.mapDefaults.error")),e.createElement("p",{className:"text-sm text-red-700"},h))),e.createElement("form",{onSubmit:F,className:"space-y-6"},e.createElement("div",{className:"bg-white rounded-lg shadow p-6"},e.createElement("div",{className:"flex items-center gap-3 mb-4"},e.createElement(m,{path:q,size:1,className:"text-orange-600"}),e.createElement("h3",{className:"text-lg font-semibold text-gray-900"},t("settings.mapDefaults.mapCenter.title"))),e.createElement("p",{className:"text-sm text-gray-600 mb-6"},t("settings.mapDefaults.mapCenter.description")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},e.createElement("div",null,e.createElement("label",{htmlFor:"mapCenterLat",className:"label-base"},t("settings.mapDefaults.mapCenter.latitude")),e.createElement("input",{type:"number",id:"mapCenterLat",step:"0.000001",min:"-90",max:"90",value:s,onChange:i=>D(i.target.value),className:"input-base",placeholder:"51.898095"}),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},t("settings.mapDefaults.mapCenter.latitudeRange"))),e.createElement("div",null,e.createElement("label",{htmlFor:"mapCenterLng",className:"label-base"},t("settings.mapDefaults.mapCenter.longitude")),e.createElement("input",{type:"number",id:"mapCenterLng",step:"0.000001",min:"-180",max:"180",value:z,onChange:i=>d(i.target.value),className:"input-base",placeholder:"5.772961"}),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},t("settings.mapDefaults.mapCenter.longitudeRange")))),e.createElement("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-start gap-2"},e.createElement(m,{path:Q,size:.8,className:"text-blue-600 flex-shrink-0 mt-0.5"}),e.createElement("p",{className:"text-sm text-blue-800"},t("settings.mapDefaults.mapCenter.hint")))),e.createElement("div",{className:"bg-white rounded-lg shadow p-6"},e.createElement("div",{className:"flex items-center gap-3 mb-4"},e.createElement(m,{path:q,size:1,className:"text-orange-600"}),e.createElement("h3",{className:"text-lg font-semibold text-gray-900"},t("settings.mapDefaults.zoomLevels.title"))),e.createElement("p",{className:"text-sm text-gray-600 mb-6"},t("settings.mapDefaults.zoomLevels.description")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},e.createElement("div",null,e.createElement("label",{htmlFor:"mapDefaultZoom",className:"label-base"},t("settings.mapDefaults.zoomLevels.defaultZoom")),e.createElement("input",{type:"number",id:"mapDefaultZoom",min:"1",max:"22",value:y,onChange:i=>L(i.target.value),className:"input-base"}),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},t("settings.mapDefaults.zoomLevels.defaultZoomDesc"))),e.createElement("div",null,e.createElement("label",{htmlFor:"mapSearchZoom",className:"label-base"},t("settings.mapDefaults.zoomLevels.searchZoom")),e.createElement("input",{type:"number",id:"mapSearchZoom",min:"1",max:"22",value:u,onChange:i=>w(i.target.value),className:"input-base"}),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},t("settings.mapDefaults.zoomLevels.searchZoomDesc"))),e.createElement("div",null,e.createElement("label",{htmlFor:"mapMinZoom",className:"label-base"},t("settings.mapDefaults.zoomLevels.minZoom")),e.createElement("input",{type:"number",id:"mapMinZoom",min:"1",max:"22",value:I,onChange:i=>T(i.target.value),className:"input-base"}),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},t("settings.mapDefaults.zoomLevels.minZoomDesc"))),e.createElement("div",null,e.createElement("label",{htmlFor:"mapMaxZoom",className:"label-base"},t("settings.mapDefaults.zoomLevels.maxZoom")),e.createElement("input",{type:"number",id:"mapMaxZoom",min:"1",max:"22",value:C,onChange:i=>M(i.target.value),className:"input-base"}),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},t("settings.mapDefaults.zoomLevels.maxZoomDesc")))),e.createElement("div",{className:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg"},e.createElement("p",{className:"text-sm text-amber-800"},e.createElement("span",{className:"font-medium"},t("settings.mapDefaults.zoomLevels.constraint"),":")," ",t("settings.mapDefaults.zoomLevels.constraintDesc")))),e.createElement("div",{className:"flex justify-end gap-3 bg-white rounded-lg shadow p-6"},e.createElement("button",{type:"button",onClick:r,disabled:x,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},t("settings.mapDefaults.reset")),e.createElement("button",{type:"submit",disabled:x,className:"btn-primary px-6 py-2 disabled:opacity-50 disabled:cursor-not-allowed"},t(x?"settings.mapDefaults.saving":"settings.mapDefaults.save")))))}function ve({selectedYear:t,setSelectedYear:a}){const{t:n}=A(),{settings:b,loading:$}=W(),{settings:N,loading:k,updateSettings:x,resetToGlobal:E}=ce(t),{toastError:Z,toastWarning:c,confirm:h}=B(),[p,s]=l.useState(!1),[D,z]=l.useState(!1),[d,y]=l.useState(null),[L,I]=l.useState(51.898095),[T,C]=l.useState(5.772961),[M,u]=l.useState(17),[w,F]=l.useState(14),[r,i]=l.useState(22),[g,f]=l.useState(21);l.useEffect(()=>{N?(I(N.map_center_lat??51.898095),C(N.map_center_lng??5.772961),u(N.map_default_zoom??17),F(N.map_min_zoom??14),i(N.map_max_zoom??22),f(N.map_search_zoom??21)):b&&(I(b.map_center_lat??51.898095),C(b.map_center_lng??5.772961),u(b.map_default_zoom??17),F(b.map_min_zoom??14),i(b.map_max_zoom??22),f(b.map_search_zoom??21))},[N,b]);const _=async v=>{v.preventDefault(),s(!0),y(null),z(!1);try{if(w>M||M>r)throw new Error(n("settings.mapDefaults.errors.invalidZoomLevels"));if(g<w||g>r)throw new Error(n("settings.mapDefaults.errors.invalidSearchZoom"));if(!await x({map_center_lat:parseFloat(L),map_center_lng:parseFloat(T),map_default_zoom:parseInt(M),map_min_zoom:parseInt(w),map_max_zoom:parseInt(r),map_search_zoom:parseInt(g)}))throw new Error("Failed to update map settings");z(!0),setTimeout(()=>z(!1),3e3)}catch(j){console.error("Failed to save map settings:",j),Z(j.message||n("settings.mapDefaults.errors.saveFailed")),y(j.message||n("settings.mapDefaults.errors.saveFailed"))}finally{s(!1)}},o=async()=>{if(await h({title:"Reset to Global Settings",message:`Reset map settings for ${t} to use global organization defaults? This will delete any event-specific settings.`,confirmText:"Reset",variant:"warning"}))try{s(!0),await E()&&(z(!0),setTimeout(()=>z(!1),3e3))}catch(j){console.error("Failed to reset to global settings:",j),Z("Failed to reset settings")}finally{s(!1)}},R=$||k,S=!!N;return R?e.createElement("div",{className:"bg-white rounded-lg shadow p-6"},e.createElement("div",{className:"flex items-center justify-center py-12"},e.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-600"}),e.createElement("span",{className:"ml-3 text-gray-600"},n("settings.mapDefaults.loading")))):e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"bg-white rounded-lg shadow p-6"},e.createElement("div",{className:"flex items-center justify-between mb-2"},e.createElement("h2",{className:"text-xl font-bold text-gray-900"},n("settings.mapDefaults.title")," - ",t),e.createElement("div",{className:"flex items-center gap-2"},e.createElement("div",{className:`flex items-center gap-2 px-3 py-1.5 border rounded-lg ${S?"bg-green-50 border-green-200":"bg-orange-50 border-orange-200"}`},e.createElement(m,{path:O,size:.6,className:S?"text-green-600":"text-orange-600"}),e.createElement("span",{className:`text-xs font-semibold uppercase tracking-wide ${S?"text-green-700":"text-orange-700"}`},S?"Event Settings":"Global Defaults")))),e.createElement("div",{className:"mb-4"},e.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Select Event Year"),e.createElement("select",{value:t,onChange:v=>a(parseInt(v.target.value)),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},e.createElement("option",{value:2024},"2024"),e.createElement("option",{value:2025},"2025"),e.createElement("option",{value:2026},"2026"),e.createElement("option",{value:2027},"2027"))),e.createElement("p",{className:"text-sm text-gray-600"},S?`Configure map settings specific to the ${t} event.`:`Using global organization defaults for ${t}. Configure event-specific settings below.`)),D&&e.createElement("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded-lg flex items-start"},e.createElement(m,{path:G,size:1,className:"text-green-600 mr-3 flex-shrink-0"}),e.createElement("div",null,e.createElement("p",{className:"font-semibold text-green-800"},n("settings.mapDefaults.saveSuccess")),e.createElement("p",{className:"text-sm text-green-700"},S?`Map settings updated for ${t}.`:`Settings reset to global defaults for ${t}.`))),d&&e.createElement("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg flex items-start"},e.createElement(m,{path:P,size:1,className:"text-red-600 mr-3 flex-shrink-0"}),e.createElement("div",null,e.createElement("p",{className:"font-semibold text-red-800"},n("settings.mapDefaults.error")),e.createElement("p",{className:"text-sm text-red-700"},d))),e.createElement("form",{onSubmit:_,className:"space-y-6"},e.createElement("div",{className:"bg-white rounded-lg shadow p-6"},e.createElement("div",{className:"flex items-center gap-3 mb-4"},e.createElement(m,{path:q,size:1,className:"text-orange-600"}),e.createElement("h3",{className:"text-lg font-semibold text-gray-900"},n("settings.mapDefaults.mapCenter.title"))),e.createElement("p",{className:"text-sm text-gray-600 mb-6"},n("settings.mapDefaults.mapCenter.description")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},e.createElement("div",null,e.createElement("label",{htmlFor:"mapCenterLat",className:"label-base"},n("settings.mapDefaults.mapCenter.latitude")),e.createElement("input",{type:"number",id:"mapCenterLat",step:"0.000001",min:"-90",max:"90",value:L,onChange:v=>I(v.target.value),className:"input-base",placeholder:"51.898095"}),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},n("settings.mapDefaults.mapCenter.latitudeRange"))),e.createElement("div",null,e.createElement("label",{htmlFor:"mapCenterLng",className:"label-base"},n("settings.mapDefaults.mapCenter.longitude")),e.createElement("input",{type:"number",id:"mapCenterLng",step:"0.000001",min:"-180",max:"180",value:T,onChange:v=>C(v.target.value),className:"input-base",placeholder:"5.772961"}),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},n("settings.mapDefaults.mapCenter.longitudeRange")))),e.createElement("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-start gap-2"},e.createElement(m,{path:Q,size:.8,className:"text-blue-600 flex-shrink-0 mt-0.5"}),e.createElement("p",{className:"text-sm text-blue-800"},n("settings.mapDefaults.mapCenter.hint")))),e.createElement("div",{className:"bg-white rounded-lg shadow p-6"},e.createElement("div",{className:"flex items-center gap-3 mb-4"},e.createElement(m,{path:q,size:1,className:"text-orange-600"}),e.createElement("h3",{className:"text-lg font-semibold text-gray-900"},n("settings.mapDefaults.zoomLevels.title"))),e.createElement("p",{className:"text-sm text-gray-600 mb-6"},n("settings.mapDefaults.zoomLevels.description")),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},e.createElement("div",null,e.createElement("label",{htmlFor:"mapDefaultZoom",className:"label-base"},n("settings.mapDefaults.zoomLevels.defaultZoom")),e.createElement("input",{type:"number",id:"mapDefaultZoom",min:"1",max:"22",value:M,onChange:v=>u(v.target.value),className:"input-base"}),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},n("settings.mapDefaults.zoomLevels.defaultZoomDesc"))),e.createElement("div",null,e.createElement("label",{htmlFor:"mapSearchZoom",className:"label-base"},n("settings.mapDefaults.zoomLevels.searchZoom")),e.createElement("input",{type:"number",id:"mapSearchZoom",min:"1",max:"22",value:g,onChange:v=>f(v.target.value),className:"input-base"}),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},n("settings.mapDefaults.zoomLevels.searchZoomDesc"))),e.createElement("div",null,e.createElement("label",{htmlFor:"mapMinZoom",className:"label-base"},n("settings.mapDefaults.zoomLevels.minZoom")),e.createElement("input",{type:"number",id:"mapMinZoom",min:"1",max:"22",value:w,onChange:v=>F(v.target.value),className:"input-base"}),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},n("settings.mapDefaults.zoomLevels.minZoomDesc"))),e.createElement("div",null,e.createElement("label",{htmlFor:"mapMaxZoom",className:"label-base"},n("settings.mapDefaults.zoomLevels.maxZoom")),e.createElement("input",{type:"number",id:"mapMaxZoom",min:"1",max:"22",value:r,onChange:v=>i(v.target.value),className:"input-base"}),e.createElement("p",{className:"text-xs text-gray-500 mt-1"},n("settings.mapDefaults.zoomLevels.maxZoomDesc")))),e.createElement("div",{className:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg"},e.createElement("p",{className:"text-sm text-amber-800"},e.createElement("span",{className:"font-medium"},n("settings.mapDefaults.zoomLevels.constraint"),":")," ",n("settings.mapDefaults.zoomLevels.constraintDesc")))),e.createElement("div",{className:"flex justify-between bg-white rounded-lg shadow p-6"},e.createElement("button",{type:"button",onClick:o,disabled:p||!S,className:"flex items-center gap-2 px-6 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},e.createElement(m,{path:me,size:.8}),n("settings.mapDefaults.reset")),e.createElement("button",{type:"submit",disabled:p,className:"btn-primary px-6 py-2 disabled:opacity-50 disabled:cursor-not-allowed"},n(p?"settings.mapDefaults.saving":"settings.mapDefaults.save")))))}function Ce({selectedYear:t,setSelectedYear:a}){var p;const{t:n}=A(),{role:b,isSuperAdmin:$,isSystemManager:N,isEventManager:k}=X(),[x,E]=l.useState("user-management"),c=[{id:"ui-language",label:n("settings.uiLanguage.title"),icon:H,roles:["super_admin","system_manager","event_manager"],component:e.createElement(be,null),scope:"personal",description:"Your personal language preference"},{id:"user-management",label:n("settings.userManagement.title"),icon:J,roles:["super_admin","system_manager"],component:e.createElement(ge,null),scope:"organization",description:"Manage user accounts and roles"},{id:"category-settings",label:n("settings.categoryManagement.title"),icon:ie,roles:["super_admin","system_manager"],component:e.createElement(xe,null),scope:"organization",description:"Company categories for all users"},{id:"branding",label:n("settings.branding.title"),icon:V,roles:["super_admin","system_manager"],component:e.createElement(fe,null),scope:"organization",description:"Logo, colors, and app name"},{id:"map-defaults",label:n("settings.mapDefaults.title"),icon:q,roles:["super_admin","system_manager"],component:e.createElement(Ee,null),scope:"organization",description:"Default map position and zoom"},{id:"map-settings",label:"Map Settings by Year",icon:q,roles:["super_admin","system_manager"],component:e.createElement(ve,{selectedYear:t,setSelectedYear:a}),scope:"organization",description:"Configure map settings per event year"},{id:"event-defaults",label:n("settings.eventDefaults.title"),icon:oe,roles:["super_admin","system_manager","event_manager"],component:e.createElement(pe,null),scope:"organization",description:"Default meal counts for events"},{id:"advanced",label:n("settings.advanced.title"),icon:P,roles:["super_admin"],component:e.createElement(Ne,null),scope:"organization",description:"System configuration (danger zone)"}].filter(s=>$?!0:s.roles.includes(b));e.useEffect(()=>{var s;c.find(D=>D.id===x)||E(((s=c[0])==null?void 0:s.id)||"event-defaults")},[b]);const h=(p=c.find(s=>s.id===x))==null?void 0:p.component;return e.createElement("div",{className:"h-full flex flex-col"},e.createElement("div",{className:"bg-white border-b border-gray-200 px-6 py-4"},e.createElement("h1",{className:"text-2xl font-bold text-gray-900"},n("settings.title")),e.createElement("p",{className:"text-sm text-gray-500 mt-1"},n("settings.subtitle"),e.createElement("span",{className:"ml-2 px-2 py-0.5 bg-blue-100 text-blue-800 rounded text-xs font-medium capitalize"},b==null?void 0:b.replace("_"," ")))),e.createElement("div",{className:"flex-1 flex overflow-hidden"},e.createElement("aside",{className:"w-64 bg-white border-r border-gray-200 overflow-y-auto"},e.createElement("nav",{className:"p-4 space-y-4"},c.filter(s=>s.scope==="personal").length>0&&e.createElement("div",null,e.createElement("div",{className:"flex items-center gap-2 px-4 py-2 mb-1"},e.createElement(m,{path:K,size:.7,className:"text-blue-600"}),e.createElement("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Personal Settings")),e.createElement("div",{className:"space-y-1"},c.filter(s=>s.scope==="personal").map(s=>e.createElement("button",{key:s.id,onClick:()=>E(s.id),className:`w-full flex items-start gap-3 px-4 py-3 rounded-lg text-left transition-colors ${x===s.id?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"}`,title:s.description},e.createElement(m,{path:s.icon,size:.9,className:"flex-shrink-0 mt-0.5"}),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"font-medium"},s.label),e.createElement("div",{className:"text-xs text-gray-500 mt-0.5"},s.description)))))),c.filter(s=>s.scope==="organization").length>0&&e.createElement("div",null,e.createElement("div",{className:"flex items-center gap-2 px-4 py-2 mb-1"},e.createElement(m,{path:O,size:.7,className:"text-orange-600"}),e.createElement("h3",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Organization Settings")),e.createElement("div",{className:"space-y-1"},c.filter(s=>s.scope==="organization").map(s=>e.createElement("button",{key:s.id,onClick:()=>E(s.id),className:`w-full flex items-start gap-3 px-4 py-3 rounded-lg text-left transition-colors ${x===s.id?"bg-orange-50 text-orange-700 font-medium":"text-gray-700 hover:bg-gray-50"}`,title:s.description},e.createElement(m,{path:s.icon,size:.9,className:"flex-shrink-0 mt-0.5"}),e.createElement("div",{className:"flex-1 min-w-0"},e.createElement("div",{className:"font-medium"},s.label),e.createElement("div",{className:"text-xs text-gray-500 mt-0.5"},s.description)))))))),e.createElement("main",{className:"flex-1 overflow-y-auto bg-gray-50 p-6"},h)))}function Ne(){const{t}=A();return e.createElement("div",{className:"bg-white rounded-lg shadow p-6"},e.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2"},e.createElement(m,{path:P,size:1,className:"text-red-600"}),t("settings.advanced.title")),e.createElement("p",{className:"text-gray-600"},t("settings.advanced.description")),e.createElement("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg"},e.createElement("p",{className:"text-sm text-red-800"},"‚ö†Ô∏è Advanced Settings (Danger Zone) coming soon...")))}export{Ce as default};
