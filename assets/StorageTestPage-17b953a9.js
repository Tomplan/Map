import{r as a,s as g,j as e}from"./index-5ece8994.js";import{c as p,L as b}from"./LogoUploader-0e25aab5.js";function f(){const[t,i]=a.useState({checking:!0,exists:!1,error:null}),[o,n]=a.useState(""),[l,x]=a.useState([]),[r,m]=a.useState(null);a.useEffect(()=>{d(),h()},[]);const d=async()=>{i({checking:!0,exists:!1,error:null});const s=await p();i({checking:!1,exists:s.exists,error:s.error})},h=async()=>{const{data:{user:s}}=await g.auth.getUser();m(s)},u=(s,c)=>{n(s),x([{timestamp:new Date().toISOString(),url:s,path:c,success:!0},...l])};return e.jsxs("div",{className:"max-w-4xl mx-auto p-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Supabase Storage Test Page"}),e.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Authentication Status"}),r?e.jsxs("div",{className:"text-green-600 flex items-center gap-2",children:[e.jsx("span",{children:"✅"}),e.jsxs("span",{children:["Authenticated as: ",r.email]})]}):e.jsxs("div",{className:"text-red-600 flex items-center gap-2",children:[e.jsx("span",{children:"❌"}),e.jsx("span",{children:"Not authenticated - Please log in first"})]})]}),e.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Storage Bucket Status"}),e.jsx("button",{onClick:d,className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:"Recheck"})]}),t.checking?e.jsx("div",{className:"text-gray-600",children:"Checking bucket..."}):t.exists?e.jsxs("div",{className:"text-green-600 flex items-center gap-2",children:[e.jsx("span",{children:"✅"}),e.jsx("span",{children:"Bucket 'logos' exists and is accessible"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"text-red-600 flex items-center gap-2 mb-2",children:[e.jsx("span",{children:"❌"}),e.jsx("span",{children:"Bucket 'logos' not found or inaccessible"})]}),t.error&&e.jsxs("div",{className:"text-sm text-gray-600 ml-6",children:["Error: ",t.error]}),e.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded text-sm",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Setup Required:"}),e.jsxs("ol",{className:"list-decimal ml-5 space-y-1",children:[e.jsx("li",{children:"Go to Supabase Dashboard → Storage"}),e.jsx("li",{children:"Create a new public bucket named 'logos'"}),e.jsx("li",{children:"Set up RLS policies (see SUPABASE_STORAGE_SETUP.md)"}),e.jsx("li",{children:"Refresh this page"})]})]})]})]}),r&&t.exists&&e.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-white",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Test Logo Upload"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Upload a test image to verify everything works correctly."}),e.jsx(b,{currentLogo:o,onUploadComplete:u,folder:"test",label:"Upload Test Image",showPreview:!0,allowDelete:!0,onDelete:()=>n("")})]}),l.length>0&&e.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50",children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Upload History"}),e.jsx("div",{className:"space-y-2",children:l.map((s,c)=>e.jsxs("div",{className:"p-3 bg-white rounded border text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-green-600 font-semibold",children:"✓ Success"}),e.jsx("span",{className:"text-gray-500",children:new Date(s.timestamp).toLocaleString()})]}),e.jsxs("div",{className:"text-gray-600",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"URL:"})," ",s.url]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Path:"})," ",s.path]})]}),s.url&&e.jsx("img",{src:s.url,alt:"Uploaded",className:"mt-2 h-20 object-contain border rounded"})]},c))})]}),e.jsxs("div",{className:"p-4 border rounded-lg bg-blue-50",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Documentation"}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"For complete setup instructions, see:"}),e.jsxs("ul",{className:"list-disc ml-5 text-sm text-gray-700",children:[e.jsx("li",{children:"SUPABASE_STORAGE_SETUP.md - Bucket configuration and policies"}),e.jsx("li",{children:"LOGO_UPLOADER_INTEGRATION.md - Integration examples"})]})]})]})}export{f as default};
