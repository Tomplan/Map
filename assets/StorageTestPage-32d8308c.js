import{r as l,s as p,R as e}from"./index-1e4c7e6c.js";import{c as b,L as x}from"./LogoUploader-aa5b1e88.js";function f(){const[a,c]=l.useState({checking:!0,exists:!1,error:null}),[i,m]=l.useState(""),[s,u]=l.useState([]),[r,d]=l.useState(null);l.useEffect(()=>{o(),g()},[]);const o=async()=>{c({checking:!0,exists:!1,error:null});const t=await b();c({checking:!1,exists:t.exists,error:t.error})},g=async()=>{const{data:{user:t}}=await p.auth.getUser();d(t)},E=(t,n)=>{m(t),u([{timestamp:new Date().toISOString(),url:t,path:n,success:!0},...s])};return e.createElement("div",{className:"max-w-4xl mx-auto p-8"},e.createElement("h1",{className:"text-3xl font-bold mb-6"},"Supabase Storage Test Page"),e.createElement("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50"},e.createElement("h2",{className:"text-xl font-semibold mb-3"},"Authentication Status"),r?e.createElement("div",{className:"text-green-600 flex items-center gap-2"},e.createElement("span",null,"✅"),e.createElement("span",null,"Authenticated as: ",r.email)):e.createElement("div",{className:"text-red-600 flex items-center gap-2"},e.createElement("span",null,"❌"),e.createElement("span",null,"Not authenticated - Please log in first"))),e.createElement("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50"},e.createElement("div",{className:"flex items-center justify-between mb-3"},e.createElement("h2",{className:"text-xl font-semibold"},"Storage Bucket Status"),e.createElement("button",{onClick:o,className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm"},"Recheck")),a.checking?e.createElement("div",{className:"text-gray-600"},"Checking bucket..."):a.exists?e.createElement("div",{className:"text-green-600 flex items-center gap-2"},e.createElement("span",null,"✅"),e.createElement("span",null,"Bucket 'logos' exists and is accessible")):e.createElement("div",null,e.createElement("div",{className:"text-red-600 flex items-center gap-2 mb-2"},e.createElement("span",null,"❌"),e.createElement("span",null,"Bucket 'logos' not found or inaccessible")),a.error&&e.createElement("div",{className:"text-sm text-gray-600 ml-6"},"Error: ",a.error),e.createElement("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded text-sm"},e.createElement("p",{className:"font-semibold mb-2"},"Setup Required:"),e.createElement("ol",{className:"list-decimal ml-5 space-y-1"},e.createElement("li",null,"Go to Supabase Dashboard → Storage"),e.createElement("li",null,"Create a new public bucket named 'logos'"),e.createElement("li",null,"Set up RLS policies (see SUPABASE_STORAGE_SETUP.md)"),e.createElement("li",null,"Refresh this page"))))),r&&a.exists&&e.createElement("div",{className:"mb-6 p-4 border rounded-lg bg-white"},e.createElement("h2",{className:"text-xl font-semibold mb-3"},"Test Logo Upload"),e.createElement("p",{className:"text-sm text-gray-600 mb-4"},"Upload a test image to verify everything works correctly."),e.createElement(x,{currentLogo:i,onUploadComplete:E,folder:"test",label:"Upload Test Image",showPreview:!0,allowDelete:!0,onDelete:()=>m("")})),s.length>0&&e.createElement("div",{className:"mb-6 p-4 border rounded-lg bg-gray-50"},e.createElement("h2",{className:"text-xl font-semibold mb-3"},"Upload History"),e.createElement("div",{className:"space-y-2"},s.map((t,n)=>e.createElement("div",{key:n,className:"p-3 bg-white rounded border text-sm"},e.createElement("div",{className:"flex items-center gap-2 mb-1"},e.createElement("span",{className:"text-green-600 font-semibold"},"✓ Success"),e.createElement("span",{className:"text-gray-500"},new Date(t.timestamp).toLocaleString())),e.createElement("div",{className:"text-gray-600"},e.createElement("div",null,e.createElement("strong",null,"URL:")," ",t.url),e.createElement("div",null,e.createElement("strong",null,"Path:")," ",t.path)),t.url&&e.createElement("img",{src:t.url,alt:"Uploaded",className:"mt-2 h-20 object-contain border rounded"}))))),e.createElement("div",{className:"p-4 border rounded-lg bg-blue-50"},e.createElement("h2",{className:"text-xl font-semibold mb-2"},"Documentation"),e.createElement("p",{className:"text-sm text-gray-700 mb-2"},"For complete setup instructions, see:"),e.createElement("ul",{className:"list-disc ml-5 text-sm text-gray-700"},e.createElement("li",null,"SUPABASE_STORAGE_SETUP.md - Bucket configuration and policies"),e.createElement("li",null,"LOGO_UPLOADER_INTEGRATION.md - Integration examples"))))}export{f as default};
