import{r as t,s as c}from"./index-8fb29835.js";function h(n){const[a,o]=t.useState(0),[i,u]=t.useState(!0),[g,l]=t.useState(null);return t.useEffect(()=>{(async()=>{try{u(!0);const{data:e,error:r}=await c.from("subscription_counts").select("count").eq("event_year",n).single();if(r)throw console.error("Error loading subscription count:",r),r;o((e==null?void 0:e.count)||0)}catch(e){console.error("Error loading subscription count:",e),l(e.message),o(0)}finally{u(!1)}})();const s=c.channel(`subscription-count-${n}-${Date.now()}-${Math.random()}`).on("postgres_changes",{event:"*",schema:"public",table:"subscription_counts"},e=>{(e.new&&e.new.event_year===n||e.old&&e.old.event_year===n)&&(e.new?o(e.new.count):e.eventType==="DELETE"&&o(0))}).subscribe();return()=>{c.removeChannel(s)}},[n]),{count:a,loading:i,error:g}}function b(n){const[a,o]=t.useState(0),[i,u]=t.useState(!0),[g,l]=t.useState(null);return t.useEffect(()=>{(async()=>{try{u(!0);const{data:e,error:r}=await c.from("assignment_counts").select("count").eq("event_year",n).single();if(r)throw console.error("Error loading assignment count:",r),r;o((e==null?void 0:e.count)||0)}catch(e){console.error("Error loading assignment count:",e),l(e.message),o(0)}finally{u(!1)}})();const s=c.channel(`assignment-count-${n}-${Date.now()}-${Math.random()}`).on("postgres_changes",{event:"*",schema:"public",table:"assignment_counts"},e=>{(e.new&&e.new.event_year===n||e.old&&e.old.event_year===n)&&(e.new?o(e.new.count):e.eventType==="DELETE"&&o(0))}).subscribe();return()=>{c.removeChannel(s)}},[n]),{count:a,loading:i,error:g}}function E(n){const[a,o]=t.useState(0),[i,u]=t.useState(!0),[g,l]=t.useState(null);return t.useEffect(()=>{const f=async()=>{try{u(!0);const{data:e,error:r}=await c.from("marker_counts").select("count").eq("event_year",n).single();if(r)throw r;o((e==null?void 0:e.count)||0)}catch(e){console.error("Error loading marker count:",e),l(e.message),o(0)}finally{u(!1)}};f();const s=c.channel(`marker-count-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"marker_counts"},e=>{f()}).subscribe();return()=>{c.removeChannel(s)}},[n]),{count:a,loading:i,error:g}}function p(){const[n,a]=t.useState(0),[o,i]=t.useState(!0),[u,g]=t.useState(null);return t.useEffect(()=>{const l=async()=>{try{i(!0);const{data:s,error:e}=await c.from("company_counts").select("count").single();if(e)throw e;a((s==null?void 0:s.count)||0)}catch(s){console.error("Error loading company count:",s),g(s.message),a(0)}finally{i(!1)}};l();const f=c.channel("company-count").on("postgres_changes",{event:"*",schema:"public",table:"company_counts"},s=>{l()}).subscribe();return()=>{c.removeChannel(f)}},[]),{count:n,loading:o,error:u}}export{b as a,E as b,p as c,h as u};
