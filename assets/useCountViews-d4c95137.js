import{r,s as a}from"./index-e53cdd07.js";function h(n){const[f,s]=r.useState(0),[m,u]=r.useState(!0),[g,i]=r.useState(null);return r.useEffect(()=>{if(n==null||Number.isNaN(Number(n))){u(!1),s(0),i(null);return}(async()=>{try{u(!0);const e=a.from("subscription_counts").select("count").eq("event_year",n);let t;e&&typeof e.maybeSingle=="function"?t=await e.maybeSingle():e&&typeof e.single=="function"?t=await e.single():t=await e;const{data:c,error:l}=t||{};if(l)throw console.error("Error loading subscription count:",l),l;s((c==null?void 0:c.count)||0)}catch(e){console.error("Error loading subscription count:",e),i(e.message),s(0)}finally{u(!1)}})();const o=a.channel(`subscription-count-${n}-${Date.now()}-${Math.random()}`).on("postgres_changes",{event:"*",schema:"public",table:"subscription_counts"},e=>{(e.new&&e.new.event_year===n||e.old&&e.old.event_year===n)&&(e.new?s(e.new.count):e.eventType==="DELETE"&&s(0))}).subscribe();return()=>{a.removeChannel(o)}},[n]),{count:f,loading:m,error:g}}function p(n){const[f,s]=r.useState(0),[m,u]=r.useState(!0),[g,i]=r.useState(null);return r.useEffect(()=>{if(n==null||Number.isNaN(Number(n))){u(!1),s(0),i(null);return}(async()=>{try{u(!0);const e=a.from("assignment_counts").select("count").eq("event_year",n);let t;e&&typeof e.maybeSingle=="function"?t=await e.maybeSingle():e&&typeof e.single=="function"?t=await e.single():t=await e;const{data:c,error:l}=t||{};if(l)throw console.error("Error loading assignment count:",l),l;s((c==null?void 0:c.count)||0)}catch(e){console.error("Error loading assignment count:",e),i(e.message),s(0)}finally{u(!1)}})();const o=a.channel(`assignment-count-${n}-${Date.now()}-${Math.random()}`).on("postgres_changes",{event:"*",schema:"public",table:"assignment_counts"},e=>{(e.new&&e.new.event_year===n||e.old&&e.old.event_year===n)&&(e.new?s(e.new.count):e.eventType==="DELETE"&&s(0))}).subscribe();return()=>{a.removeChannel(o)}},[n]),{count:f,loading:m,error:g}}function w(n){const[f,s]=r.useState(0),[m,u]=r.useState(!0),[g,i]=r.useState(null);return r.useEffect(()=>{if(n==null||Number.isNaN(Number(n))){u(!1),s(0),i(null);return}const b=async()=>{try{u(!0);const e=a.from("marker_counts").select("count").eq("event_year",n);let t;e&&typeof e.maybeSingle=="function"?t=await e.maybeSingle():e&&typeof e.single=="function"?t=await e.single():t=await e;const{data:c,error:l}=t||{};if(l)throw l;s((c==null?void 0:c.count)||0)}catch(e){console.error("Error loading marker count:",e),i(e.message),s(0)}finally{u(!1)}};b();const o=a.channel(`marker-count-${n}`).on("postgres_changes",{event:"*",schema:"public",table:"marker_counts"},e=>{b()}).subscribe();return()=>{a.removeChannel(o)}},[n]),{count:f,loading:m,error:g}}function d(){const[n,f]=r.useState(0),[s,m]=r.useState(!0),[u,g]=r.useState(null);return r.useEffect(()=>{const i=async()=>{try{m(!0);const o=a.from("company_counts").select("count");let e;o&&typeof o.maybeSingle=="function"?e=await o.maybeSingle():o&&typeof o.single=="function"?e=await o.single():e=await o;const{data:t,error:c}=e||{};if(c)throw c;f((t==null?void 0:t.count)||0)}catch(o){console.error("Error loading company count:",o),g(o.message),f(0)}finally{m(!1)}};i();const b=a.channel("company-count").on("postgres_changes",{event:"*",schema:"public",table:"company_counts"},o=>{i()}).subscribe();return()=>{a.removeChannel(b)}},[]),{count:n,loading:s,error:u}}export{p as a,w as b,d as c,h as u};
